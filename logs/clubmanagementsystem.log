2025-09-26 11:24:47 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 11:24:58 INFO  Main:138 - Application UI launched successfully
2025-09-26 11:26:31 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 11:26:45 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7fb558ca
2025-09-26 11:26:45 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 11:26:47 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 11:26:48 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 11:26:48 INFO  Main:89 - Testing Excel integration...
2025-09-26 11:26:49 INFO  Main:93 - Found 17 learners in database
2025-09-26 11:26:49 INFO  Main:98 - Excel file exists: true
2025-09-26 11:26:49 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 11:26:49 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 11:26:49 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 11:26:49 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 11:26:49 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 11:26:50 INFO  log:170 - Logging initialized @153173ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 11:26:52 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 11:26:52 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 11:26:52 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 11:26:53 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 11:26:53 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 11:26:53 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-26 11:26:53 INFO  AbstractConnector:333 - Started ServerConnector@4be38e3{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 11:26:53 INFO  Server:415 - Started @156516ms
2025-09-26 11:26:53 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 11:26:55 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 11:26:55 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 11:26:55 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 11:26:55 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 11:26:55 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 11:26:55 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 11:26:56 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 11:26:56 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 11:26:56 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 11:26:56 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 11:26:57 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 11:26:58 INFO  EnrollmentController:196 - Loading club statistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 11:26:59 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 11:26:59 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 11:26:59 INFO  EnrollmentController:233 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 11:26:59 INFO  EnrollmentController:59 - TeacherDashboardController subscribed to enrollment events
2025-09-26 11:46:04 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 11:46:08 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 11:47:47 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 11:47:53 INFO  Main:138 - Application UI launched successfully
2025-09-26 11:48:12 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 11:48:35 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@47655f34
2025-09-26 11:48:35 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 11:48:40 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 11:48:40 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 11:48:41 INFO  Main:89 - Testing Excel integration...
2025-09-26 11:48:43 INFO  Main:93 - Found 17 learners in database
2025-09-26 11:48:43 INFO  Main:98 - Excel file exists: true
2025-09-26 11:48:43 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 11:48:43 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 11:48:43 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 11:48:43 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 11:48:43 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 11:48:44 INFO  log:170 - Logging initialized @72616ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 11:48:45 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 11:48:45 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 11:48:45 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 11:48:46 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 11:48:46 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 11:48:46 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-26 11:48:46 INFO  AbstractConnector:333 - Started ServerConnector@68ee64{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 11:48:46 INFO  Server:415 - Started @74901ms
2025-09-26 11:48:46 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 11:48:47 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 11:48:47 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 11:48:47 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 11:48:47 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 11:48:47 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 11:48:47 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 11:48:49 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 11:48:50 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 11:48:50 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 11:48:50 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 11:48:50 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 11:48:50 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 11:48:50 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 11:48:50 INFO  TeacherDashboardController:192 - Loading club statistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 11:48:52 INFO  TeacherDashboardController:225 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 11:48:53 ERROR TeacherDashboardController:275 - Error loading today's attendance: ERROR: column "club_id" does not exist
  Position: 76
org.postgresql.util.PSQLException: ERROR: column "club_id" does not exist
  Position: 76
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.loadTodaysAttendance(TeacherDashboardController.java:262) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.loadClubStatistics(TeacherDashboardController.java:236) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.initialize(TeacherDashboardController.java:48) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3376) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3332) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3300) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3272) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3248) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:3241) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.LoginController.switchScene(LoginController.java:325) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.redirectBasedOnRole(LoginController.java:303) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:218) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-26 11:48:53 INFO  TeacherDashboardController:63 - TeacherDashboardController subscribed to enrollment events
2025-09-26 11:53:46 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 11:53:46 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 11:59:49 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 11:59:53 INFO  Main:138 - Application UI launched successfully
2025-09-26 12:00:07 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 12:00:12 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4322c879
2025-09-26 12:00:12 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 12:00:14 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 12:00:14 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:00:14 INFO  Main:89 - Testing Excel integration...
2025-09-26 12:00:14 INFO  Main:93 - Found 17 learners in database
2025-09-26 12:00:14 INFO  Main:98 - Excel file exists: true
2025-09-26 12:00:14 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 12:00:14 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 12:00:14 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 12:00:14 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 12:00:14 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 12:00:15 INFO  log:170 - Logging initialized @41737ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 12:00:15 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 12:00:15 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 12:00:15 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 12:00:15 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 12:00:15 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 12:00:15 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-26 12:00:16 INFO  AbstractConnector:333 - Started ServerConnector@25d105c3{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 12:00:16 INFO  Server:415 - Started @42550ms
2025-09-26 12:00:16 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 12:00:16 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 12:00:16 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 12:00:16 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 12:00:16 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 12:00:16 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 12:00:16 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 12:00:17 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 12:00:17 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 12:00:17 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 12:00:17 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 12:00:17 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 12:00:17 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 12:00:17 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 12:00:17 INFO  TeacherDashboardController:189 - Loading club statistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:00:18 INFO  TeacherDashboardController:225 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:00:18 INFO  TeacherDashboardController:60 - TeacherDashboardController subscribed to enrollment events
2025-09-26 12:01:23 INFO  EnrollmentController:192 - User is teacher: true
2025-09-26 12:01:23 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:01:23 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-26 12:01:26 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-26 12:02:02 INFO  EnrollmentController:192 - User is teacher: true
2025-09-26 12:02:02 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:02:02 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-26 12:02:05 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-26 12:03:27 INFO  TeacherDashboardController:189 - Loading club statistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:03:27 INFO  TeacherDashboardController:225 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:03:34 INFO  TeacherDashboardController:189 - Loading club statistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:03:34 INFO  TeacherDashboardController:225 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:06:52 INFO  TeacherDashboardController:80 - Cleaning up event listeners for TeacherDashboardController
2025-09-26 12:06:52 INFO  Main:414 - Application shutdown initiated
2025-09-26 12:06:52 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 12:06:52 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-26 12:06:52 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-26 12:06:52 INFO  AbstractConnector:383 - Stopped ServerConnector@25d105c3{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 12:06:52 INFO  session:149 - node0 Stopped scavenging
2025-09-26 12:06:52 INFO  EmbeddedJettyServer:180 - done
2025-09-26 12:06:52 INFO  WebhookService:389 - Webhook service stopped
2025-09-26 12:06:52 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-26 12:06:52 INFO  Main:405 - Excel School Server stopped
2025-09-26 12:06:52 INFO  SessionManager:119 - Session closed
2025-09-26 12:06:52 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 12:06:52 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 12:06:52 INFO  Main:429 - Application stopped successfully
2025-09-26 12:14:59 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 12:15:04 INFO  Main:138 - Application UI launched successfully
2025-09-26 12:17:57 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 12:17:58 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1b28b9df
2025-09-26 12:17:58 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 12:17:59 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 12:17:59 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:17:59 INFO  Main:89 - Testing Excel integration...
2025-09-26 12:17:59 INFO  Main:93 - Found 17 learners in database
2025-09-26 12:17:59 INFO  Main:98 - Excel file exists: true
2025-09-26 12:17:59 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 12:17:59 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 12:17:59 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 12:17:59 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 12:17:59 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 12:18:00 INFO  log:170 - Logging initialized @194946ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 12:18:00 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 12:18:00 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 12:18:00 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 12:18:01 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 12:18:01 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 12:18:01 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-26 12:18:01 INFO  AbstractConnector:333 - Started ServerConnector@dfa0b39{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 12:18:01 INFO  Server:415 - Started @195635ms
2025-09-26 12:18:01 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 12:18:01 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 12:18:01 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 12:18:01 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 12:18:01 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 12:18:01 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 12:18:01 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 12:18:01 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 12:18:01 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 12:18:01 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 12:18:01 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 12:18:01 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 12:18:02 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 12:18:02 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 12:18:02 INFO  TeacherDashboardController:189 - Loading club statistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:18:02 INFO  TeacherDashboardController:225 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:18:02 INFO  TeacherDashboardController:60 - TeacherDashboardController subscribed to enrollment events
2025-09-26 12:21:24 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 12:21:24 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 12:23:12 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 12:23:17 INFO  Main:138 - Application UI launched successfully
2025-09-26 12:23:30 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 12:23:44 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7a6e0ea
2025-09-26 12:23:44 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 12:23:47 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 12:23:47 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:23:47 INFO  Main:89 - Testing Excel integration...
2025-09-26 12:23:48 INFO  Main:93 - Found 17 learners in database
2025-09-26 12:23:48 INFO  Main:98 - Excel file exists: true
2025-09-26 12:23:48 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 12:23:48 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 12:23:48 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 12:23:48 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 12:23:48 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 12:23:49 INFO  log:170 - Logging initialized @55970ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 12:23:49 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 12:23:49 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 12:23:50 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 12:23:50 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 12:23:50 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 12:23:50 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-26 12:23:50 INFO  AbstractConnector:333 - Started ServerConnector@3e7d49{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 12:23:50 INFO  Server:415 - Started @57421ms
2025-09-26 12:23:50 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 12:23:51 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 12:23:51 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 12:23:51 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 12:23:51 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 12:23:51 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 12:23:51 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 12:23:51 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 12:23:52 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 12:23:52 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 12:23:52 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 12:23:52 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 12:23:52 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 12:23:52 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 12:23:52 INFO  TeacherDashboardController:189 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:23:53 INFO  TeacherDashboardController:221 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:23:53 INFO  TeacherDashboardController:60 - TeacherDashboardController subscribed to enrollment events
2025-09-26 12:24:00 INFO  EnrollmentController:192 - User is teacher: true
2025-09-26 12:24:00 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:24:00 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-26 12:24:06 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-26 12:28:20 INFO  EnrollmentController:448 - Loaded 0 enrollments for club Piano
2025-09-26 12:28:25 INFO  EnrollmentService:100 - Attempting to enroll learner 12febd6a-695d-4890-a3b9-a4bed866696d in club 31f651e3-f41b-4890-b0eb-a9eee7125dcd for term 3/2025
2025-09-26 12:28:26 INFO  EnrollmentService:215 - Successfully enrolled learner 12febd6a-695d-4890-a3b9-a4bed866696d in club 31f651e3-f41b-4890-b0eb-a9eee7125dcd for term 3/2025
2025-09-26 12:28:27 INFO  EnrollmentService:260 - Updated 1 club_learners records for learner 12febd6a-695d-4890-a3b9-a4bed866696d
2025-09-26 12:28:30 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-26 12:28:30 INFO  TeacherDashboardController:88 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-26 12:28:30 INFO  TeacherDashboardController:189 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:28:30 INFO  TeacherDashboardController:221 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:28:30 INFO  TeacherDashboardController:88 - Enrollment change detected with data: null, refreshing dashboard
2025-09-26 12:28:30 INFO  TeacherDashboardController:189 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:28:30 INFO  TeacherDashboardController:221 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:28:31 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-26 12:28:31 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-26 12:29:30 INFO  EnrollmentService:389 - Fetching enrollment history for learner_id: 12febd6a-695d-4890-a3b9-a4bed866696d
2025-09-26 12:35:53 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-26 12:35:56 INFO  EnrollmentController:448 - Loaded 0 enrollments for club Piano
2025-09-26 12:36:00 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-26 12:36:08 INFO  EnrollmentController:448 - Loaded 0 enrollments for club Piano
2025-09-26 12:36:12 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-26 12:49:09 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 12:49:10 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 12:50:30 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 12:50:33 INFO  Main:138 - Application UI launched successfully
2025-09-26 12:50:44 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 12:51:22 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@5c07e27b
2025-09-26 12:51:23 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 12:51:30 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 12:51:30 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:51:30 INFO  Main:89 - Testing Excel integration...
2025-09-26 12:51:32 INFO  Main:93 - Found 17 learners in database
2025-09-26 12:51:32 INFO  Main:98 - Excel file exists: true
2025-09-26 12:51:32 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 12:51:32 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 12:51:32 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 12:51:32 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 12:51:32 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 12:51:33 INFO  log:170 - Logging initialized @74488ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 12:51:35 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 12:51:35 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 12:51:36 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 12:51:37 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 12:51:37 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 12:51:37 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-26 12:51:40 INFO  AbstractConnector:333 - Started ServerConnector@4f6f1078{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 12:51:40 INFO  Server:415 - Started @81302ms
2025-09-26 12:51:40 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 12:51:41 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 12:51:41 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 12:51:41 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 12:51:41 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 12:51:41 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 12:51:41 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 12:51:43 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 12:51:43 ERROR WebhookService:328 - Error registering webhook with school server
java.net.http.HttpTimeoutException: request timed out
	at jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:949) ~[java.net.http:?]
	at jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133) ~[java.net.http:?]
	at com.cms.clubmanagementsystem.service.WebhookService.registerWithSchoolServer(WebhookService.java:317) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.registerWebhookWithSchool(Main.java:262) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:206) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-26 12:52:10 ERROR Main:266 - Failed to register webhook with school server
2025-09-26 12:52:13 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 12:52:13 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 12:52:13 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 12:52:13 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 12:52:14 ERROR LoginController:337 - Error loading /fxml/teacher-dashboard.fxml: String is not a valid type.
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/teacher-dashboard.fxml:47

javafx.fxml.LoadException: String is not a valid type.
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/teacher-dashboard.fxml:47

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2718) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.createElement(FXMLLoader.java:2920) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2850) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2649) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3376) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3332) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3300) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3272) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3248) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:3241) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.LoginController.switchScene(LoginController.java:325) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.redirectBasedOnRole(LoginController.java:303) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:218) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-26 12:55:56 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 12:55:56 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 12:56:40 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 12:56:47 INFO  Main:138 - Application UI launched successfully
2025-09-26 12:56:59 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 12:57:01 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1b21c0d5
2025-09-26 12:57:01 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 12:57:03 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 12:57:03 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 12:57:03 INFO  Main:89 - Testing Excel integration...
2025-09-26 12:57:03 INFO  Main:93 - Found 17 learners in database
2025-09-26 12:57:03 INFO  Main:98 - Excel file exists: true
2025-09-26 12:57:03 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 12:57:03 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 12:57:03 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 12:57:03 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 12:57:03 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 12:57:04 INFO  log:170 - Logging initialized @32672ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 12:57:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 12:57:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 12:57:07 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 12:57:07 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 12:57:07 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 12:57:07 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-26 12:57:08 INFO  AbstractConnector:333 - Started ServerConnector@604dff7{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 12:57:08 INFO  Server:415 - Started @36089ms
2025-09-26 12:57:08 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 12:57:08 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 12:57:08 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 12:57:08 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 12:57:08 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 12:57:08 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 12:57:08 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 12:57:08 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 12:57:08 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 12:57:08 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 12:57:08 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 12:57:08 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 12:57:09 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 12:57:09 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 12:57:09 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-26 12:57:09 INFO  TeacherDashboardController:162 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 12:57:09 INFO  TeacherDashboardController:183 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-26 12:57:09 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:09 INFO  TeacherDashboardController:242 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:09 INFO  TeacherDashboardController:79 - TeacherDashboardController subscribed to enrollment events
2025-09-26 12:57:17 INFO  TeacherDashboardController:59 - Selected term changed to: 1
2025-09-26 12:57:17 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:17 INFO  TeacherDashboardController:242 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:21 INFO  TeacherDashboardController:59 - Selected term changed to: 3
2025-09-26 12:57:21 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:21 INFO  TeacherDashboardController:242 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:37 INFO  TeacherDashboardController:59 - Selected term changed to: 1
2025-09-26 12:57:37 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:37 INFO  TeacherDashboardController:242 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:45 INFO  TeacherDashboardController:59 - Selected term changed to: 2
2025-09-26 12:57:45 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:45 INFO  TeacherDashboardController:242 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:49 INFO  TeacherDashboardController:59 - Selected term changed to: 3
2025-09-26 12:57:49 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:49 INFO  TeacherDashboardController:242 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:56 INFO  TeacherDashboardController:59 - Selected term changed to: 1
2025-09-26 12:57:56 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:57:56 INFO  TeacherDashboardController:242 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:58:29 INFO  TeacherDashboardController:207 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 12:58:29 INFO  TeacherDashboardController:242 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 13:01:52 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 13:01:52 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 13:03:04 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 13:03:14 INFO  Main:138 - Application UI launched successfully
2025-09-26 13:03:36 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 13:03:39 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@22380648
2025-09-26 13:03:39 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 13:03:41 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 13:03:41 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 13:03:41 INFO  Main:89 - Testing Excel integration...
2025-09-26 13:03:42 INFO  Main:93 - Found 17 learners in database
2025-09-26 13:03:42 INFO  Main:98 - Excel file exists: true
2025-09-26 13:03:42 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 13:03:42 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 13:03:42 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 13:03:42 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 13:03:42 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 13:03:43 INFO  log:170 - Logging initialized @48187ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 13:03:45 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 13:03:45 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 13:03:45 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 13:03:46 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 13:03:46 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 13:03:46 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-26 13:03:46 INFO  AbstractConnector:333 - Started ServerConnector@66de380b{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 13:03:46 INFO  Server:415 - Started @51138ms
2025-09-26 13:03:46 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 13:03:46 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 13:03:46 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 13:03:46 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 13:03:46 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 13:03:46 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 13:03:46 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 13:03:47 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 13:03:47 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 13:03:47 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 13:03:47 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 13:03:47 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 13:03:47 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 13:03:47 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 13:03:47 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-26 13:03:47 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 13:03:48 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-26 13:03:48 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-26 13:03:48 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-26 13:03:48 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-26 13:04:30 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-26 13:04:30 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-26 13:04:38 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-26 13:04:38 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-26 13:11:58 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-26 13:12:09 INFO  Main:414 - Application shutdown initiated
2025-09-26 13:12:21 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 13:12:22 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-26 13:12:22 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-26 13:12:29 INFO  AbstractConnector:383 - Stopped ServerConnector@66de380b{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 13:12:29 INFO  session:149 - node0 Stopped scavenging
2025-09-26 13:12:30 INFO  EmbeddedJettyServer:180 - done
2025-09-26 13:12:30 INFO  WebhookService:389 - Webhook service stopped
2025-09-26 13:12:30 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-26 13:12:30 INFO  Main:405 - Excel School Server stopped
2025-09-26 13:12:30 INFO  SessionManager:119 - Session closed
2025-09-26 13:12:33 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 13:12:34 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 13:12:34 INFO  Main:429 - Application stopped successfully
2025-09-26 13:18:13 INFO  Main:112 - Environment variables loaded successfully
2025-09-26 13:18:21 INFO  Main:138 - Application UI launched successfully
2025-09-26 13:18:45 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-26 13:18:48 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7b2bce5f
2025-09-26 13:18:48 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-26 13:18:50 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-26 13:18:50 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-26 13:18:50 INFO  Main:89 - Testing Excel integration...
2025-09-26 13:18:51 INFO  Main:93 - Found 17 learners in database
2025-09-26 13:18:51 INFO  Main:98 - Excel file exists: true
2025-09-26 13:18:51 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-26 13:18:51 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-26 13:18:51 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-26 13:18:51 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-26 13:18:51 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-26 13:18:52 INFO  log:170 - Logging initialized @79073ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-26 13:18:52 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-26 13:18:52 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-26 13:18:52 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-26 13:18:52 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-26 13:18:52 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-26 13:18:52 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-26 13:18:53 INFO  AbstractConnector:333 - Started ServerConnector@2c5369ff{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 13:18:53 INFO  Server:415 - Started @80489ms
2025-09-26 13:18:53 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-26 13:18:53 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-26 13:18:53 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-26 13:18:53 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-26 13:18:53 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-26 13:18:53 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-26 13:18:53 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-26 13:18:54 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 13:18:54 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-26 13:18:54 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-26 13:18:54 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 13:18:54 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-26 13:18:54 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-26 13:18:54 INFO  Main:264 - Webhook registered successfully with school server
2025-09-26 13:18:55 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-26 13:18:55 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-26 13:18:55 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-26 13:18:55 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-26 13:18:55 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-26 13:18:55 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-26 13:19:01 INFO  AttendanceController:47 - Initializing AttendanceController
2025-09-26 13:19:01 INFO  AttendanceController:128 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-26 13:19:01 INFO  AttendanceController:81 - Selected session: 9b99cb79-638b-4a96-9590-23e2d5160b33
2025-09-26 13:19:02 ERROR AttendanceController:176 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 70
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 70
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.loadAttendanceData(AttendanceController.java:163) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.lambda$initialize$2(AttendanceController.java:82) ~[classes/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:372) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:113) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:147) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:105) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.ComboBox$ComboBoxSelectionModel.lambda$new$0(ComboBox.java:562) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:147) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyIntegerPropertyBase.fireValueChangedEvent(ReadOnlyIntegerPropertyBase.java:78) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyIntegerWrapper.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:102) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.IntegerPropertyBase.markInvalid(IntegerPropertyBase.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.IntegerPropertyBase.set(IntegerPropertyBase.java:148) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedIndex(SelectionModel.java:69) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.SingleSelectionModel.updateSelectedIndex(SingleSelectionModel.java:215) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.SingleSelectionModel.select(SingleSelectionModel.java:149) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.SingleSelectionModel.selectFirst(SingleSelectionModel.java:178) ~[javafx-controls-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.loadSessions(AttendanceController.java:132) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.setClubId(AttendanceController.java:89) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:351) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-26 13:19:02 INFO  AttendanceController:96 - Set year: 2025, term: 3 for AttendanceController
2025-09-26 13:19:02 ERROR AttendanceController:176 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 70
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 70
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.loadAttendanceData(AttendanceController.java:163) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.setYearAndTerm(AttendanceController.java:100) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:352) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-26 13:19:20 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-26 13:19:20 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-26 13:19:24 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-26 13:19:25 INFO  Main:414 - Application shutdown initiated
2025-09-26 13:19:25 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-26 13:19:25 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-26 13:19:25 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-26 13:19:25 INFO  AbstractConnector:383 - Stopped ServerConnector@2c5369ff{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-26 13:19:25 INFO  session:149 - node0 Stopped scavenging
2025-09-26 13:19:25 INFO  EmbeddedJettyServer:180 - done
2025-09-26 13:19:25 INFO  WebhookService:389 - Webhook service stopped
2025-09-26 13:19:25 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-26 13:19:25 INFO  Main:405 - Excel School Server stopped
2025-09-26 13:19:25 INFO  SessionManager:119 - Session closed
2025-09-26 13:19:25 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-26 13:19:25 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-26 13:19:25 INFO  Main:429 - Application stopped successfully
2025-09-27 04:15:00 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 04:15:28 INFO  Main:138 - Application UI launched successfully
2025-09-27 04:22:19 INFO  Main:414 - Application shutdown initiated
2025-09-27 04:22:21 INFO  Main:429 - Application stopped successfully
2025-09-27 04:40:45 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 04:40:50 INFO  Main:138 - Application UI launched successfully
2025-09-27 04:41:05 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 04:41:14 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3117280e
2025-09-27 04:41:14 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 04:41:16 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 04:41:16 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 04:41:16 INFO  Main:89 - Testing Excel integration...
2025-09-27 04:41:17 INFO  Main:93 - Found 17 learners in database
2025-09-27 04:41:17 INFO  Main:98 - Excel file exists: true
2025-09-27 04:41:17 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 04:41:17 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 04:41:17 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 04:41:17 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 04:41:17 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 04:41:19 INFO  log:170 - Logging initialized @70784ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 04:41:20 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 04:41:20 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 04:41:20 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 04:41:21 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 04:41:21 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 04:41:21 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 04:41:21 INFO  AbstractConnector:333 - Started ServerConnector@276d42ed{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 04:41:21 INFO  Server:415 - Started @73612ms
2025-09-27 04:41:21 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 04:41:22 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 04:41:22 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:41:22 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 04:41:22 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 04:41:22 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 04:41:22 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 04:41:23 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 04:41:23 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 04:41:23 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 04:41:23 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:41:23 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 04:41:23 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 04:41:23 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 04:41:24 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 04:41:24 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:41:24 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 04:41:24 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 04:41:24 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 04:41:24 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 04:41:32 INFO  AttendanceController:61 - Initializing AttendanceController
2025-09-27 04:41:33 INFO  AttendanceController:187 - Loaded 0 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 04:41:33 INFO  AttendanceController:224 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 04:41:33 INFO  AttendanceController:167 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 04:41:33 INFO  AttendanceController:187 - Loaded 0 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 04:42:23 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 04:42:23 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 04:42:24 INFO  SessionManager:119 - Session closed
2025-09-27 04:42:24 INFO  TeacherDashboardController:425 - Teacher logout
2025-09-27 04:42:41 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-09-27 04:42:41 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-09-27 04:42:41 INFO  Main:89 - Testing Excel integration...
2025-09-27 04:42:41 INFO  Main:93 - Found 17 learners in database
2025-09-27 04:42:41 INFO  Main:98 - Excel file exists: true
2025-09-27 04:42:41 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 04:42:41 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 04:42:41 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 04:42:41 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 04:42:41 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 04:42:41 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 04:42:41 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:42:41 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 04:42:41 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 04:42:41 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 04:42:41 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-09-27 04:42:41 ERROR WebhookService:77 - Failed to start webhook service on port 8080
java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 04:42:41 ERROR Main:208 - Webhook service failed to start
java.lang.RuntimeException: Could not start webhook listener
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:78) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	... 6 more
2025-09-27 04:42:41 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:42:42 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:42:42 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-09-27 04:42:42 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:43:32 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-09-27 04:43:34 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-09-27 04:43:35 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-09-27 04:43:35 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-09-27 04:43:35 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-09-27 04:43:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-09-27 04:43:35 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-09-27 04:43:35 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-09-27 04:43:35 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-09-27 04:43:35 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:43:40 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:202) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 04:43:40 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-09-27 04:43:40 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-09-27 04:43:40 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-09-27 04:43:40 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-09-27 04:43:40 INFO  LearnerService:680 - Found 12 grades for school
2025-09-27 04:43:40 WARN  ProxyLeakTask:85 - Connection leak detection triggered for org.postgresql.jdbc.PgConnection@3117280e on thread JavaFX Application Thread, stack trace follows
java.lang.Exception: Apparent connection leak detected
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:99) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.utils.DatabaseConnector.getConnection(DatabaseConnector.java:89) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:87) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 04:43:43 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-09-27 04:43:43 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-09-27 04:43:43 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-09-27 04:43:43 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-09-27 04:43:43 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 04:43:43 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:43:43 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-09-27 04:43:43 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-09-27 04:43:44 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-09-27 04:43:45 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-09-27 04:43:45 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:43:49 INFO  ProxyLeakTask:92 - Previously reported leaked connection org.postgresql.jdbc.PgConnection@3117280e on thread JavaFX Application Thread was returned to the pool (unleaked)
2025-09-27 04:45:54 INFO  SessionManager:119 - Session closed
2025-09-27 04:46:27 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 04:46:27 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 04:46:27 INFO  Main:89 - Testing Excel integration...
2025-09-27 04:46:27 INFO  Main:93 - Found 17 learners in database
2025-09-27 04:46:27 INFO  Main:98 - Excel file exists: true
2025-09-27 04:46:27 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 04:46:27 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 04:46:27 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 04:46:27 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 04:46:27 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 04:46:27 ERROR WebhookService:77 - Failed to start webhook service on port 8080
java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 04:46:27 ERROR Main:208 - Webhook service failed to start
java.lang.RuntimeException: Could not start webhook listener
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:78) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	... 6 more
2025-09-27 04:46:27 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 04:46:27 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:46:27 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 04:46:27 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 04:46:27 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 04:46:27 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 04:46:27 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 04:46:27 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 04:46:27 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:46:27 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 04:46:27 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 04:46:27 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:46:27 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 04:46:27 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 04:46:27 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 04:46:27 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 04:46:33 INFO  AttendanceController:61 - Initializing AttendanceController
2025-09-27 04:46:33 INFO  AttendanceController:187 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 04:46:33 INFO  AttendanceController:224 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 04:46:33 INFO  AttendanceController:167 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 04:46:33 INFO  AttendanceController:187 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 04:47:07 INFO  AttendanceController:332 - Created new session 7fea17e0-d066-40bc-b209-a333dd560f9b for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 04:47:07 INFO  AttendanceController:105 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 04:47:07 ERROR AttendanceController:274 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 84
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 84
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.loadAttendanceData(AttendanceController.java:260) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.lambda$setupSessionComboBox$2(AttendanceController.java:106) ~[classes/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:372) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:113) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:147) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:105) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.ComboBox$ComboBoxSelectionModel.lambda$new$0(ComboBox.java:562) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:147) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyIntegerPropertyBase.fireValueChangedEvent(ReadOnlyIntegerPropertyBase.java:78) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyIntegerWrapper.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:102) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.IntegerPropertyBase.markInvalid(IntegerPropertyBase.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.IntegerPropertyBase.set(IntegerPropertyBase.java:148) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedIndex(SelectionModel.java:69) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.SingleSelectionModel.updateSelectedIndex(SingleSelectionModel.java:215) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.SingleSelectionModel.select(SingleSelectionModel.java:149) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.SingleSelectionModel.select(SingleSelectionModel.java:124) ~[javafx-controls-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:339) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:360) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 04:47:07 ERROR AttendanceController:274 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 84
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "Present"
  Position: 84
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.loadAttendanceData(AttendanceController.java:260) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:340) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:360) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 04:50:45 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 04:50:45 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 04:57:31 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 04:57:37 INFO  Main:138 - Application UI launched successfully
2025-09-27 04:58:15 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 04:58:20 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4ea4452d
2025-09-27 04:58:20 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 04:58:24 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 04:58:24 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 04:58:25 INFO  Main:89 - Testing Excel integration...
2025-09-27 04:58:26 INFO  Main:93 - Found 17 learners in database
2025-09-27 04:58:26 INFO  Main:98 - Excel file exists: true
2025-09-27 04:58:26 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 04:58:26 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 04:58:26 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 04:58:26 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 04:58:26 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 04:58:28 INFO  log:170 - Logging initialized @81426ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 04:58:34 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 04:58:34 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 04:58:34 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 04:58:35 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 04:58:35 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 04:58:35 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 04:58:36 INFO  AbstractConnector:333 - Started ServerConnector@5a993be7{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 04:58:36 INFO  Server:415 - Started @89738ms
2025-09-27 04:58:36 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 04:58:37 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 04:58:37 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 04:58:37 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 04:58:37 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 04:58:37 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 04:58:37 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 04:58:39 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 04:58:39 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 04:58:39 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:58:39 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 04:58:39 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 04:58:39 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 04:58:39 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 04:58:39 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 04:58:39 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 04:58:39 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 04:58:39 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 04:58:40 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 04:58:40 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 04:58:48 ERROR TeacherDashboardController:366 - Error loading attendance management: source is required.
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/attendance-management.fxml:51

javafx.fxml.LoadException: source is required.
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/attendance-management.fxml:51

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2718) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ReferenceElement.constructValue(FXMLLoader.java:1209) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:759) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2649) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:348) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 05:01:04 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 05:01:04 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 05:06:33 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 05:06:45 INFO  Main:138 - Application UI launched successfully
2025-09-27 05:06:55 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 05:07:01 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@51582b5b
2025-09-27 05:07:01 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 05:07:04 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 05:07:05 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 05:07:05 INFO  Main:89 - Testing Excel integration...
2025-09-27 05:07:05 INFO  Main:93 - Found 17 learners in database
2025-09-27 05:07:05 INFO  Main:98 - Excel file exists: true
2025-09-27 05:07:05 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 05:07:05 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 05:07:05 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 05:07:05 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 05:07:05 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 05:07:06 INFO  log:170 - Logging initialized @47364ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 05:07:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 05:07:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 05:07:07 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 05:07:07 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 05:07:07 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 05:07:08 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 05:07:09 INFO  AbstractConnector:333 - Started ServerConnector@555435cd{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 05:07:09 INFO  Server:415 - Started @50434ms
2025-09-27 05:07:09 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 05:07:10 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 05:07:10 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 05:07:10 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 05:07:10 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 05:07:10 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 05:07:10 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 05:07:10 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 05:07:11 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 05:07:11 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 05:07:11 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 05:07:11 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 05:07:11 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 05:07:11 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 05:07:11 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 05:07:11 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 05:07:11 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 05:07:11 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 05:07:11 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 05:07:12 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 05:07:23 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 05:07:23 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 05:07:23 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 05:07:27 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 05:07:28 INFO  AttendanceController:231 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:07:28 INFO  AttendanceController:268 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 05:07:28 INFO  AttendanceController:149 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 05:07:28 INFO  AttendanceController:316 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 05:07:28 INFO  AttendanceController:211 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 05:07:28 INFO  AttendanceController:231 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:07:28 INFO  AttendanceController:316 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 05:14:54 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 05:14:55 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 05:14:57 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 05:14:57 INFO  AttendanceController:231 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:14:57 INFO  AttendanceController:268 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 05:14:57 INFO  AttendanceController:149 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 05:14:57 INFO  AttendanceController:316 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 05:14:57 INFO  AttendanceController:211 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 05:14:57 INFO  AttendanceController:231 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:14:57 INFO  AttendanceController:316 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 05:15:08 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 05:15:08 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 05:15:57 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 05:15:57 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 05:15:57 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 05:20:33 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 05:20:33 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 05:24:27 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 05:24:30 INFO  Main:138 - Application UI launched successfully
2025-09-27 05:24:52 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 05:24:57 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@28da9ec
2025-09-27 05:24:57 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 05:24:59 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 05:24:59 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 05:24:59 INFO  Main:89 - Testing Excel integration...
2025-09-27 05:24:59 INFO  Main:93 - Found 17 learners in database
2025-09-27 05:24:59 INFO  Main:98 - Excel file exists: true
2025-09-27 05:24:59 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 05:24:59 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 05:25:00 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 05:25:00 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 05:25:00 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 05:25:00 INFO  log:170 - Logging initialized @62473ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 05:25:00 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 05:25:00 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 05:25:00 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 05:25:01 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 05:25:01 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 05:25:01 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 05:25:01 INFO  AbstractConnector:333 - Started ServerConnector@170ecd02{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 05:25:01 INFO  Server:415 - Started @63610ms
2025-09-27 05:25:01 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 05:25:02 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 05:25:02 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 05:25:02 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 05:25:02 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 05:25:02 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 05:25:02 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 05:25:04 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 05:25:04 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 05:25:04 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 05:25:04 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 05:25:04 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 05:25:04 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 05:25:04 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 05:25:04 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 05:25:05 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 05:25:05 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 05:25:05 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 05:25:05 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 05:25:05 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 05:25:32 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 05:25:33 INFO  AttendanceController:238 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:25:33 INFO  AttendanceController:275 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 05:25:33 INFO  AttendanceController:156 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 05:25:33 INFO  AttendanceController:327 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 05:25:33 INFO  AttendanceController:218 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 05:25:33 INFO  AttendanceController:238 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:25:33 INFO  AttendanceController:327 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 05:44:52 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 05:44:54 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 05:44:55 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 05:44:56 INFO  Main:414 - Application shutdown initiated
2025-09-27 05:44:59 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 05:44:59 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 05:44:59 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 05:44:59 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 05:45:00 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 05:45:03 INFO  AbstractConnector:383 - Stopped ServerConnector@170ecd02{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 05:45:03 INFO  session:149 - node0 Stopped scavenging
2025-09-27 05:45:03 INFO  EmbeddedJettyServer:180 - done
2025-09-27 05:45:03 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 05:45:03 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 05:45:03 INFO  Main:405 - Excel School Server stopped
2025-09-27 05:45:03 INFO  SessionManager:119 - Session closed
2025-09-27 05:45:03 INFO  Main:429 - Application stopped successfully
2025-09-27 05:46:01 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 05:46:04 INFO  Main:138 - Application UI launched successfully
2025-09-27 05:47:14 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 05:47:20 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@d9d2dad
2025-09-27 05:47:20 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 05:47:22 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 05:47:22 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 05:47:22 INFO  Main:89 - Testing Excel integration...
2025-09-27 05:47:22 INFO  Main:93 - Found 17 learners in database
2025-09-27 05:47:22 INFO  Main:98 - Excel file exists: true
2025-09-27 05:47:22 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 05:47:22 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 05:47:22 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 05:47:22 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 05:47:22 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 05:47:23 INFO  log:170 - Logging initialized @99670ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 05:47:24 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 05:47:24 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 05:47:24 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 05:47:27 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 05:47:27 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 05:47:27 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 05:47:29 INFO  AbstractConnector:333 - Started ServerConnector@3399e5cd{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 05:47:29 INFO  Server:415 - Started @106159ms
2025-09-27 05:47:29 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 05:47:29 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 05:47:29 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 05:47:29 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 05:47:29 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 05:47:29 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 05:47:30 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 05:47:33 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 05:47:33 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 05:47:33 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 05:47:33 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 05:47:34 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 05:47:34 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 05:47:34 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 05:47:34 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 05:47:34 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 05:47:35 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 05:47:35 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 05:47:35 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 05:47:35 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 05:48:30 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 05:48:30 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 05:48:30 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 05:48:43 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 05:48:44 INFO  AttendanceController:265 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:48:44 INFO  AttendanceController:302 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 05:48:44 INFO  AttendanceController:183 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 05:48:44 INFO  AttendanceController:354 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 05:48:44 INFO  AttendanceController:245 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 05:48:44 INFO  AttendanceController:265 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 05:48:44 INFO  AttendanceController:354 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:02:43 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 06:02:50 INFO  Main:138 - Application UI launched successfully
2025-09-27 06:03:02 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 06:03:08 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1bff9f97
2025-09-27 06:03:08 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 06:03:10 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 06:03:10 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:03:10 INFO  Main:89 - Testing Excel integration...
2025-09-27 06:03:11 INFO  Main:93 - Found 17 learners in database
2025-09-27 06:03:11 INFO  Main:98 - Excel file exists: true
2025-09-27 06:03:11 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 06:03:11 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 06:03:11 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 06:03:11 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 06:03:11 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 06:03:11 INFO  log:170 - Logging initialized @43558ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 06:03:12 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 06:03:12 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 06:03:12 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 06:03:12 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 06:03:12 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 06:03:12 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 06:03:12 INFO  AbstractConnector:333 - Started ServerConnector@5efa5c46{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 06:03:12 INFO  Server:415 - Started @44238ms
2025-09-27 06:03:12 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 06:03:12 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 06:03:12 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 06:03:12 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 06:03:12 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 06:03:12 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 06:03:12 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 06:03:13 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 06:03:13 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 06:03:13 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 06:03:13 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 06:03:13 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 06:03:13 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:03:13 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 06:03:13 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 06:03:13 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:03:13 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:03:13 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:03:13 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:03:14 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 06:03:18 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-27 06:03:18 INFO  AttendanceController:266 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:03:18 INFO  AttendanceController:303 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 06:03:18 INFO  AttendanceController:184 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 06:03:18 INFO  AttendanceController:355 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 06:03:18 INFO  AttendanceController:246 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 06:03:18 INFO  AttendanceController:266 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:03:18 INFO  AttendanceController:355 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:12:16 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 06:12:16 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 06:13:03 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 06:13:09 INFO  Main:138 - Application UI launched successfully
2025-09-27 06:13:20 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 06:13:21 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@589d49f0
2025-09-27 06:13:21 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 06:13:22 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 06:13:22 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:13:22 INFO  Main:89 - Testing Excel integration...
2025-09-27 06:13:22 INFO  Main:93 - Found 17 learners in database
2025-09-27 06:13:22 INFO  Main:98 - Excel file exists: true
2025-09-27 06:13:22 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 06:13:22 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 06:13:22 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 06:13:22 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 06:13:22 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 06:13:22 INFO  log:170 - Logging initialized @34730ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 06:13:22 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 06:13:22 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 06:13:22 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 06:13:22 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 06:13:22 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 06:13:22 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 06:13:23 INFO  AbstractConnector:333 - Started ServerConnector@b4f9e51{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 06:13:23 INFO  Server:415 - Started @35009ms
2025-09-27 06:13:23 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 06:13:23 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 06:13:23 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 06:13:23 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 06:13:23 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 06:13:23 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 06:13:23 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 06:13:23 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 06:13:23 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 06:13:23 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:13:23 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 06:13:23 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 06:13:23 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:13:23 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 06:13:23 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:13:23 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:13:23 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 06:13:23 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 06:13:23 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:13:23 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 06:13:27 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 06:13:27 INFO  AttendanceController:264 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:13:27 INFO  AttendanceController:301 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 06:13:27 INFO  AttendanceController:182 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 06:13:27 INFO  AttendanceController:353 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 06:13:27 INFO  AttendanceController:244 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 06:13:27 INFO  AttendanceController:264 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:13:27 INFO  AttendanceController:353 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:17:31 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:17:31 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:17:32 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 06:17:32 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:17:32 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:18:36 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-27 06:19:11 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-27 06:19:24 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 06:19:24 INFO  AttendanceController:264 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:19:24 INFO  AttendanceController:301 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 06:19:24 INFO  AttendanceController:182 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 06:19:24 INFO  AttendanceController:353 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 06:19:24 INFO  AttendanceController:244 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 06:19:24 INFO  AttendanceController:264 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:19:24 INFO  AttendanceController:353 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:20:13 ERROR AttendanceController:543 - Error saving attendance: Batch entry 0     INSERT INTO attendance_records (record_id, session_id, learner_id, school_id, status, marked_by)
    VALUES (('794e7420-84ae-4d85-bebb-87e5835b5f8f'::uuid), ('7fea17e0-d066-40bc-b209-a333dd560f9b'::uuid), ('12febd6a-695d-4890-a3b9-a4bed866696d'::uuid), ('9d47203f-4e54-47ac-a560-eeb277794e76'::uuid), ('present'), ('5858b2a0-a8b6-40f6-9e14-ef50ba3071f0'::uuid))
    ON CONFLICT (session_id, learner_id)
    DO UPDATE SET status = EXCLUDED.status, marked_by = EXCLUDED.marked_by, marked_at = CURRENT_TIMESTAMP
 was aborted: ERROR: column "status" is of type attendance_status but expression is of type character varying
  Hint: You will need to rewrite or cast the expression.
  Position: 130  Call getNextException to see other errors in the batch.
java.sql.BatchUpdateException: Batch entry 0     INSERT INTO attendance_records (record_id, session_id, learner_id, school_id, status, marked_by)
    VALUES (('794e7420-84ae-4d85-bebb-87e5835b5f8f'::uuid), ('7fea17e0-d066-40bc-b209-a333dd560f9b'::uuid), ('12febd6a-695d-4890-a3b9-a4bed866696d'::uuid), ('9d47203f-4e54-47ac-a560-eeb277794e76'::uuid), ('present'), ('5858b2a0-a8b6-40f6-9e14-ef50ba3071f0'::uuid))
    ON CONFLICT (session_id, learner_id)
    DO UPDATE SET status = EXCLUDED.status, marked_by = EXCLUDED.marked_by, marked_at = CURRENT_TIMESTAMP
 was aborted: ERROR: column "status" is of type attendance_status but expression is of type character varying
  Hint: You will need to rewrite or cast the expression.
  Position: 130  Call getNextException to see other errors in the batch.
	at org.postgresql.jdbc.BatchResultHandler.handleCompletion(BatchResultHandler.java:186) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:590) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.internalExecuteBatch(PgStatement.java:912) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeBatch(PgStatement.java:936) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeBatch(PgPreparedStatement.java:1733) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.saveAttendance(AttendanceController.java:529) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:360) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column "status" is of type attendance_status but expression is of type character varying
  Hint: You will need to rewrite or cast the expression.
  Position: 130
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:579) ~[postgresql-42.7.3.jar:?]
	... 122 more
2025-09-27 06:37:06 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 06:37:12 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 06:38:29 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 06:38:32 INFO  Main:138 - Application UI launched successfully
2025-09-27 06:38:50 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 06:38:56 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@ebfe77e
2025-09-27 06:38:56 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 06:38:57 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 06:38:57 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:38:57 INFO  Main:89 - Testing Excel integration...
2025-09-27 06:38:58 INFO  Main:93 - Found 17 learners in database
2025-09-27 06:38:58 INFO  Main:98 - Excel file exists: true
2025-09-27 06:38:58 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 06:38:58 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 06:38:58 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 06:38:58 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 06:38:58 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 06:38:58 INFO  log:170 - Logging initialized @44654ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 06:38:59 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 06:38:59 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 06:38:59 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 06:38:59 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 06:38:59 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 06:38:59 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 06:38:59 INFO  AbstractConnector:333 - Started ServerConnector@6a285b64{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 06:38:59 INFO  Server:415 - Started @45565ms
2025-09-27 06:38:59 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 06:39:00 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 06:39:00 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 06:39:00 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 06:39:00 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 06:39:00 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 06:39:00 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 06:39:01 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 06:39:01 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 06:39:01 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 06:39:01 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 06:39:01 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 06:39:01 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:39:01 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 06:39:01 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 06:39:01 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:39:01 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:39:01 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:39:02 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:39:02 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 06:40:00 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 06:40:01 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:40:01 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 06:40:01 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 06:40:01 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 06:40:01 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 06:40:01 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:40:01 INFO  AttendanceController:349 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:40:13 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:40:13 INFO  TeacherDashboardController:125 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 06:40:13 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:40:13 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:40:17 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:40:17 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:40:37 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 06:40:37 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:40:37 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 06:40:37 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 06:40:37 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 06:40:37 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 06:40:37 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:40:37 INFO  AttendanceController:349 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:40:44 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:40:44 INFO  TeacherDashboardController:125 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 06:40:44 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:40:44 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:40:47 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:40:47 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:42:05 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 06:42:05 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:42:05 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:42:15 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 06:42:15 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:42:15 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:42:19 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-27 06:42:27 INFO  EnrollmentService:100 - Attempting to enroll learner 824699cb-2a44-42d8-99d6-642fd60bb56b in club 31f651e3-f41b-4890-b0eb-a9eee7125dcd for term 3/2025
2025-09-27 06:42:27 INFO  EnrollmentService:215 - Successfully enrolled learner 824699cb-2a44-42d8-99d6-642fd60bb56b in club 31f651e3-f41b-4890-b0eb-a9eee7125dcd for term 3/2025
2025-09-27 06:42:27 INFO  EnrollmentService:274 - Inserted 1 club_learners record for learner 824699cb-2a44-42d8-99d6-642fd60bb56b
2025-09-27 06:42:29 INFO  EnrollmentController:448 - Loaded 2 enrollments for club Piano
2025-09-27 06:42:29 INFO  TeacherDashboardController:125 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 06:42:29 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:42:29 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:42:29 INFO  TeacherDashboardController:125 - Enrollment change detected with data: null, refreshing dashboard
2025-09-27 06:42:29 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:42:29 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:42:29 INFO  EnrollmentController:448 - Loaded 2 enrollments for club Piano
2025-09-27 06:42:29 INFO  EnrollmentController:448 - Loaded 2 enrollments for club Piano
2025-09-27 06:42:36 INFO  EnrollmentService:389 - Fetching enrollment history for learner_id: 824699cb-2a44-42d8-99d6-642fd60bb56b
2025-09-27 06:43:28 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 06:43:28 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:43:28 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 06:43:28 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 06:43:28 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 06:43:28 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 06:43:28 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 06:43:28 INFO  AttendanceController:349 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 06:43:42 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:43:42 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:56:49 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 06:56:52 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 06:58:15 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 06:58:19 INFO  Main:138 - Application UI launched successfully
2025-09-27 06:58:49 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 06:59:05 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@d9d2dad
2025-09-27 06:59:05 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 06:59:08 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 06:59:08 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 06:59:08 INFO  Main:89 - Testing Excel integration...
2025-09-27 06:59:09 INFO  Main:93 - Found 17 learners in database
2025-09-27 06:59:09 INFO  Main:98 - Excel file exists: true
2025-09-27 06:59:09 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 06:59:09 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 06:59:09 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 06:59:09 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 06:59:09 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 06:59:10 INFO  log:170 - Logging initialized @71767ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 06:59:12 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 06:59:12 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 06:59:12 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 06:59:12 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 06:59:12 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 06:59:12 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 06:59:12 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 06:59:12 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 06:59:12 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 06:59:12 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 06:59:12 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 06:59:12 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 06:59:13 INFO  AbstractConnector:333 - Started ServerConnector@ab5f5ed{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 06:59:13 INFO  Server:415 - Started @74229ms
2025-09-27 06:59:13 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 06:59:14 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 06:59:14 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 06:59:14 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:59:14 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 06:59:14 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 06:59:14 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 06:59:14 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 06:59:14 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 06:59:14 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 06:59:15 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 06:59:15 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 06:59:15 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 06:59:15 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 07:00:06 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 07:00:06 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 07:00:06 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 07:00:06 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 07:00:06 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 07:00:06 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 07:00:06 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 07:00:06 INFO  AttendanceController:349 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 07:00:13 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:00:13 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:00:26 ERROR TeacherDashboardController:392 - Error loading learners view: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/learners-view.fxml

javafx.fxml.LoadException: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/learners-view.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2700) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewLearners(TeacherDashboardController.java:379) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.NullPointerException: Cannot invoke "javafx.scene.control.TableColumn.setCellValueFactory(javafx.util.Callback)" because "this.learnerIdColumn" is null
	at com.cms.clubmanagementsystem.controller.LearnersViewController.initialize(LearnersViewController.java:32) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	... 61 more
2025-09-27 07:00:58 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 07:00:58 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 07:01:15 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 07:01:17 INFO  Main:138 - Application UI launched successfully
2025-09-27 07:01:26 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 07:01:27 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4322c879
2025-09-27 07:01:27 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 07:01:27 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 07:01:27 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:01:27 INFO  Main:89 - Testing Excel integration...
2025-09-27 07:01:27 INFO  Main:93 - Found 17 learners in database
2025-09-27 07:01:27 INFO  Main:98 - Excel file exists: true
2025-09-27 07:01:27 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 07:01:27 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 07:01:27 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 07:01:27 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 07:01:27 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 07:01:27 INFO  log:170 - Logging initialized @20694ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 07:01:28 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 07:01:28 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 07:01:28 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 07:01:28 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 07:01:28 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 07:01:28 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 07:01:28 INFO  AbstractConnector:333 - Started ServerConnector@14511bdc{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 07:01:28 INFO  Server:415 - Started @20962ms
2025-09-27 07:01:28 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 07:01:28 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 07:01:28 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 07:01:28 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 07:01:28 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 07:01:28 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 07:01:28 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 07:01:28 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 07:01:28 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 07:01:28 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:01:28 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 07:01:28 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 07:01:28 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:01:28 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 07:01:28 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:01:28 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:01:28 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:01:28 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 07:01:28 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 07:01:28 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 07:01:31 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 07:01:31 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 07:01:31 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 07:01:31 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 07:01:31 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 07:01:31 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 07:01:31 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 07:01:31 INFO  AttendanceController:349 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 07:01:47 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:01:47 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:01:49 ERROR TeacherDashboardController:392 - Error loading learners view: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/learners-view.fxml

javafx.fxml.LoadException: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/learners-view.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2700) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewLearners(TeacherDashboardController.java:379) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.NullPointerException: Cannot invoke "javafx.scene.control.TableColumn.setCellValueFactory(javafx.util.Callback)" because "this.learnerIdColumn" is null
	at com.cms.clubmanagementsystem.controller.LearnersViewController.initialize(LearnersViewController.java:32) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	... 61 more
2025-09-27 07:10:49 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 07:10:49 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 07:19:13 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 07:19:19 INFO  Main:138 - Application UI launched successfully
2025-09-27 07:19:42 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 07:19:51 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7a92d135
2025-09-27 07:19:51 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 07:19:58 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 07:19:58 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:19:58 INFO  Main:89 - Testing Excel integration...
2025-09-27 07:19:58 INFO  Main:93 - Found 17 learners in database
2025-09-27 07:19:58 INFO  Main:98 - Excel file exists: true
2025-09-27 07:19:58 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 07:19:58 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 07:19:59 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 07:19:59 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 07:19:59 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 07:19:59 INFO  log:170 - Logging initialized @58021ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 07:20:04 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 07:20:04 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 07:20:04 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 07:20:04 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 07:20:04 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 07:20:04 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 07:20:05 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 07:20:05 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 07:20:05 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 07:20:05 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 07:20:05 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 07:20:05 INFO  AbstractConnector:333 - Started ServerConnector@78b4f9a5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 07:20:05 INFO  Server:415 - Started @63420ms
2025-09-27 07:20:05 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 07:20:05 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 07:20:06 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 07:20:06 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 07:20:06 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:20:06 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 07:20:06 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 07:20:06 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:20:06 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 07:20:06 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:20:06 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:20:06 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 07:20:06 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 07:20:06 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:20:07 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 07:22:28 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 07:22:28 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:22:28 INFO  TeacherDashboardController:262 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:22:39 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 07:22:39 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 07:22:39 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 07:22:41 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 07:22:41 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 07:22:41 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 07:22:41 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 07:22:41 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 07:22:41 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 07:22:41 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 07:22:42 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 07:22:47 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 07:22:47 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 07:22:50 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 07:22:50 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:22:50 INFO  TeacherDashboardController:262 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:23:02 INFO  TeacherDashboardController:77 - Selected term changed to: 3
2025-09-27 07:23:02 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:23:02 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:23:47 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 07:23:47 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:23:47 INFO  TeacherDashboardController:262 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:23:49 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 07:23:49 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:23:49 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:23:53 INFO  EnrollmentController:448 - Loaded 0 enrollments for club Piano
2025-09-27 07:24:00 INFO  EnrollmentService:100 - Attempting to enroll learner b7b6453e-3d84-434b-b0dc-e42f04a1b6ff in club 31f651e3-f41b-4890-b0eb-a9eee7125dcd for term 2/2025
2025-09-27 07:24:00 INFO  EnrollmentService:215 - Successfully enrolled learner b7b6453e-3d84-434b-b0dc-e42f04a1b6ff in club 31f651e3-f41b-4890-b0eb-a9eee7125dcd for term 2/2025
2025-09-27 07:24:00 INFO  EnrollmentService:274 - Inserted 1 club_learners record for learner b7b6453e-3d84-434b-b0dc-e42f04a1b6ff
2025-09-27 07:24:04 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-27 07:24:04 INFO  TeacherDashboardController:125 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 07:24:04 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:24:04 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:24:04 INFO  TeacherDashboardController:125 - Enrollment change detected with data: null, refreshing dashboard
2025-09-27 07:24:04 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:24:04 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:24:05 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-27 07:24:05 INFO  EnrollmentController:448 - Loaded 1 enrollments for club Piano
2025-09-27 07:24:33 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 07:24:33 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 07:24:33 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 07:24:39 INFO  TeacherDashboardController:77 - Selected term changed to: 3
2025-09-27 07:24:39 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:24:39 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:29:47 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 07:29:47 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 07:30:10 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 07:30:17 INFO  Main:138 - Application UI launched successfully
2025-09-27 07:30:34 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 07:30:35 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@6bcd3d52
2025-09-27 07:30:35 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 07:30:36 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 07:30:36 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:30:36 INFO  Main:89 - Testing Excel integration...
2025-09-27 07:30:37 INFO  Main:93 - Found 17 learners in database
2025-09-27 07:30:37 INFO  Main:98 - Excel file exists: true
2025-09-27 07:30:37 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 07:30:37 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 07:30:37 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 07:30:37 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 07:30:37 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 07:30:37 INFO  log:170 - Logging initialized @33673ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 07:30:38 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 07:30:38 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 07:30:38 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 07:30:38 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 07:30:38 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 07:30:38 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 07:30:38 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 07:30:38 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 07:30:38 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 07:30:38 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 07:30:38 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 07:30:38 INFO  AbstractConnector:333 - Started ServerConnector@45217265{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 07:30:38 INFO  Server:415 - Started @34810ms
2025-09-27 07:30:38 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 07:30:38 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 07:30:39 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 07:30:39 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 07:30:39 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:30:39 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 07:30:39 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 07:30:39 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 07:30:39 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:30:39 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:30:39 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:30:39 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 07:30:39 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 07:30:39 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:30:40 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 07:31:05 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 07:31:05 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 07:31:05 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 07:31:25 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 07:31:25 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:31:25 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:44:01 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 07:44:01 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 07:44:28 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 07:44:30 INFO  Main:138 - Application UI launched successfully
2025-09-27 07:45:02 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 07:45:02 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4597088
2025-09-27 07:45:02 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 07:45:03 INFO  LoginController:163 - Invalid password attempt for username=pam
2025-09-27 07:45:23 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 07:45:23 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:45:23 INFO  Main:89 - Testing Excel integration...
2025-09-27 07:45:23 INFO  Main:93 - Found 17 learners in database
2025-09-27 07:45:23 INFO  Main:98 - Excel file exists: true
2025-09-27 07:45:23 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 07:45:23 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 07:45:23 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 07:45:23 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 07:45:23 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 07:45:23 INFO  log:170 - Logging initialized @64148ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 07:45:24 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 07:45:24 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 07:45:24 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 07:45:24 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 07:45:24 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 07:45:24 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 07:45:24 INFO  AbstractConnector:333 - Started ServerConnector@78783535{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 07:45:24 INFO  Server:415 - Started @64371ms
2025-09-27 07:45:24 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 07:45:24 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 07:45:24 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 07:45:24 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 07:45:24 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 07:45:24 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 07:45:24 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 07:45:24 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 07:45:24 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 07:45:24 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:45:24 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 07:45:24 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 07:45:24 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 07:45:24 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:45:24 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 07:45:24 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 07:45:24 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:45:24 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:45:24 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:45:24 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 07:48:13 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 07:48:13 INFO  Main:414 - Application shutdown initiated
2025-09-27 07:48:13 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 07:48:13 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 07:48:13 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 07:48:14 INFO  AbstractConnector:383 - Stopped ServerConnector@78783535{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 07:48:14 INFO  session:149 - node0 Stopped scavenging
2025-09-27 07:48:14 INFO  EmbeddedJettyServer:180 - done
2025-09-27 07:48:14 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 07:48:14 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 07:48:14 INFO  Main:405 - Excel School Server stopped
2025-09-27 07:48:14 INFO  SessionManager:119 - Session closed
2025-09-27 07:48:14 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 07:48:14 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 07:48:14 INFO  Main:429 - Application stopped successfully
2025-09-27 07:50:21 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 07:50:28 INFO  Main:138 - Application UI launched successfully
2025-09-27 07:50:57 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 07:51:00 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@2e2552dd
2025-09-27 07:51:00 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 07:51:01 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 07:51:02 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:51:02 INFO  Main:89 - Testing Excel integration...
2025-09-27 07:51:02 INFO  Main:93 - Found 17 learners in database
2025-09-27 07:51:02 INFO  Main:98 - Excel file exists: true
2025-09-27 07:51:02 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 07:51:02 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 07:51:02 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 07:51:02 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 07:51:02 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 07:51:03 INFO  log:170 - Logging initialized @53647ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 07:51:04 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 07:51:04 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 07:51:04 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 07:51:04 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 07:51:04 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 07:51:04 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 07:51:04 INFO  AbstractConnector:333 - Started ServerConnector@17406a92{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 07:51:04 INFO  Server:415 - Started @55025ms
2025-09-27 07:51:04 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 07:51:04 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 07:51:04 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 07:51:04 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 07:51:04 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 07:51:04 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 07:51:04 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 07:51:05 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 07:51:05 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 07:51:05 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:51:05 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 07:51:05 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 07:51:05 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 07:51:05 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:51:05 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 07:51:05 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 07:51:05 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 07:51:05 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 07:51:05 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 07:51:05 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 07:53:14 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 07:53:14 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 07:53:14 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 07:53:21 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 07:53:21 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 07:53:21 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 07:53:33 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 07:53:33 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 07:53:33 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 07:53:39 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-27 08:01:58 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 08:01:59 INFO  Main:414 - Application shutdown initiated
2025-09-27 08:01:59 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:01:59 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 08:01:59 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 08:02:00 INFO  AbstractConnector:383 - Stopped ServerConnector@17406a92{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:02:00 INFO  session:149 - node0 Stopped scavenging
2025-09-27 08:02:00 INFO  EmbeddedJettyServer:180 - done
2025-09-27 08:02:00 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 08:02:00 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 08:02:01 INFO  Main:405 - Excel School Server stopped
2025-09-27 08:02:01 INFO  SessionManager:119 - Session closed
2025-09-27 08:02:03 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 08:02:03 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 08:02:03 INFO  Main:429 - Application stopped successfully
2025-09-27 08:08:45 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 08:08:48 INFO  Main:138 - Application UI launched successfully
2025-09-27 08:09:03 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 08:09:08 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@443ef644
2025-09-27 08:09:08 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 08:09:09 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 08:09:09 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 08:09:09 INFO  Main:89 - Testing Excel integration...
2025-09-27 08:09:10 INFO  Main:93 - Found 17 learners in database
2025-09-27 08:09:10 INFO  Main:98 - Excel file exists: true
2025-09-27 08:09:10 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 08:09:10 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 08:09:10 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 08:09:10 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 08:09:10 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 08:09:10 INFO  log:170 - Logging initialized @44152ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 08:09:11 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 08:09:11 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 08:09:11 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 08:09:11 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 08:09:11 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 08:09:11 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 08:09:11 INFO  AbstractConnector:333 - Started ServerConnector@c6935b5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:09:11 INFO  Server:415 - Started @44866ms
2025-09-27 08:09:11 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 08:09:11 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 08:09:11 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 08:09:11 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 08:09:11 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 08:09:11 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 08:09:11 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 08:09:12 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:09:12 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 08:09:12 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 08:09:12 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 08:09:12 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 08:09:12 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:09:12 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 08:09:12 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 08:09:12 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:09:13 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 08:09:13 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 08:09:13 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 08:09:13 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 08:09:32 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 08:09:32 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:09:32 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 08:09:47 INFO  TeacherDashboardController:77 - Selected term changed to: 3
2025-09-27 08:09:47 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 08:09:47 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 08:09:56 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 08:09:56 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:09:56 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 08:10:08 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 08:10:08 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 08:10:08 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 08:10:59 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 08:10:59 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:10:59 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 08:13:03 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 08:13:03 INFO  Main:414 - Application shutdown initiated
2025-09-27 08:13:03 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:13:03 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 08:13:03 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 08:13:03 INFO  AbstractConnector:383 - Stopped ServerConnector@c6935b5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:13:03 INFO  session:149 - node0 Stopped scavenging
2025-09-27 08:13:03 INFO  EmbeddedJettyServer:180 - done
2025-09-27 08:13:03 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 08:13:03 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 08:13:03 INFO  Main:405 - Excel School Server stopped
2025-09-27 08:13:03 INFO  SessionManager:119 - Session closed
2025-09-27 08:13:03 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 08:13:03 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 08:13:03 INFO  Main:429 - Application stopped successfully
2025-09-27 08:17:44 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 08:17:47 INFO  Main:138 - Application UI launched successfully
2025-09-27 08:19:13 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 08:19:15 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@38c08cdd
2025-09-27 08:19:15 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 08:19:16 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 08:19:16 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 08:19:17 INFO  Main:89 - Testing Excel integration...
2025-09-27 08:19:17 INFO  Main:93 - Found 17 learners in database
2025-09-27 08:19:17 INFO  Main:98 - Excel file exists: true
2025-09-27 08:19:17 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 08:19:17 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 08:19:17 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 08:19:17 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 08:19:17 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 08:19:17 INFO  log:170 - Logging initialized @102706ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 08:19:18 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 08:19:18 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 08:19:18 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 08:19:19 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 08:19:19 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 08:19:19 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 08:19:19 INFO  AbstractConnector:333 - Started ServerConnector@698b1ea4{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:19:19 INFO  Server:415 - Started @103935ms
2025-09-27 08:19:19 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 08:19:19 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 08:19:19 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 08:19:19 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 08:19:19 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 08:19:19 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 08:19:19 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 08:19:19 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 08:19:19 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 08:19:19 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:19:19 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 08:19:19 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 08:19:20 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:19:20 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 08:19:20 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 08:19:20 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:19:20 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 08:19:20 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 08:19:20 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 08:19:20 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 08:28:51 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 08:28:51 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 08:31:25 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 08:31:28 INFO  Main:138 - Application UI launched successfully
2025-09-27 08:31:40 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 08:31:41 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@5c07e27b
2025-09-27 08:31:41 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 08:31:42 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 08:31:42 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 08:31:42 INFO  Main:89 - Testing Excel integration...
2025-09-27 08:31:42 INFO  Main:93 - Found 17 learners in database
2025-09-27 08:31:42 INFO  Main:98 - Excel file exists: true
2025-09-27 08:31:42 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 08:31:42 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 08:31:42 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 08:31:42 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 08:31:42 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 08:31:42 INFO  log:170 - Logging initialized @24212ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 08:31:43 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 08:31:43 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 08:31:43 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 08:31:43 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 08:31:43 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 08:31:43 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 08:31:43 INFO  AbstractConnector:333 - Started ServerConnector@73d44108{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:31:43 INFO  Server:415 - Started @25159ms
2025-09-27 08:31:43 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 08:31:44 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 08:31:44 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 08:31:44 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 08:31:44 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 08:31:44 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 08:31:44 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 08:31:44 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 08:31:44 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 08:31:44 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:31:44 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 08:31:44 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:31:44 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 08:31:44 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:31:44 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 08:31:44 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 08:31:44 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 08:31:44 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 08:31:44 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 08:31:45 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 08:31:48 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 08:31:48 INFO  ReportsController:78 - ReportsController initialized successfully
2025-09-27 08:31:48 INFO  ReportsController:83 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 08:31:48 INFO  ReportsController:89 - Club name set to: Piano
2025-09-27 08:31:48 INFO  ReportsController:107 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:31:48 ERROR ReportsController:232 - Error generating report: The column index is out of range: 12, number of columns: 11.
org.postgresql.util.PSQLException: The column index is out of range: 12, number of columns: 11.
	at org.postgresql.core.v3.SimpleParameterList.bind(SimpleParameterList.java:70) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.SimpleParameterList.setBinaryParameter(SimpleParameterList.java:144) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.bindBytes(PgPreparedStatement.java:1113) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.setInt(PgPreparedStatement.java:332) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.setInt(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.ReportsController.generateReport(ReportsController.java:181) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.ReportsController.setClubName(ReportsController.java:91) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewReports(TeacherDashboardController.java:414) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 08:34:52 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 08:34:52 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 08:36:13 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 08:36:19 INFO  Main:138 - Application UI launched successfully
2025-09-27 08:36:30 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 08:36:35 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@19da0617
2025-09-27 08:36:35 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 08:36:38 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 08:36:38 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 08:36:38 INFO  Main:89 - Testing Excel integration...
2025-09-27 08:36:38 INFO  Main:93 - Found 17 learners in database
2025-09-27 08:36:38 INFO  Main:98 - Excel file exists: true
2025-09-27 08:36:38 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 08:36:38 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 08:36:39 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 08:36:39 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 08:36:39 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 08:36:39 INFO  log:170 - Logging initialized @45023ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 08:36:39 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 08:36:39 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 08:36:39 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 08:36:39 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 08:36:39 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 08:36:39 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 08:36:40 INFO  AbstractConnector:333 - Started ServerConnector@3b3f2731{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:36:40 INFO  Server:415 - Started @46070ms
2025-09-27 08:36:40 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 08:36:43 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 08:36:43 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 08:36:43 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 08:36:43 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 08:36:43 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 08:36:44 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 08:36:45 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:36:45 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 08:36:45 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 08:36:45 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:36:45 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 08:36:46 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 08:36:46 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 08:36:46 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 08:36:46 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 08:36:46 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 08:36:46 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 08:36:46 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 08:36:46 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 08:36:56 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 08:36:56 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 08:36:56 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 08:36:56 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 08:37:09 INFO  ReportsController:102 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:37:10 ERROR ReportsController:213 - Error generating report: ERROR: column l.grade does not exist
  Position: 91
org.postgresql.util.PSQLException: ERROR: column l.grade does not exist
  Position: 91
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.ReportsController.generateReport(ReportsController.java:161) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewReports(TeacherDashboardController.java:422) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 08:38:56 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 08:38:56 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:38:56 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 08:38:57 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 08:38:57 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 08:38:57 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 08:38:57 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 08:39:00 INFO  ReportsController:102 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 08:39:00 ERROR ReportsController:213 - Error generating report: ERROR: column l.grade does not exist
  Position: 91
org.postgresql.util.PSQLException: ERROR: column l.grade does not exist
  Position: 91
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.ReportsController.generateReport(ReportsController.java:161) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewReports(TeacherDashboardController.java:422) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 08:39:10 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 08:39:10 INFO  Main:414 - Application shutdown initiated
2025-09-27 08:39:10 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 08:39:10 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 08:39:10 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 08:39:10 INFO  AbstractConnector:383 - Stopped ServerConnector@3b3f2731{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 08:39:10 INFO  session:149 - node0 Stopped scavenging
2025-09-27 08:39:10 INFO  EmbeddedJettyServer:180 - done
2025-09-27 08:39:10 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 08:39:10 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 08:39:10 INFO  Main:405 - Excel School Server stopped
2025-09-27 08:39:10 INFO  SessionManager:119 - Session closed
2025-09-27 08:39:10 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 08:39:10 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 08:39:10 INFO  Main:429 - Application stopped successfully
2025-09-27 08:59:13 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 08:59:21 INFO  Main:138 - Application UI launched successfully
2025-09-27 08:59:48 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 09:00:02 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@5c9b0589
2025-09-27 09:00:02 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 09:00:05 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 09:00:08 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 09:00:09 INFO  Main:89 - Testing Excel integration...
2025-09-27 09:00:12 INFO  Main:93 - Found 17 learners in database
2025-09-27 09:00:12 INFO  Main:98 - Excel file exists: true
2025-09-27 09:00:12 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 09:00:12 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 09:00:12 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 09:00:12 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 09:00:12 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 09:00:14 INFO  log:170 - Logging initialized @94453ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 09:00:15 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 09:00:15 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 09:00:15 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 09:00:16 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 09:00:16 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 09:00:16 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 09:00:16 INFO  AbstractConnector:333 - Started ServerConnector@3be309f3{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 09:00:16 INFO  Server:415 - Started @96008ms
2025-09-27 09:00:16 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 09:00:16 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 09:00:16 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 09:00:16 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 09:00:16 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 09:00:16 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 09:00:16 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 09:00:17 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 09:00:17 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 09:00:17 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 09:00:17 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 09:00:17 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 09:00:17 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 09:00:17 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 09:00:17 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 09:00:17 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 09:00:18 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 09:00:18 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 09:00:18 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 09:00:18 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 09:00:40 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 09:00:40 ERROR TeacherDashboardController:425 - Error loading reports view: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/reports-view.fxml

javafx.fxml.LoadException: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/reports-view.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2700) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewReports(TeacherDashboardController.java:410) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.NullPointerException: Cannot invoke "javafx.scene.control.TableColumn.setVisible(boolean)" because "this.gradeColumn" is null
	at com.cms.clubmanagementsystem.controller.ReportsController.initialize(ReportsController.java:68) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	... 61 more
2025-09-27 10:19:30 INFO  TeacherDashboardController:117 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 10:19:32 INFO  Main:414 - Application shutdown initiated
2025-09-27 10:19:46 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 10:19:47 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 10:19:47 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 10:19:53 INFO  AbstractConnector:383 - Stopped ServerConnector@3be309f3{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 10:19:53 INFO  session:149 - node0 Stopped scavenging
2025-09-27 10:19:53 INFO  EmbeddedJettyServer:180 - done
2025-09-27 10:19:53 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 10:19:53 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 10:19:54 INFO  Main:405 - Excel School Server stopped
2025-09-27 10:19:54 INFO  SessionManager:119 - Session closed
2025-09-27 10:19:56 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 10:19:56 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 10:19:56 INFO  Main:429 - Application stopped successfully
2025-09-27 10:29:28 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 10:29:32 INFO  Main:138 - Application UI launched successfully
2025-09-27 10:29:53 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 10:30:11 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@c241c29
2025-09-27 10:30:11 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 10:30:13 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 10:30:13 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 10:30:13 INFO  Main:89 - Testing Excel integration...
2025-09-27 10:30:14 INFO  Main:93 - Found 17 learners in database
2025-09-27 10:30:14 INFO  Main:98 - Excel file exists: true
2025-09-27 10:30:14 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 10:30:14 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 10:30:14 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 10:30:14 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 10:30:14 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 10:30:15 INFO  log:170 - Logging initialized @54342ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 10:30:17 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 10:30:17 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 10:30:17 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 10:30:19 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 10:30:19 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 10:30:19 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 10:30:20 INFO  AbstractConnector:333 - Started ServerConnector@615f7eb{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 10:30:20 INFO  Server:415 - Started @58597ms
2025-09-27 10:30:20 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 10:30:25 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 10:30:25 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 10:30:25 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 10:30:25 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 10:30:25 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 10:30:25 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 10:30:26 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 10:30:41 ERROR WebhookService:328 - Error registering webhook with school server
java.net.http.HttpTimeoutException: request timed out
	at jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:949) ~[java.net.http:?]
	at jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133) ~[java.net.http:?]
	at com.cms.clubmanagementsystem.service.WebhookService.registerWithSchoolServer(WebhookService.java:317) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.registerWebhookWithSchool(Main.java:262) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:206) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 10:30:48 ERROR Main:266 - Failed to register webhook with school server
2025-09-27 10:30:49 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 10:30:49 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 10:30:49 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 10:30:49 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 10:30:53 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 10:30:53 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 10:30:53 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 10:30:53 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 10:30:54 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 10:30:54 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 10:31:02 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 10:31:02 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 10:31:02 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:31:02 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 10:31:07 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:31:07 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:31:46 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:31:46 INFO  ReportsController:194 - Generated report for 1 learners
2025-09-27 10:31:51 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:31:51 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:31:56 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 10:31:56 INFO  ReportsController:194 - Generated report for 2 learners
2025-09-27 10:38:57 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 10:38:57 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:38:57 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 10:39:17 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 10:39:17 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:39:17 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 10:39:31 INFO  TeacherDashboardController:77 - Selected term changed to: 3
2025-09-27 10:39:31 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 10:39:31 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 10:39:42 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 10:39:42 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 10:39:42 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:39:42 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 10:39:44 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:39:44 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:40:28 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:40:28 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:40:30 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:40:30 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:40:39 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 10:40:39 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 10:40:39 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:40:39 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 10:40:43 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:40:43 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:40:45 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:40:45 INFO  ReportsController:194 - Generated report for 3 learners
2025-09-27 10:40:54 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 10:40:54 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:40:54 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 10:40:55 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 10:40:55 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 10:40:55 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:40:55 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 10:41:04 INFO  ReportsController:101 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:41:04 INFO  ReportsController:194 - Generated report for 1 learners
2025-09-27 10:41:29 INFO  TeacherDashboardController:77 - Selected term changed to: 3
2025-09-27 10:41:29 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 10:41:29 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 10:41:30 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 10:41:30 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 10:41:30 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:41:30 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 10:41:52 INFO  ReportsController:55 - Initializing ReportsController
2025-09-27 10:41:52 INFO  ReportsController:74 - ReportsController initialized successfully
2025-09-27 10:41:52 INFO  ReportsController:79 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:41:52 INFO  ReportsController:84 - Club name set to: Piano
2025-09-27 10:50:05 INFO  ReportsController:267 - Closing reports window
2025-09-27 10:55:16 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 10:55:16 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 10:56:33 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 10:56:35 INFO  Main:138 - Application UI launched successfully
2025-09-27 10:56:55 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 10:56:57 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@2f4ab161
2025-09-27 10:56:57 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 10:56:58 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 10:56:58 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 10:56:58 INFO  Main:89 - Testing Excel integration...
2025-09-27 10:56:58 INFO  Main:93 - Found 17 learners in database
2025-09-27 10:56:58 INFO  Main:98 - Excel file exists: true
2025-09-27 10:56:58 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 10:56:58 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 10:56:58 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 10:56:58 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 10:56:58 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 10:56:58 INFO  log:170 - Logging initialized @32946ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 10:56:59 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 10:56:59 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 10:56:59 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 10:56:59 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 10:56:59 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 10:56:59 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 10:56:59 INFO  AbstractConnector:333 - Started ServerConnector@50835c5e{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 10:56:59 INFO  Server:415 - Started @33839ms
2025-09-27 10:56:59 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 10:57:00 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 10:57:00 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 10:57:00 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 10:57:00 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 10:57:00 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 10:57:00 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 10:57:00 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 10:57:00 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 10:57:00 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 10:57:00 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 10:57:00 INFO  TeacherDashboardController:49 - Initializing TeacherDashboardController
2025-09-27 10:57:00 INFO  TeacherDashboardController:181 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 10:57:00 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 10:57:00 INFO  TeacherDashboardController:202 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 10:57:00 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 10:57:00 INFO  TeacherDashboardController:262 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 10:57:00 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 10:57:00 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 10:57:01 INFO  TeacherDashboardController:98 - TeacherDashboardController subscribed to enrollment events
2025-09-27 10:57:05 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 10:57:05 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 10:57:05 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:57:05 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 10:57:05 INFO  ReportsController:77 - Year set to: 2025, Term set to: 3
2025-09-27 10:57:05 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 10:57:06 INFO  ReportsController:175 - Generated report for 2 learners
2025-09-27 10:57:19 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 10:57:19 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:57:19 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 10:57:20 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 10:57:20 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 10:57:20 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:57:20 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 10:57:20 INFO  ReportsController:77 - Year set to: 2025, Term set to: 2
2025-09-27 10:57:20 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:57:20 INFO  ReportsController:175 - Generated report for 1 learners
2025-09-27 10:57:35 INFO  TeacherDashboardController:77 - Selected term changed to: 1
2025-09-27 10:57:35 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:57:35 INFO  TeacherDashboardController:262 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 10:57:37 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 10:57:37 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 10:57:37 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 10:57:37 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 10:57:37 INFO  ReportsController:77 - Year set to: 2025, Term set to: 1
2025-09-27 10:57:37 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 10:57:37 INFO  ReportsController:175 - Generated report for 3 learners
2025-09-27 10:59:09 INFO  TeacherDashboardController:77 - Selected term changed to: 2
2025-09-27 10:59:09 INFO  TeacherDashboardController:226 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 10:59:09 INFO  TeacherDashboardController:262 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 11:22:52 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 11:22:55 INFO  Main:138 - Application UI launched successfully
2025-09-27 11:23:11 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 11:23:15 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@6ef2483e
2025-09-27 11:23:15 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 11:23:16 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 11:23:16 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 11:23:16 INFO  Main:89 - Testing Excel integration...
2025-09-27 11:23:17 INFO  Main:93 - Found 17 learners in database
2025-09-27 11:23:17 INFO  Main:98 - Excel file exists: true
2025-09-27 11:23:17 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 11:23:17 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 11:23:17 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 11:23:17 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 11:23:17 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 11:23:17 INFO  log:170 - Logging initialized @36673ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 11:23:18 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 11:23:18 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 11:23:18 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 11:23:19 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 11:23:19 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 11:23:19 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 11:23:19 INFO  AbstractConnector:333 - Started ServerConnector@a0705b5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 11:23:19 INFO  Server:415 - Started @38265ms
2025-09-27 11:23:19 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 11:23:21 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 11:23:21 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 11:23:21 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 11:23:21 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 11:23:21 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 11:23:21 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 11:23:21 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 11:23:21 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 11:23:21 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 11:23:21 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 11:23:22 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 11:23:22 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 11:23:22 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 11:23:22 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 11:23:22 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 11:23:22 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 11:23:22 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 11:23:22 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 11:23:22 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 11:23:48 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:23:48 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:23:48 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:23:48 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:23:48 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:23:48 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 11:23:48 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:23:48 INFO  AttendanceController:349 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 11:23:55 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 11:23:55 INFO  TeacherDashboardController:131 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 11:23:55 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 11:23:55 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 11:23:59 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 11:23:59 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 11:24:27 INFO  TeacherDashboardController:81 - Selected term changed to: 1
2025-09-27 11:24:27 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:24:27 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:24:50 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:24:50 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:24:50 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:24:50 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:24:50 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:24:50 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:24:50 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:24:50 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:25:06 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:25:06 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:25:13 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:25:13 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:25:13 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:25:13 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:25:13 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:25:13 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:25:15 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:25:15 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:25:24 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:25:24 INFO  TeacherDashboardController:131 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 11:25:24 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:25:24 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:25:27 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:25:27 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:25:35 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:25:35 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:25:35 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:25:35 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:25:35 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:25:35 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:25:35 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:25:35 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:25:45 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:25:45 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:25:55 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:25:55 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:25:55 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:25:55 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:25:55 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:25:55 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:25:55 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:25:55 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:26:00 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:26:00 INFO  TeacherDashboardController:131 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 11:26:00 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:26:00 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:26:02 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:26:02 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:28:22 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:28:22 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:33:22 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:33:22 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:35:43 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:35:43 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:35:43 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:35:43 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:35:43 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:35:43 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:35:43 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:35:43 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:35:49 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:35:49 INFO  TeacherDashboardController:131 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 11:35:49 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:35:49 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:35:51 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:35:51 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:38:05 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 11:38:06 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 11:39:20 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 11:39:34 INFO  Main:138 - Application UI launched successfully
2025-09-27 11:39:45 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 11:39:47 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7bd794b0
2025-09-27 11:39:47 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 11:39:48 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 11:39:48 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 11:39:48 INFO  Main:89 - Testing Excel integration...
2025-09-27 11:39:48 INFO  Main:93 - Found 17 learners in database
2025-09-27 11:39:48 INFO  Main:98 - Excel file exists: true
2025-09-27 11:39:48 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 11:39:48 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 11:39:48 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 11:39:48 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 11:39:48 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 11:39:48 INFO  log:170 - Logging initialized @36824ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 11:39:48 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 11:39:48 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 11:39:48 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 11:39:48 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 11:39:48 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 11:39:48 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 11:39:49 INFO  AbstractConnector:333 - Started ServerConnector@12f24c49{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 11:39:49 INFO  Server:415 - Started @37350ms
2025-09-27 11:39:49 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 11:39:49 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 11:39:49 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 11:39:49 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 11:39:49 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 11:39:49 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 11:39:49 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 11:39:50 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 11:39:50 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 11:39:50 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 11:39:50 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 11:39:50 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 11:39:50 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 11:39:50 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 11:39:50 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 11:39:50 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 11:39:50 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 11:39:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 11:39:50 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 11:39:50 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 11:40:29 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:40:29 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:40:29 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:40:29 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:40:29 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:40:29 INFO  AttendanceController:240 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 11:40:29 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:40:30 INFO  AttendanceController:349 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 11:40:44 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 11:40:44 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 11:41:00 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 11:41:00 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 11:41:00 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 11:41:03 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-27 11:41:05 INFO  EnrollmentController:448 - Loaded 2 enrollments for club Piano
2025-09-27 11:41:19 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-27 11:41:23 INFO  TeacherDashboardController:81 - Selected term changed to: 1
2025-09-27 11:41:23 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:41:23 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:43:41 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:43:41 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:43:41 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:43:41 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:43:41 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:43:41 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:43:41 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:43:41 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:43:48 INFO  AttendanceController:527 - Saved attendance for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:43:48 INFO  TeacherDashboardController:131 - Enrollment change detected with data: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, refreshing dashboard
2025-09-27 11:43:48 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:43:48 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:43:51 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:43:51 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:44:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:44:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:48:06 INFO  TeacherDashboardController:81 - Selected term changed to: 2
2025-09-27 11:48:06 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 11:48:06 INFO  TeacherDashboardController:268 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 11:48:09 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:48:09 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:48:09 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:48:09 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:48:09 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:48:09 INFO  AttendanceController:240 - Set year: 2025, term: 2 for AttendanceController
2025-09-27 11:48:09 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:48:09 INFO  AttendanceController:349 - Loaded 1 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 2
2025-09-27 11:48:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 11:48:13 INFO  TeacherDashboardController:268 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 11:48:17 INFO  TeacherDashboardController:81 - Selected term changed to: 3
2025-09-27 11:48:17 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 11:48:17 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 11:48:28 INFO  TeacherDashboardController:81 - Selected term changed to: 1
2025-09-27 11:48:28 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:48:28 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:48:52 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 11:48:52 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 11:48:52 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:48:52 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 11:48:52 INFO  ReportsController:77 - Year set to: 2025, Term set to: 1
2025-09-27 11:48:52 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:48:53 INFO  ReportsController:175 - Generated report for 3 learners
2025-09-27 11:49:03 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 11:49:03 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:49:03 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 11:49:03 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 11:49:03 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 11:49:03 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 11:49:03 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:49:03 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 11:49:44 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:49:44 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:49:49 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 11:49:49 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 11:49:49 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:49:49 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 11:49:49 INFO  ReportsController:77 - Year set to: 2025, Term set to: 1
2025-09-27 11:49:49 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:49:49 INFO  ReportsController:175 - Generated report for 3 learners
2025-09-27 11:49:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:49:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:51:24 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 11:51:24 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 11:51:24 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 11:51:24 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 11:51:24 INFO  ReportsController:77 - Year set to: 2025, Term set to: 1
2025-09-27 11:51:24 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:51:24 INFO  ReportsController:175 - Generated report for 3 learners
2025-09-27 11:54:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:54:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 11:59:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 11:59:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:04:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:04:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:09:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:09:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:14:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:14:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:19:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:19:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:24:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:24:51 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:25:15 INFO  AttendanceController:64 - Initializing AttendanceController
2025-09-27 12:25:16 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 12:25:16 INFO  AttendanceController:297 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 12:25:16 INFO  AttendanceController:178 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 12:25:17 INFO  AttendanceController:349 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 12:25:17 INFO  AttendanceController:240 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 12:25:17 INFO  AttendanceController:260 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 12:25:17 INFO  AttendanceController:349 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 12:26:12 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:26:12 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:29:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:29:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:34:52 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:34:52 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:39:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:39:51 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:44:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:44:50 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:49:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:49:51 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:54:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 12:54:51 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 12:56:33 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 12:56:38 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 12:58:56 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 12:59:05 INFO  Main:138 - Application UI launched successfully
2025-09-27 12:59:40 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 12:59:51 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@443ef644
2025-09-27 12:59:51 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 12:59:53 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 12:59:53 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 12:59:54 INFO  Main:89 - Testing Excel integration...
2025-09-27 12:59:55 INFO  Main:93 - Found 17 learners in database
2025-09-27 12:59:55 INFO  Main:98 - Excel file exists: true
2025-09-27 12:59:55 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 12:59:55 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 12:59:55 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 12:59:55 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 12:59:55 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 12:59:56 INFO  log:170 - Logging initialized @78623ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 12:59:57 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 12:59:57 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 12:59:57 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 12:59:57 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 12:59:57 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 12:59:57 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 12:59:58 INFO  AbstractConnector:333 - Started ServerConnector@14f264c7{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 12:59:58 INFO  Server:415 - Started @80889ms
2025-09-27 12:59:58 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 12:59:59 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 12:59:59 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 12:59:59 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 12:59:59 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 12:59:59 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 12:59:59 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 13:00:01 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 13:00:01 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 13:00:01 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 13:00:01 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:00:01 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 13:00:02 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 13:00:02 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 13:00:02 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 13:00:02 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:00:03 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 13:00:03 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:00:03 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:00:04 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 13:00:29 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 13:00:29 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 13:00:29 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:00:29 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 13:00:29 INFO  ReportsController:77 - Year set to: 2025, Term set to: 3
2025-09-27 13:00:29 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:00:30 ERROR ReportsController:228 - Error generating report: ERROR: operator does not exist: text = meeting_day
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 589
org.postgresql.util.PSQLException: ERROR: operator does not exist: text = meeting_day
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 589
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.ReportsController.generateReport(ReportsController.java:176) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.ReportsController.setYearAndTerm(ReportsController.java:79) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleViewReports(TeacherDashboardController.java:516) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 13:04:38 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 13:04:40 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 13:05:44 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 13:05:49 INFO  Main:138 - Application UI launched successfully
2025-09-27 13:05:58 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 13:06:28 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@2f4ab161
2025-09-27 13:06:28 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 13:06:32 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 13:06:32 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 13:06:33 INFO  Main:89 - Testing Excel integration...
2025-09-27 13:06:33 INFO  Main:93 - Found 17 learners in database
2025-09-27 13:06:33 INFO  Main:98 - Excel file exists: true
2025-09-27 13:06:33 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 13:06:33 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 13:06:34 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 13:06:34 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 13:06:34 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 13:06:34 INFO  log:170 - Logging initialized @64545ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 13:06:41 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 13:06:41 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 13:06:41 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 13:06:42 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 13:06:42 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 13:06:42 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 13:06:43 INFO  AbstractConnector:333 - Started ServerConnector@50835c5e{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 13:06:43 INFO  Server:415 - Started @73567ms
2025-09-27 13:06:43 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 13:06:44 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 13:06:44 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:06:44 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 13:06:44 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 13:06:44 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 13:06:44 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 13:06:46 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 13:06:49 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 13:06:49 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 13:06:51 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 13:06:51 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 13:06:51 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:06:51 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 13:06:52 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 13:06:52 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:06:53 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 13:06:53 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:06:54 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:06:54 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 13:07:12 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 13:07:12 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 13:07:12 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:07:12 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 13:07:12 INFO  ReportsController:77 - Year set to: 2025, Term set to: 3
2025-09-27 13:07:12 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:07:13 INFO  ReportsController:199 - Generated report for 2 learners
2025-09-27 13:07:38 INFO  TeacherDashboardController:81 - Selected term changed to: 1
2025-09-27 13:07:38 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 13:07:38 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 13:07:42 INFO  TeacherDashboardController:81 - Selected term changed to: 3
2025-09-27 13:07:42 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:07:42 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:07:45 INFO  TeacherDashboardController:81 - Selected term changed to: 2
2025-09-27 13:07:45 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 2
2025-09-27 13:07:45 INFO  TeacherDashboardController:268 - Found 1 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 2
2025-09-27 13:07:48 INFO  TeacherDashboardController:81 - Selected term changed to: 1
2025-09-27 13:07:48 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 13:07:48 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 13:07:50 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 13:07:50 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 13:07:50 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:07:50 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 13:07:50 INFO  ReportsController:77 - Year set to: 2025, Term set to: 1
2025-09-27 13:07:50 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 13:07:50 INFO  ReportsController:199 - Generated report for 3 learners
2025-09-27 13:07:57 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 13:07:57 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 13:07:57 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:07:57 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 13:07:57 INFO  ReportsController:77 - Year set to: 2025, Term set to: 1
2025-09-27 13:07:57 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 13:07:57 INFO  ReportsController:199 - Generated report for 3 learners
2025-09-27 13:08:22 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-27 13:08:22 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:08:22 INFO  AttendanceController:300 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 13:08:22 INFO  AttendanceController:181 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 13:08:22 INFO  AttendanceController:352 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 13:08:22 INFO  AttendanceController:243 - Set year: 2025, term: 1 for AttendanceController
2025-09-27 13:08:22 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:08:22 INFO  AttendanceController:352 - Loaded 3 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 1
2025-09-27 13:08:25 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 1
2025-09-27 13:08:25 INFO  TeacherDashboardController:268 - Found 3 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 1
2025-09-27 13:08:29 INFO  EnrollmentController:192 - User is teacher: true
2025-09-27 13:08:29 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 13:08:29 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 13:08:31 INFO  EnrollmentController:448 - Loaded 3 enrollments for club Piano
2025-09-27 13:09:09 INFO  SessionManager:119 - Session closed
2025-09-27 13:09:09 INFO  TeacherDashboardController:534 - Teacher logout
2025-09-27 13:09:24 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-09-27 13:09:24 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-09-27 13:09:24 INFO  Main:89 - Testing Excel integration...
2025-09-27 13:09:24 INFO  Main:93 - Found 17 learners in database
2025-09-27 13:09:24 INFO  Main:98 - Excel file exists: true
2025-09-27 13:09:24 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 13:09:24 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 13:09:24 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 13:09:24 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 13:09:24 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 13:09:24 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 13:09:24 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:09:24 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 13:09:24 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 13:09:24 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 13:09:24 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-09-27 13:09:24 ERROR WebhookService:77 - Failed to start webhook service on port 8080
java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 13:09:24 ERROR Main:208 - Webhook service failed to start
java.lang.RuntimeException: Could not start webhook listener
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:78) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	... 6 more
2025-09-27 13:09:24 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:09:24 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:09:24 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-09-27 13:09:24 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:09:29 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-09-27 13:09:29 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-09-27 13:09:29 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-09-27 13:09:29 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-09-27 13:09:29 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-09-27 13:09:29 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-09-27 13:09:29 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-09-27 13:09:29 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-09-27 13:09:29 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-09-27 13:09:29 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:09:29 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:202) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 13:09:29 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-09-27 13:09:29 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-09-27 13:09:29 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-09-27 13:09:29 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-09-27 13:09:29 INFO  LearnerService:680 - Found 12 grades for school
2025-09-27 13:09:30 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-09-27 13:09:30 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-09-27 13:09:30 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-09-27 13:09:30 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-09-27 13:09:30 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 13:09:30 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:09:30 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-09-27 13:09:30 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-09-27 13:09:30 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-09-27 13:09:30 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-09-27 13:09:30 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:10:44 INFO  TeacherDashboardController:123 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 13:10:44 INFO  Main:414 - Application shutdown initiated
2025-09-27 13:10:44 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 13:10:44 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 13:10:44 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 13:10:44 INFO  AbstractConnector:383 - Stopped ServerConnector@50835c5e{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 13:10:44 INFO  session:149 - node0 Stopped scavenging
2025-09-27 13:10:44 INFO  EmbeddedJettyServer:180 - done
2025-09-27 13:10:44 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 13:10:44 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 13:10:44 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-09-27 13:10:44 INFO  Main:405 - Excel School Server stopped
2025-09-27 13:10:44 INFO  SessionManager:119 - Session closed
2025-09-27 13:10:44 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 13:10:44 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 13:10:44 INFO  Main:429 - Application stopped successfully
2025-09-27 13:11:01 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 13:11:03 INFO  Main:138 - Application UI launched successfully
2025-09-27 13:11:18 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 13:11:19 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@51582b5b
2025-09-27 13:11:19 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 13:11:19 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 13:11:19 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 13:11:19 INFO  Main:89 - Testing Excel integration...
2025-09-27 13:11:19 INFO  Main:93 - Found 17 learners in database
2025-09-27 13:11:19 INFO  Main:98 - Excel file exists: true
2025-09-27 13:11:19 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 13:11:19 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 13:11:19 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 13:11:19 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 13:11:19 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 13:11:19 INFO  log:170 - Logging initialized @25702ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 13:11:19 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 13:11:19 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 13:11:19 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 13:11:20 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 13:11:20 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 13:11:20 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-27 13:11:20 INFO  AbstractConnector:333 - Started ServerConnector@4325050{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 13:11:20 INFO  Server:415 - Started @26010ms
2025-09-27 13:11:20 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 13:11:20 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 13:11:20 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:11:20 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 13:11:20 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 13:11:20 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 13:11:20 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 13:11:20 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 13:11:20 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 13:11:20 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:11:20 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 13:11:20 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 13:11:20 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 13:11:20 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:11:20 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 13:11:20 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 13:11:20 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 13:11:20 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:11:20 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:11:20 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 13:11:25 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-27 13:11:25 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:11:25 INFO  AttendanceController:300 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 13:11:25 INFO  AttendanceController:181 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 13:11:25 INFO  AttendanceController:352 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 13:11:25 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 13:11:25 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:11:25 INFO  AttendanceController:352 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 13:11:35 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:11:35 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:11:37 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 13:11:37 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 13:11:37 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:11:37 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 13:11:37 INFO  ReportsController:77 - Year set to: 2025, Term set to: 3
2025-09-27 13:11:37 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:11:37 INFO  ReportsController:199 - Generated report for 2 learners
2025-09-27 13:16:20 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:16:20 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:18:00 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 13:18:01 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 13:19:20 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 13:19:24 INFO  Main:138 - Application UI launched successfully
2025-09-27 13:22:00 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 13:22:03 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@fba1042
2025-09-27 13:22:03 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 13:22:04 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 13:22:05 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 13:22:05 INFO  Main:89 - Testing Excel integration...
2025-09-27 13:22:05 INFO  Main:93 - Found 17 learners in database
2025-09-27 13:22:05 INFO  Main:98 - Excel file exists: true
2025-09-27 13:22:05 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 13:22:05 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 13:22:05 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 13:22:05 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 13:22:05 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 13:22:05 INFO  log:170 - Logging initialized @179000ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 13:22:05 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 13:22:05 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 13:22:05 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 13:22:05 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 13:22:05 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 13:22:05 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 13:22:06 INFO  AbstractConnector:333 - Started ServerConnector@1511524d{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 13:22:06 INFO  Server:415 - Started @179478ms
2025-09-27 13:22:06 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 13:22:06 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 13:22:06 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:22:06 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 13:22:06 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 13:22:06 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 13:22:06 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 13:22:07 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 13:22:07 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 13:22:07 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 13:22:07 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 13:22:07 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 13:22:07 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:22:07 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 13:22:07 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 13:22:07 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:22:07 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 13:22:07 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:22:08 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:22:08 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 13:22:21 INFO  ReportsController:48 - Initializing ReportsController
2025-09-27 13:22:21 INFO  ReportsController:60 - ReportsController initialized successfully
2025-09-27 13:22:21 INFO  ReportsController:65 - Club ID set to: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:22:21 INFO  ReportsController:70 - Club name set to: Piano
2025-09-27 13:22:21 INFO  ReportsController:77 - Year set to: 2025, Term set to: 3
2025-09-27 13:22:21 INFO  ReportsController:90 - Generating attendance report for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:22:21 INFO  ReportsController:109 - Checking schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd:
2025-09-27 13:22:21 INFO  ReportsController:114 - Schedule: Day=TUE, Grade=6804fc9b-5cb1-45bb-9e10-abe8c6fd195b, Time=1970-01-01T10:00:00.000+0300-1970-01-01T12:00:00.000+0300
2025-09-27 13:22:21 INFO  ReportsController:132 - Checking sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd year 2025:
2025-09-27 13:22:22 INFO  ReportsController:138 - Session: Date=2025-09-26T00:00:00.000+0300, Day=FRI, Count=1
2025-09-27 13:22:22 INFO  ReportsController:138 - Session: Date=2025-09-27T00:00:00.000+0300, Day=SAT, Count=1
2025-09-27 13:22:22 INFO  ReportsController:159 - Active enrollments: 2
2025-09-27 13:22:22 INFO  ReportsController:231 - Learner: Job Guyo, Sessions: 1/2, Rate: 50.0%
2025-09-27 13:22:22 INFO  ReportsController:231 - Learner: Ken Wamaria, Sessions: 1/2, Rate: 50.0%
2025-09-27 13:22:22 INFO  ReportsController:235 - Generated report for 2 learners
2025-09-27 13:27:08 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:27:08 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:32:08 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:32:08 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:37:08 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:37:08 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:38:34 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 13:38:40 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 13:41:25 INFO  Main:112 - Environment variables loaded successfully
2025-09-27 13:41:35 INFO  Main:138 - Application UI launched successfully
2025-09-27 13:42:03 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-27 13:42:08 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1c65458e
2025-09-27 13:42:08 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-27 13:42:09 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-27 13:42:09 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-27 13:42:09 INFO  Main:89 - Testing Excel integration...
2025-09-27 13:42:09 INFO  Main:93 - Found 17 learners in database
2025-09-27 13:42:09 INFO  Main:98 - Excel file exists: true
2025-09-27 13:42:09 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-27 13:42:09 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-27 13:42:10 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-27 13:42:10 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-27 13:42:10 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-27 13:42:10 INFO  log:170 - Logging initialized @72856ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-27 13:42:11 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-27 13:42:11 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-27 13:42:11 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-27 13:42:11 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-27 13:42:11 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-27 13:42:11 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-27 13:42:11 INFO  AbstractConnector:333 - Started ServerConnector@b4f9e51{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 13:42:11 INFO  Server:415 - Started @73877ms
2025-09-27 13:42:11 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-27 13:42:11 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-27 13:42:11 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-27 13:42:11 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-27 13:42:11 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-27 13:42:11 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-27 13:42:12 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-27 13:42:12 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 13:42:12 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-27 13:42:12 INFO  Main:264 - Webhook registered successfully with school server
2025-09-27 13:42:12 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-27 13:42:12 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-27 13:42:12 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:42:12 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-27 13:42:13 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-27 13:42:13 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-27 13:42:13 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-27 13:42:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:42:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:42:13 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-27 13:42:31 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-27 13:42:31 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:42:31 INFO  AttendanceController:300 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-27
2025-09-27 13:42:31 INFO  AttendanceController:181 - Selected session: 7fea17e0-d066-40bc-b209-a333dd560f9b
2025-09-27 13:42:31 INFO  AttendanceController:352 - Loaded 0 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 0, term 0
2025-09-27 13:42:31 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-27 13:42:31 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-27 13:42:31 INFO  AttendanceController:352 - Loaded 2 attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b, year 2025, term 3
2025-09-27 13:42:36 ERROR AttendanceController:664 - Error validating session against schedules: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
org.postgresql.util.PSQLException: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.validateSessionAgainstSchedules(AttendanceController.java:655) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:421) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:461) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 13:43:37 ERROR AttendanceController:664 - Error validating session against schedules: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
org.postgresql.util.PSQLException: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.validateSessionAgainstSchedules(AttendanceController.java:655) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:421) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:461) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-27 13:43:50 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:43:50 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:47:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:47:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:52:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:52:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 13:57:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 13:57:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:02:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:02:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:07:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:07:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:12:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:12:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:17:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:17:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:22:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:22:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:27:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:27:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:32:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:32:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:37:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:37:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:42:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:42:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:47:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:47:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:52:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:52:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 14:57:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 14:57:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:02:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:02:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:07:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:07:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:12:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:12:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:17:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:17:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:22:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:22:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:27:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:27:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:32:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:32:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:37:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:37:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:42:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:42:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:47:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:47:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:52:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:52:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 15:57:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 15:57:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:02:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:02:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:07:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:07:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:12:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:12:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:17:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:17:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:22:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:22:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:27:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:27:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:32:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:32:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:37:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:37:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:42:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:42:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:47:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:47:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:52:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:52:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 16:57:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 16:57:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:02:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:02:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:07:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:07:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:12:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:12:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:17:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:17:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:22:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:22:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:27:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:27:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:32:13 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-27 17:32:13 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-27 17:33:59 INFO  TeacherDashboardController:123 - Cleaning up event listeners for TeacherDashboardController
2025-09-27 17:34:00 INFO  Main:414 - Application shutdown initiated
2025-09-27 17:34:03 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-27 17:34:03 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-27 17:34:03 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-27 17:34:07 INFO  AbstractConnector:383 - Stopped ServerConnector@b4f9e51{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-27 17:34:07 INFO  session:149 - node0 Stopped scavenging
2025-09-27 17:34:08 INFO  EmbeddedJettyServer:180 - done
2025-09-27 17:34:08 INFO  WebhookService:389 - Webhook service stopped
2025-09-27 17:34:08 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-27 17:34:08 INFO  Main:405 - Excel School Server stopped
2025-09-27 17:34:08 INFO  SessionManager:119 - Session closed
2025-09-27 17:34:08 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-27 17:34:08 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-27 17:34:08 INFO  Main:429 - Application stopped successfully
2025-09-29 04:35:55 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 04:36:43 INFO  Main:138 - Application UI launched successfully
2025-09-29 04:37:15 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 04:37:34 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7c18130a
2025-09-29 04:37:34 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 04:37:38 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 04:37:39 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 04:37:39 INFO  Main:89 - Testing Excel integration...
2025-09-29 04:37:41 INFO  Main:93 - Found 17 learners in database
2025-09-29 04:37:41 INFO  Main:98 - Excel file exists: true
2025-09-29 04:37:41 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 04:37:41 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 04:37:41 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 04:37:41 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 04:37:41 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 04:37:42 INFO  log:170 - Logging initialized @139727ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 04:37:43 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 04:37:43 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 04:37:44 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 04:37:44 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 04:37:44 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 04:37:44 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 04:37:46 INFO  AbstractConnector:333 - Started ServerConnector@16538f3f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 04:37:46 INFO  Server:415 - Started @143612ms
2025-09-29 04:37:46 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 04:37:48 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 04:37:48 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 04:37:48 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 04:37:48 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 04:37:48 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 04:37:48 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 04:37:49 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 04:37:50 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 04:37:50 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 04:37:50 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 04:37:50 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 04:37:50 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 04:37:50 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 04:37:51 INFO  TeacherDashboardController:53 - Initializing TeacherDashboardController
2025-09-29 04:37:52 INFO  TeacherDashboardController:187 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 04:37:53 INFO  TeacherDashboardController:208 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 04:37:53 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 04:37:53 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 04:37:54 INFO  TeacherDashboardController:104 - TeacherDashboardController subscribed to enrollment events
2025-09-29 04:38:30 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 04:38:31 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 04:38:31 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 04:38:31 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 04:38:31 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 04:38:48 ERROR AttendanceController:664 - Error validating session against schedules: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
org.postgresql.util.PSQLException: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.validateSessionAgainstSchedules(AttendanceController.java:655) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:421) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.handleTakeAttendance(TeacherDashboardController.java:461) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 04:42:43 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 04:42:43 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 04:42:54 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 04:42:54 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 04:43:05 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 04:43:05 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 04:43:05 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 04:43:05 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 04:43:05 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 04:44:16 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 04:44:16 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 04:47:54 INFO  TeacherDashboardController:232 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 04:47:54 INFO  TeacherDashboardController:268 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 04:51:46 INFO  TeacherDashboardController:123 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 04:51:46 INFO  Main:414 - Application shutdown initiated
2025-09-29 04:51:51 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 04:51:51 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 04:51:51 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 04:51:52 INFO  AbstractConnector:383 - Stopped ServerConnector@16538f3f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 04:51:52 INFO  session:149 - node0 Stopped scavenging
2025-09-29 04:51:53 INFO  EmbeddedJettyServer:180 - done
2025-09-29 04:51:53 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 04:51:53 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 04:51:53 INFO  Main:405 - Excel School Server stopped
2025-09-29 04:51:53 INFO  SessionManager:119 - Session closed
2025-09-29 04:51:53 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 04:51:54 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 04:51:54 INFO  Main:429 - Application stopped successfully
2025-09-29 05:12:00 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 05:12:07 INFO  Main:138 - Application UI launched successfully
2025-09-29 05:13:04 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 05:13:10 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@344b8418
2025-09-29 05:13:10 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 05:13:13 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 05:13:13 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 05:13:13 INFO  Main:89 - Testing Excel integration...
2025-09-29 05:13:13 INFO  Main:93 - Found 17 learners in database
2025-09-29 05:13:13 INFO  Main:98 - Excel file exists: true
2025-09-29 05:13:13 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 05:13:13 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 05:13:13 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 05:13:13 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 05:13:13 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 05:13:14 INFO  log:170 - Logging initialized @101068ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 05:13:14 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 05:13:14 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 05:13:14 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 05:13:14 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 05:13:14 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 05:13:14 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 05:13:15 INFO  AbstractConnector:333 - Started ServerConnector@688b6614{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:13:15 INFO  Server:415 - Started @101804ms
2025-09-29 05:13:15 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 05:13:16 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 05:13:16 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 05:13:16 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 05:13:16 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 05:13:16 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 05:13:16 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 05:13:17 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:13:18 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 05:13:18 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 05:13:18 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 05:13:18 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 05:13:18 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:13:18 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 05:13:18 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 05:13:18 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:13:18 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 05:13:18 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:13:19 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:13:19 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 05:13:31 ERROR AttendanceTabController:179 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadSessionsSummary(AttendanceTabController.java:217) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadAttendanceData(AttendanceTabController.java:173) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.setClubId(AttendanceTabController.java:147) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.loadAttendanceTabContent(TeacherDashboardController.java:120) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.lambda$initializeAttendanceTab$2(TeacherDashboardController.java:108) ~[classes/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:372) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:78) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(ReadOnlyBooleanWrapper.java:103) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:111) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.Tab.setSelected(Tab.java:189) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:657) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:670) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:589) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:82) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1529) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1507) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 05:13:47 ERROR AttendanceTabController:179 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadSessionsSummary(AttendanceTabController.java:217) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadAttendanceData(AttendanceTabController.java:173) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.setYearAndTerm(AttendanceTabController.java:160) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.loadAttendanceTabContent(TeacherDashboardController.java:122) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.lambda$initializeAttendanceTab$2(TeacherDashboardController.java:108) ~[classes/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:372) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:78) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(ReadOnlyBooleanWrapper.java:103) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:111) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.Tab.setSelected(Tab.java:189) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:657) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:670) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:589) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:82) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1529) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1507) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 05:14:09 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 05:14:09 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:14:09 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 05:14:09 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 05:14:09 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:14:13 ERROR AttendanceTabController:179 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadSessionsSummary(AttendanceTabController.java:217) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadAttendanceData(AttendanceTabController.java:173) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.handleTakeAttendance(AttendanceTabController.java:412) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 05:14:22 ERROR AttendanceTabController:179 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadSessionsSummary(AttendanceTabController.java:217) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadAttendanceData(AttendanceTabController.java:173) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.handleRefresh(AttendanceTabController.java:427) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 05:14:57 ERROR AttendanceTabController:179 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadSessionsSummary(AttendanceTabController.java:217) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadAttendanceData(AttendanceTabController.java:173) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.setClubId(AttendanceTabController.java:147) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.loadAttendanceTabContent(TeacherDashboardController.java:120) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.lambda$initializeAttendanceTab$2(TeacherDashboardController.java:108) ~[classes/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:372) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:78) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(ReadOnlyBooleanWrapper.java:103) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:111) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.Tab.setSelected(Tab.java:189) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:657) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:670) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:589) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:82) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1529) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1507) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 05:14:59 ERROR AttendanceTabController:179 - Error loading attendance data: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
org.postgresql.util.PSQLException: ERROR: invalid input value for enum attendance_status: "late"
  Position: 348
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadSessionsSummary(AttendanceTabController.java:217) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.loadAttendanceData(AttendanceTabController.java:173) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.setYearAndTerm(AttendanceTabController.java:160) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.loadAttendanceTabContent(TeacherDashboardController.java:122) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.TeacherDashboardController.lambda$initializeAttendanceTab$2(TeacherDashboardController.java:108) ~[classes/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:372) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:91) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:78) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(ReadOnlyBooleanWrapper.java:103) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:111) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.control.Tab.setSelected(Tab.java:189) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:657) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:670) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:589) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:82) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1529) ~[javafx-controls-21.0.2-win.jar:?]
	at javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1507) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 05:18:19 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:18:19 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:20:10 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 05:20:10 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 05:20:45 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 05:20:48 INFO  Main:138 - Application UI launched successfully
2025-09-29 05:21:17 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 05:21:18 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@64a6102c
2025-09-29 05:21:18 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 05:21:19 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 05:21:19 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 05:21:19 INFO  Main:89 - Testing Excel integration...
2025-09-29 05:21:19 INFO  Main:93 - Found 17 learners in database
2025-09-29 05:21:19 INFO  Main:98 - Excel file exists: true
2025-09-29 05:21:19 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 05:21:19 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 05:21:20 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 05:21:20 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 05:21:20 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 05:21:20 INFO  log:170 - Logging initialized @46177ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 05:21:21 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 05:21:21 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 05:21:21 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 05:21:21 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 05:21:21 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 05:21:21 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 05:21:21 INFO  AbstractConnector:333 - Started ServerConnector@30f5f9b8{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:21:21 INFO  Server:415 - Started @47421ms
2025-09-29 05:21:21 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 05:21:22 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 05:21:22 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 05:21:22 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 05:21:22 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 05:21:22 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 05:21:22 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 05:21:22 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 05:21:22 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 05:21:22 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:21:22 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 05:21:22 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 05:21:22 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:21:22 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 05:21:22 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:21:22 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:21:22 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 05:21:23 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:21:23 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 05:21:23 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 05:21:26 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:21:26 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:21:26 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:21:26 INFO  AttendanceTabController:303 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:36 INFO  AttendanceTabController:232 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:36 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:39 INFO  AttendanceTabController:232 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:39 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:41 INFO  AttendanceTabController:232 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:41 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:44 INFO  AttendanceTabController:232 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:44 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:47 INFO  AttendanceTabController:232 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:47 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:50 INFO  AttendanceTabController:232 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:50 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:53 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:53 INFO  AttendanceTabController:303 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:58 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:23:58 INFO  AttendanceTabController:303 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:26:23 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:26:23 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:30:45 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 05:30:45 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 05:33:05 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 05:33:10 INFO  Main:138 - Application UI launched successfully
2025-09-29 05:33:20 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 05:33:23 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3200ec9
2025-09-29 05:33:23 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 05:33:24 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 05:33:24 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 05:33:24 INFO  Main:89 - Testing Excel integration...
2025-09-29 05:33:24 INFO  Main:93 - Found 17 learners in database
2025-09-29 05:33:24 INFO  Main:98 - Excel file exists: true
2025-09-29 05:33:24 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 05:33:24 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 05:33:25 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 05:33:25 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 05:33:25 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 05:33:25 INFO  log:170 - Logging initialized @34981ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 05:33:26 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 05:33:26 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 05:33:26 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 05:33:26 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 05:33:26 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 05:33:26 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 05:33:26 INFO  AbstractConnector:333 - Started ServerConnector@36c35aaf{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:33:26 INFO  Server:415 - Started @36326ms
2025-09-29 05:33:26 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 05:33:27 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 05:33:27 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 05:33:27 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 05:33:27 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 05:33:27 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 05:33:27 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 05:33:27 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 05:33:27 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 05:33:27 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:33:27 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 05:33:27 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:33:27 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 05:33:28 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:33:28 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 05:33:28 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:33:28 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 05:33:28 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 05:33:28 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:33:28 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 05:33:32 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:33:32 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:33:32 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:33:32 INFO  AttendanceTabController:303 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:36:01 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 05:36:01 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 05:36:26 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 05:36:28 INFO  Main:138 - Application UI launched successfully
2025-09-29 05:36:46 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 05:36:48 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4547b760
2025-09-29 05:36:48 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 05:36:49 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 05:36:49 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 05:36:49 INFO  Main:89 - Testing Excel integration...
2025-09-29 05:36:49 INFO  Main:93 - Found 17 learners in database
2025-09-29 05:36:49 INFO  Main:98 - Excel file exists: true
2025-09-29 05:36:49 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 05:36:49 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 05:36:49 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 05:36:49 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 05:36:49 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 05:36:50 INFO  log:170 - Logging initialized @29206ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 05:36:50 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 05:36:50 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 05:36:51 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 05:36:51 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 05:36:51 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 05:36:51 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 05:36:51 INFO  AbstractConnector:333 - Started ServerConnector@6964a4ce{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:36:51 INFO  Server:415 - Started @30300ms
2025-09-29 05:36:51 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 05:36:51 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 05:36:51 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 05:36:51 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 05:36:51 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 05:36:51 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 05:36:51 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 05:36:52 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 05:36:52 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 05:36:52 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:36:52 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 05:36:52 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 05:36:52 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:36:52 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 05:36:52 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:36:53 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:36:53 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 05:36:53 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 05:36:53 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:36:53 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 05:36:58 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:36:58 INFO  AttendanceTabController:303 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:36:58 INFO  AttendanceTabController:232 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:36:58 INFO  AttendanceTabController:303 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:38:00 INFO  TeacherDashboardController:159 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 05:38:01 INFO  Main:414 - Application shutdown initiated
2025-09-29 05:38:01 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:38:01 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 05:38:01 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 05:38:02 INFO  AbstractConnector:383 - Stopped ServerConnector@6964a4ce{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:38:02 INFO  session:149 - node0 Stopped scavenging
2025-09-29 05:38:02 INFO  EmbeddedJettyServer:180 - done
2025-09-29 05:38:02 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 05:38:02 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 05:38:02 INFO  Main:405 - Excel School Server stopped
2025-09-29 05:38:02 INFO  SessionManager:119 - Session closed
2025-09-29 05:38:02 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 05:38:02 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 05:38:02 INFO  Main:429 - Application stopped successfully
2025-09-29 05:43:39 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 05:43:42 INFO  Main:138 - Application UI launched successfully
2025-09-29 05:43:55 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 05:43:58 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@6bcd3d52
2025-09-29 05:43:58 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 05:43:59 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 05:43:59 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 05:43:59 INFO  Main:89 - Testing Excel integration...
2025-09-29 05:43:59 INFO  Main:93 - Found 17 learners in database
2025-09-29 05:43:59 INFO  Main:98 - Excel file exists: true
2025-09-29 05:43:59 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 05:43:59 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 05:44:00 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 05:44:00 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 05:44:00 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 05:44:01 INFO  log:170 - Logging initialized @29814ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 05:44:02 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 05:44:02 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 05:44:02 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 05:44:02 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 05:44:02 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 05:44:02 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 05:44:02 INFO  AbstractConnector:333 - Started ServerConnector@3ded84ff{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:44:02 INFO  Server:415 - Started @31491ms
2025-09-29 05:44:02 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 05:44:02 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 05:44:02 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 05:44:02 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 05:44:02 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 05:44:02 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 05:44:03 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 05:44:03 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 05:44:03 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 05:44:03 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:44:03 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 05:44:04 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 05:44:04 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:44:04 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:44:04 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 05:44:04 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:44:04 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 05:44:04 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 05:44:04 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:44:04 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 05:44:10 INFO  AttendanceTabController:240 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:44:10 INFO  AttendanceTabController:311 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:44:10 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:44:10 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:46:32 INFO  TeacherDashboardController:159 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 05:46:32 INFO  Main:414 - Application shutdown initiated
2025-09-29 05:46:32 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:46:32 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 05:46:32 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 05:46:32 INFO  AbstractConnector:383 - Stopped ServerConnector@3ded84ff{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:46:32 INFO  session:149 - node0 Stopped scavenging
2025-09-29 05:46:32 INFO  EmbeddedJettyServer:180 - done
2025-09-29 05:46:32 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 05:46:32 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 05:46:32 INFO  Main:405 - Excel School Server stopped
2025-09-29 05:46:32 INFO  SessionManager:119 - Session closed
2025-09-29 05:46:32 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 05:46:32 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 05:46:32 INFO  Main:429 - Application stopped successfully
2025-09-29 05:51:34 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 05:51:37 INFO  Main:138 - Application UI launched successfully
2025-09-29 05:51:54 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 05:52:02 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3200ec9
2025-09-29 05:52:02 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 05:52:05 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 05:52:05 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 05:52:05 INFO  Main:89 - Testing Excel integration...
2025-09-29 05:52:05 INFO  Main:93 - Found 17 learners in database
2025-09-29 05:52:05 INFO  Main:98 - Excel file exists: true
2025-09-29 05:52:05 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 05:52:05 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 05:52:05 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 05:52:05 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 05:52:05 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 05:52:06 INFO  log:170 - Logging initialized @45797ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 05:52:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 05:52:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 05:52:08 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 05:52:08 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 05:52:08 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 05:52:08 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 05:52:08 INFO  AbstractConnector:333 - Started ServerConnector@78b4f9a5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 05:52:08 INFO  Server:415 - Started @47892ms
2025-09-29 05:52:08 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 05:52:08 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 05:52:08 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 05:52:08 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 05:52:08 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 05:52:08 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 05:52:08 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 05:52:09 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 05:52:09 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 05:52:09 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:52:09 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 05:52:09 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 05:52:09 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 05:52:09 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 05:52:09 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 05:52:09 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:52:10 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 05:52:10 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 05:52:10 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:52:10 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 05:52:29 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 05:52:30 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:52:30 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 05:52:30 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 05:52:30 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:52:39 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:52:39 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:52:44 INFO  AttendanceTabController:240 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:52:44 INFO  AttendanceTabController:311 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:52:44 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:52:44 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:53:24 INFO  AttendanceTabController:318 - === Loading session details for session: 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:53:24 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: false, Year: 2024, Term: 1)
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: false, Year: 2025, Term: 1)
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: b7b8a992-f8d9-4fef-a333-f5241b1c9a54 - Mary Ann (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:53:24 INFO  AttendanceTabController:440 - Record: cb499b3f-ea0d-4028-9b1c-34840c69b2a7 - Nicole Prudence (Status: absent, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:53:24 INFO  AttendanceTabController:450 - Total records: 7, Active enrollment records: 5, Present count in active: 4
2025-09-29 05:53:24 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:53:24 INFO  AttendanceTabController:480 - Total: 4, Present: 3, Absent: 1, Late: 0
2025-09-29 05:53:24 INFO  AttendanceTabController:383 - Filtered session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 05:53:27 INFO  AttendanceTabController:318 - === Loading session details for session: 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:53:27 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:53:27 INFO  AttendanceTabController:450 - Total records: 0, Active enrollment records: 0, Present count in active: 0
2025-09-29 05:53:27 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:53:27 INFO  AttendanceTabController:480 - Total: 0, Present: 0, Absent: 0, Late: 0
2025-09-29 05:53:28 INFO  AttendanceTabController:318 - === Loading session details for session: 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:53:28 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: false, Year: 2024, Term: 1)
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: false, Year: 2025, Term: 1)
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: b7b8a992-f8d9-4fef-a333-f5241b1c9a54 - Mary Ann (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:53:28 INFO  AttendanceTabController:440 - Record: cb499b3f-ea0d-4028-9b1c-34840c69b2a7 - Nicole Prudence (Status: absent, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:53:28 INFO  AttendanceTabController:450 - Total records: 7, Active enrollment records: 5, Present count in active: 4
2025-09-29 05:53:28 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:53:28 INFO  AttendanceTabController:480 - Total: 4, Present: 3, Absent: 1, Late: 0
2025-09-29 05:53:29 INFO  AttendanceTabController:383 - Filtered session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 05:53:55 INFO  AttendanceTabController:318 - === Loading session details for session: 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:53:55 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:53:55 INFO  AttendanceTabController:450 - Total records: 0, Active enrollment records: 0, Present count in active: 0
2025-09-29 05:53:55 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:53:55 INFO  AttendanceTabController:480 - Total: 0, Present: 0, Absent: 0, Late: 0
2025-09-29 05:54:00 INFO  AttendanceTabController:318 - === Loading session details for session: 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:54:00 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: false, Year: 2024, Term: 1)
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: false, Year: 2025, Term: 1)
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: b7b8a992-f8d9-4fef-a333-f5241b1c9a54 - Mary Ann (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:54:00 INFO  AttendanceTabController:440 - Record: cb499b3f-ea0d-4028-9b1c-34840c69b2a7 - Nicole Prudence (Status: absent, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:54:00 INFO  AttendanceTabController:450 - Total records: 7, Active enrollment records: 5, Present count in active: 4
2025-09-29 05:54:00 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:54:00 INFO  AttendanceTabController:480 - Total: 4, Present: 3, Absent: 1, Late: 0
2025-09-29 05:54:00 INFO  AttendanceTabController:383 - Filtered session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 05:54:18 INFO  AttendanceTabController:318 - === Loading session details for session: 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:54:18 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:54:18 INFO  AttendanceTabController:450 - Total records: 0, Active enrollment records: 0, Present count in active: 0
2025-09-29 05:54:18 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:54:18 INFO  AttendanceTabController:480 - Total: 0, Present: 0, Absent: 0, Late: 0
2025-09-29 05:54:21 INFO  AttendanceTabController:318 - === Loading session details for session: 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:54:21 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: false, Year: 2024, Term: 1)
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: false, Year: 2025, Term: 1)
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: b7b8a992-f8d9-4fef-a333-f5241b1c9a54 - Mary Ann (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:54:21 INFO  AttendanceTabController:440 - Record: cb499b3f-ea0d-4028-9b1c-34840c69b2a7 - Nicole Prudence (Status: absent, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:54:21 INFO  AttendanceTabController:450 - Total records: 7, Active enrollment records: 5, Present count in active: 4
2025-09-29 05:54:21 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:54:21 INFO  AttendanceTabController:480 - Total: 4, Present: 3, Absent: 1, Late: 0
2025-09-29 05:54:22 INFO  AttendanceTabController:383 - Filtered session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 05:57:10 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 05:57:10 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 05:59:01 INFO  AttendanceTabController:318 - === Loading session details for session: 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:59:01 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:59:01 INFO  AttendanceTabController:450 - Total records: 0, Active enrollment records: 0, Present count in active: 0
2025-09-29 05:59:01 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:59:01 INFO  AttendanceTabController:480 - Total: 0, Present: 0, Absent: 0, Late: 0
2025-09-29 05:59:02 INFO  AttendanceTabController:318 - === Loading session details for session: 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:59:02 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: false, Year: 2024, Term: 1)
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: false, Year: 2025, Term: 1)
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: b7b8a992-f8d9-4fef-a333-f5241b1c9a54 - Mary Ann (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:59:02 INFO  AttendanceTabController:440 - Record: cb499b3f-ea0d-4028-9b1c-34840c69b2a7 - Nicole Prudence (Status: absent, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 05:59:02 INFO  AttendanceTabController:450 - Total records: 7, Active enrollment records: 5, Present count in active: 4
2025-09-29 05:59:02 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:59:02 INFO  AttendanceTabController:480 - Total: 4, Present: 3, Absent: 1, Late: 0
2025-09-29 05:59:02 INFO  AttendanceTabController:383 - Filtered session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 05:59:06 INFO  AttendanceTabController:318 - === Loading session details for session: 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:59:06 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 9b99cb79-638b-4a96-9590-23e2d5160b33 ===
2025-09-29 05:59:06 INFO  AttendanceTabController:450 - Total records: 0, Active enrollment records: 0, Present count in active: 0
2025-09-29 05:59:06 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 05:59:06 INFO  AttendanceTabController:480 - Total: 0, Present: 0, Absent: 0, Late: 0
2025-09-29 05:59:08 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:08 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:22 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:22 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:27 INFO  AttendanceTabController:240 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:27 INFO  AttendanceTabController:311 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:30 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:30 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:33 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:33 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:42 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 05:59:42 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:42 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 05:59:42 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 05:59:42 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:49 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:49 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:50 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 05:59:50 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 05:59:50 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 05:59:50 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 05:59:51 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:00:35 ERROR AttendanceController:664 - Error validating session against schedules: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
org.postgresql.util.PSQLException: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.validateSessionAgainstSchedules(AttendanceController.java:655) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:421) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.handleTakeAttendance(AttendanceTabController.java:534) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 06:00:46 ERROR AttendanceController:664 - Error validating session against schedules: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
org.postgresql.util.PSQLException: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.validateSessionAgainstSchedules(AttendanceController.java:655) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:421) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.handleTakeAttendance(AttendanceTabController.java:534) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 06:01:00 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:00 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:03 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 06:01:03 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:03 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 06:01:03 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 06:01:03 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:05 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:05 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:17 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 06:01:17 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:17 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 06:01:17 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 06:01:17 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:18 ERROR AttendanceController:664 - Error validating session against schedules: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
org.postgresql.util.PSQLException: ERROR: operator does not exist: meeting_day = character varying
  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.
  Position: 110
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.validateSessionAgainstSchedules(AttendanceController.java:655) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceController.createNewSession(AttendanceController.java:421) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:212) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:515) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:650) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:469) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.AttendanceTabController.handleTakeAttendance(AttendanceTabController.java:534) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 06:01:25 INFO  AttendanceTabController:240 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:01:25 INFO  AttendanceTabController:311 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 06:02:12 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:02:12 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:03:15 INFO  AttendanceTabController:318 - === Loading session details for session: 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 06:03:15 INFO  AttendanceTabController:423 - === DEBUG: All attendance records for session 7fea17e0-d066-40bc-b209-a333dd560f9b ===
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: false, Year: 2024, Term: 1)
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: 12febd6a-695d-4890-a3b9-a4bed866696d - Job Guyo (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: false, Year: 2025, Term: 1)
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: 824699cb-2a44-42d8-99d6-642fd60bb56b - Ken Wamaria (Status: present, Active Enrollment: true, Year: 2025, Term: 3)
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: b7b8a992-f8d9-4fef-a333-f5241b1c9a54 - Mary Ann (Status: present, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 06:03:15 INFO  AttendanceTabController:440 - Record: cb499b3f-ea0d-4028-9b1c-34840c69b2a7 - Nicole Prudence (Status: absent, Active Enrollment: true, Year: 2025, Term: 1)
2025-09-29 06:03:15 INFO  AttendanceTabController:450 - Total records: 7, Active enrollment records: 5, Present count in active: 4
2025-09-29 06:03:15 INFO  AttendanceTabController:479 - === Session Summary Counts ===
2025-09-29 06:03:15 INFO  AttendanceTabController:480 - Total: 4, Present: 3, Absent: 1, Late: 0
2025-09-29 06:03:15 INFO  AttendanceTabController:383 - Filtered session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 06:07:12 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:07:12 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:12:12 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:12:12 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:17:14 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:17:23 WARN  PoolBase:180 - CMS-Pool - Failed to validate connection org.postgresql.jdbc.PgConnection@3200ec9 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-09-29 06:17:43 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:22:12 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:22:13 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:27:12 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:27:12 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:32:12 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 06:32:12 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 06:37:10 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 06:59:39 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 06:59:44 INFO  Main:138 - Application UI launched successfully
2025-09-29 07:01:07 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 07:01:17 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@38c08cdd
2025-09-29 07:01:17 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 07:01:20 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 07:01:20 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 07:01:20 INFO  Main:89 - Testing Excel integration...
2025-09-29 07:01:22 INFO  Main:93 - Found 17 learners in database
2025-09-29 07:01:22 INFO  Main:98 - Excel file exists: true
2025-09-29 07:01:22 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 07:01:22 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 07:01:22 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 07:01:22 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 07:01:22 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 07:01:23 INFO  log:170 - Logging initialized @125871ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 07:01:24 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 07:01:24 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 07:01:24 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 07:01:24 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 07:01:24 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 07:01:24 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 07:01:25 INFO  AbstractConnector:333 - Started ServerConnector@45033d40{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 07:01:25 INFO  Server:415 - Started @128098ms
2025-09-29 07:01:25 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 07:01:26 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 07:01:26 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 07:01:26 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 07:01:26 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 07:01:26 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 07:01:26 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 07:01:28 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 07:01:28 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 07:01:28 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 07:01:28 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 07:01:28 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 07:01:28 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 07:01:28 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 07:01:28 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 07:01:28 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 07:01:29 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 07:01:29 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 07:01:30 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 07:01:30 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 07:01:48 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:01:48 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:01:49 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:01:49 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:01:49 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:01:49 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:02:20 INFO  AttendanceTabController:770 - Starting export of 2 records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:02:20 INFO  AttendanceTabController:873 - Exported 2 attendance records to CSV: C:\Users\user\Desktop\Piano_attendance_2025_term3_20250929.csv
2025-09-29 07:02:20 INFO  AttendanceTabController:756 - Export operation cancelled by user
2025-09-29 07:06:30 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 07:06:30 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 07:08:58 INFO  TeacherDashboardController:159 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 07:08:58 INFO  Main:414 - Application shutdown initiated
2025-09-29 07:08:58 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 07:08:58 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 07:08:58 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 07:08:58 INFO  AbstractConnector:383 - Stopped ServerConnector@45033d40{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 07:08:58 INFO  session:149 - node0 Stopped scavenging
2025-09-29 07:08:58 INFO  EmbeddedJettyServer:180 - done
2025-09-29 07:08:58 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 07:08:58 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 07:08:58 INFO  Main:405 - Excel School Server stopped
2025-09-29 07:08:58 INFO  SessionManager:119 - Session closed
2025-09-29 07:08:58 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 07:08:58 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 07:08:58 INFO  Main:429 - Application stopped successfully
2025-09-29 07:09:29 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 07:09:31 INFO  Main:138 - Application UI launched successfully
2025-09-29 07:09:42 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 07:09:43 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7380fb29
2025-09-29 07:09:43 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 07:09:44 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 07:09:44 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 07:09:44 INFO  Main:89 - Testing Excel integration...
2025-09-29 07:09:44 INFO  Main:93 - Found 17 learners in database
2025-09-29 07:09:44 INFO  Main:98 - Excel file exists: true
2025-09-29 07:09:44 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 07:09:44 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 07:09:44 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 07:09:44 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 07:09:44 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 07:09:44 INFO  log:170 - Logging initialized @18705ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 07:09:44 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 07:09:44 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 07:09:44 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 07:09:44 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 07:09:44 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 07:09:44 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 07:09:44 INFO  AbstractConnector:333 - Started ServerConnector@6acd406f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 07:09:44 INFO  Server:415 - Started @18927ms
2025-09-29 07:09:44 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 07:09:44 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 07:09:44 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 07:09:44 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 07:09:44 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 07:09:44 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 07:09:44 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 07:09:45 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 07:09:45 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 07:09:45 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 07:09:45 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 07:09:45 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 07:09:45 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 07:09:45 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 07:09:45 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 07:09:45 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 07:09:45 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 07:09:45 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 07:09:45 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 07:09:45 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 07:09:50 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:09:50 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:09:50 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:09:50 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:09:50 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:09:50 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:11:39 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:11:39 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:11:39 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:11:39 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:11:39 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:11:39 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:11:45 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:11:45 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:11:45 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:11:45 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:11:45 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:11:45 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:11:50 INFO  EnrollmentController:192 - User is teacher: true
2025-09-29 07:11:50 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 07:11:50 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 07:12:02 INFO  EnrollmentController:192 - User is teacher: true
2025-09-29 07:12:02 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 07:12:02 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 07:12:06 INFO  EnrollmentController:192 - User is teacher: true
2025-09-29 07:12:06 INFO  EnrollmentController:197 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 07:12:06 INFO  EnrollmentController:217 - Teacher assigned to club: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 07:12:12 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:12:12 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:12:12 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:12:12 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:12:12 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:12:12 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:12:16 INFO  TeacherDashboardController:159 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 07:12:16 INFO  Main:414 - Application shutdown initiated
2025-09-29 07:12:16 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 07:12:16 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 07:12:16 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 07:12:16 INFO  AbstractConnector:383 - Stopped ServerConnector@6acd406f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 07:12:16 INFO  session:149 - node0 Stopped scavenging
2025-09-29 07:12:16 INFO  EmbeddedJettyServer:180 - done
2025-09-29 07:12:16 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 07:12:16 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 07:12:16 INFO  Main:405 - Excel School Server stopped
2025-09-29 07:12:16 INFO  SessionManager:119 - Session closed
2025-09-29 07:12:16 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 07:12:16 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 07:12:16 INFO  Main:429 - Application stopped successfully
2025-09-29 07:13:42 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 07:13:43 INFO  Main:138 - Application UI launched successfully
2025-09-29 07:14:06 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 07:14:06 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@62e929cc
2025-09-29 07:14:06 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 07:14:07 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 07:14:07 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 07:14:07 INFO  Main:89 - Testing Excel integration...
2025-09-29 07:14:07 INFO  Main:93 - Found 17 learners in database
2025-09-29 07:14:07 INFO  Main:98 - Excel file exists: true
2025-09-29 07:14:07 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 07:14:07 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 07:14:07 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 07:14:07 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 07:14:07 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 07:14:07 INFO  log:170 - Logging initialized @27881ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 07:14:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 07:14:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 07:14:07 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 07:14:07 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 07:14:07 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 07:14:07 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 07:14:07 INFO  AbstractConnector:333 - Started ServerConnector@fa3d006{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 07:14:07 INFO  Server:415 - Started @28141ms
2025-09-29 07:14:07 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 07:14:07 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 07:14:07 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 07:14:07 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 07:14:07 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 07:14:07 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 07:14:07 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 07:14:07 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 07:14:07 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 07:14:07 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 07:14:07 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 07:14:07 INFO  TeacherDashboardController:56 - Initializing TeacherDashboardController
2025-09-29 07:14:07 INFO  TeacherDashboardController:223 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 07:14:07 INFO  TeacherDashboardController:244 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 07:14:07 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 07:14:07 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 07:14:07 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 07:14:07 INFO  TeacherDashboardController:140 - TeacherDashboardController subscribed to enrollment events
2025-09-29 07:14:07 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 07:14:07 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 07:14:10 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:14:10 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:14:10 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:14:10 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:14:10 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:14:10 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:19:07 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 07:19:07 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 07:22:37 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:22:37 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:22:40 INFO  AttendanceController:65 - Initializing AttendanceController
2025-09-29 07:22:41 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:22:41 INFO  AttendanceController:300 - Loaded 0 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd on 2025-09-29
2025-09-29 07:22:41 INFO  AttendanceController:243 - Set year: 2025, term: 3 for AttendanceController
2025-09-29 07:22:41 INFO  AttendanceController:263 - Loaded 1 schedules for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:22:43 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:22:43 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:22:47 INFO  AttendanceTabController:548 - Loaded session details - Present: 2, Absent: 0, Late: 0, Total: 2
2025-09-29 07:22:58 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:22:58 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:29 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:23:29 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:23:29 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:29 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:29 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:29 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:32 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:23:32 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:23:32 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:32 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:32 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:32 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:33 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:23:33 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:23:33 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:33 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:33 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:33 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:34 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-09-29 07:23:34 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-09-29 07:23:34 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:34 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:23:34 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 07:23:34 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-09-29 07:24:07 INFO  TeacherDashboardController:268 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 07:24:07 INFO  TeacherDashboardController:304 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 07:24:48 INFO  TeacherDashboardController:159 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 07:24:48 INFO  Main:414 - Application shutdown initiated
2025-09-29 07:24:48 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 07:24:48 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 07:24:48 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 07:24:48 INFO  AbstractConnector:383 - Stopped ServerConnector@fa3d006{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 07:24:48 INFO  session:149 - node0 Stopped scavenging
2025-09-29 07:24:48 INFO  EmbeddedJettyServer:180 - done
2025-09-29 07:24:48 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 07:24:48 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 07:24:48 INFO  Main:405 - Excel School Server stopped
2025-09-29 07:24:48 INFO  SessionManager:119 - Session closed
2025-09-29 07:24:48 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 07:24:48 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 07:24:48 INFO  Main:429 - Application stopped successfully
2025-09-29 08:51:58 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 08:52:04 INFO  Main:138 - Application UI launched successfully
2025-09-29 08:53:19 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 08:53:38 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@6c21bd4
2025-09-29 08:53:38 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 08:53:47 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 08:53:47 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 08:53:47 INFO  Main:89 - Testing Excel integration...
2025-09-29 08:53:51 INFO  Main:93 - Found 17 learners in database
2025-09-29 08:53:51 INFO  Main:98 - Excel file exists: true
2025-09-29 08:53:51 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 08:53:51 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 08:53:52 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 08:53:52 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 08:53:53 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 08:53:54 INFO  log:170 - Logging initialized @170846ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 08:53:57 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 08:53:57 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 08:53:58 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 08:53:59 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 08:53:59 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 08:53:59 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 08:53:59 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 08:53:59 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 08:53:59 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 08:53:59 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 08:53:59 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 08:53:59 INFO  AbstractConnector:333 - Started ServerConnector@65c03e4b{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 08:53:59 INFO  Server:415 - Started @176069ms
2025-09-29 08:53:59 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 08:54:00 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 08:54:03 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 08:54:03 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 08:54:03 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 08:54:03 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 08:54:03 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 08:54:03 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 08:54:03 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 08:54:04 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 08:54:04 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 08:54:04 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 08:54:04 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 08:54:05 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 08:54:06 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 08:54:25 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 08:54:25 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 08:54:25 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 08:54:27 ERROR LearnersTabController:350 - Error loading learners data: ERROR: unrecognized configuration parameter "app.current_user_id"
org.postgresql.util.PSQLException: ERROR: unrecognized configuration parameter "app.current_user_id"
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.lambda$loadLearnersData$6(LearnersTabController.java:243) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 08:54:30 INFO  LearnersTabController:312 - Loaded 0 learners (0 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 08:57:25 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 08:57:27 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 08:58:56 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 08:58:59 INFO  Main:138 - Application UI launched successfully
2025-09-29 08:59:15 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 08:59:42 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7a514166
2025-09-29 08:59:42 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 08:59:47 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 08:59:48 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 08:59:48 INFO  Main:89 - Testing Excel integration...
2025-09-29 08:59:50 INFO  Main:93 - Found 17 learners in database
2025-09-29 08:59:50 INFO  Main:98 - Excel file exists: true
2025-09-29 08:59:50 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 08:59:50 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 08:59:50 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 08:59:50 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 08:59:50 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 08:59:51 INFO  log:170 - Logging initialized @74082ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 08:59:52 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 08:59:52 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 08:59:52 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 08:59:52 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 08:59:52 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 08:59:52 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 08:59:52 INFO  AbstractConnector:333 - Started ServerConnector@35b336d8{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 08:59:52 INFO  Server:415 - Started @75412ms
2025-09-29 08:59:52 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 08:59:53 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 08:59:53 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 08:59:53 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 08:59:53 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 08:59:53 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 08:59:53 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 08:59:54 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 08:59:54 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 08:59:54 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 08:59:54 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 08:59:54 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 08:59:54 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 08:59:54 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 08:59:54 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 08:59:54 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 08:59:54 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 08:59:54 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 08:59:55 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 08:59:55 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 09:00:05 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 09:00:05 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 09:00:05 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:00:05 ERROR LearnersTabController:307 - Failed to set tenant context: Cannot invoke "java.util.UUID.toString()" because the return value of "com.cms.clubmanagementsystem.utils.SessionManager.getCurrentSchoolId()" is null
java.lang.NullPointerException: Cannot invoke "java.util.UUID.toString()" because the return value of "com.cms.clubmanagementsystem.utils.SessionManager.getCurrentSchoolId()" is null
	at com.cms.clubmanagementsystem.controller.LearnersTabController.setTenantContext(LearnersTabController.java:295) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.createLearnersQuery(LearnersTabController.java:256) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.lambda$loadLearnersData$6(LearnersTabController.java:241) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 09:00:05 ERROR LearnersTabController:307 - Failed to set tenant context: Cannot invoke "java.util.UUID.toString()" because the return value of "com.cms.clubmanagementsystem.utils.SessionManager.getCurrentSchoolId()" is null
java.lang.NullPointerException: Cannot invoke "java.util.UUID.toString()" because the return value of "com.cms.clubmanagementsystem.utils.SessionManager.getCurrentSchoolId()" is null
	at com.cms.clubmanagementsystem.controller.LearnersTabController.setTenantContext(LearnersTabController.java:295) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.createLearnersQuery(LearnersTabController.java:256) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.lambda$loadLearnersData$6(LearnersTabController.java:241) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 09:00:05 ERROR LearnersTabController:374 - Error loading learners data: Failed to set tenant context
java.lang.RuntimeException: Failed to set tenant context
	at com.cms.clubmanagementsystem.controller.LearnersTabController.setTenantContext(LearnersTabController.java:308) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.createLearnersQuery(LearnersTabController.java:256) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.lambda$loadLearnersData$6(LearnersTabController.java:241) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.NullPointerException: Cannot invoke "java.util.UUID.toString()" because the return value of "com.cms.clubmanagementsystem.utils.SessionManager.getCurrentSchoolId()" is null
	at com.cms.clubmanagementsystem.controller.LearnersTabController.setTenantContext(LearnersTabController.java:295) ~[classes/:?]
	... 3 more
2025-09-29 09:00:05 ERROR LearnersTabController:374 - Error loading learners data: Failed to set tenant context
java.lang.RuntimeException: Failed to set tenant context
	at com.cms.clubmanagementsystem.controller.LearnersTabController.setTenantContext(LearnersTabController.java:308) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.createLearnersQuery(LearnersTabController.java:256) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.lambda$loadLearnersData$6(LearnersTabController.java:241) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.NullPointerException: Cannot invoke "java.util.UUID.toString()" because the return value of "com.cms.clubmanagementsystem.utils.SessionManager.getCurrentSchoolId()" is null
	at com.cms.clubmanagementsystem.controller.LearnersTabController.setTenantContext(LearnersTabController.java:295) ~[classes/:?]
	... 3 more
2025-09-29 09:00:27 INFO  TeacherDashboardController:193 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 09:00:27 INFO  Main:414 - Application shutdown initiated
2025-09-29 09:00:27 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 09:00:27 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-09-29 09:00:27 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-09-29 09:00:27 INFO  AbstractConnector:383 - Stopped ServerConnector@35b336d8{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 09:00:27 INFO  session:149 - node0 Stopped scavenging
2025-09-29 09:00:27 INFO  EmbeddedJettyServer:180 - done
2025-09-29 09:00:27 INFO  WebhookService:389 - Webhook service stopped
2025-09-29 09:00:27 INFO  Main:347 - Shutting down cleanup scheduler...
2025-09-29 09:00:27 INFO  Main:405 - Excel School Server stopped
2025-09-29 09:00:27 INFO  SessionManager:119 - Session closed
2025-09-29 09:00:27 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 09:00:27 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 09:00:27 INFO  Main:429 - Application stopped successfully
2025-09-29 09:19:48 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 09:19:55 INFO  Main:138 - Application UI launched successfully
2025-09-29 09:20:12 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 09:20:18 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@551966b0
2025-09-29 09:20:18 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 09:20:20 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 09:20:20 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 09:20:20 INFO  Main:89 - Testing Excel integration...
2025-09-29 09:20:20 INFO  Main:93 - Found 17 learners in database
2025-09-29 09:20:20 INFO  Main:98 - Excel file exists: true
2025-09-29 09:20:20 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 09:20:20 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 09:20:21 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 09:20:21 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 09:20:21 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 09:20:21 INFO  log:170 - Logging initialized @52260ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 09:20:22 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 09:20:22 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 09:20:22 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 09:20:22 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 09:20:22 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 09:20:22 INFO  session:132 - node0 Scavenging every 660000ms
2025-09-29 09:20:22 INFO  AbstractConnector:333 - Started ServerConnector@6ac8db72{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 09:20:22 INFO  Server:415 - Started @53327ms
2025-09-29 09:20:22 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 09:20:23 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 09:20:23 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 09:20:23 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 09:20:23 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 09:20:23 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 09:20:23 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 09:20:24 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 09:20:24 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 09:20:24 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 09:20:24 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 09:20:24 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 09:20:24 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 09:20:24 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 09:20:24 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 09:20:24 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 09:20:25 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 09:20:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:20:25 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:20:25 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 09:20:30 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 09:20:30 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 09:20:30 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 09:20:30 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:20:30 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 09:20:31 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 09:20:31 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 09:21:27 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-09-29 09:21:27 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-09-29 09:21:27 INFO  LearnerAttendanceDetailController:99 - Initializing LearnerAttendanceDetailController
2025-09-29 09:21:27 ERROR LearnersTabController:686 - Error loading learner attendance view: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/learner-attendance-detail.fxml

javafx.fxml.LoadException: 
/C:/Users/user/Desktop/ClubMS/Club-Management-System/target/classes/fxml/learner-attendance-detail.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2700) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.showLearnerAttendance(LearnersTabController.java:665) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnersTabController.handleViewAttendance(LearnersTabController.java:148) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.time.DateTimeException: Invalid value for MonthOfYear (valid values 1 - 12): -3
	at java.time.temporal.ValueRange.checkValidValue(ValueRange.java:319) ~[?:?]
	at java.time.temporal.ChronoField.checkValidValue(ChronoField.java:718) ~[?:?]
	at java.time.LocalDate.of(LocalDate.java:273) ~[?:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.calculateTermStartDate(LearnerAttendanceDetailController.java:189) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.setupDatePickers(LearnerAttendanceDetailController.java:175) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.initializeUI(LearnerAttendanceDetailController.java:119) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.initialize(LearnerAttendanceDetailController.java:100) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	... 62 more
2025-09-29 09:25:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:25:25 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:30:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:30:25 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:35:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:35:25 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:40:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:40:25 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:45:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:45:25 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:50:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:50:26 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:55:31 INFO  TeacherDashboardController:193 - Cleaning up event listeners for TeacherDashboardController
2025-09-29 09:55:34 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 09:55:40 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 09:56:08 INFO  Main:414 - Application shutdown initiated
2025-09-29 10:13:06 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 10:13:10 INFO  Main:138 - Application UI launched successfully
2025-09-29 10:13:20 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 10:13:24 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@63882fab
2025-09-29 10:13:24 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 10:13:26 INFO  LoginController:163 - Invalid password attempt for username=pam
2025-09-29 10:13:32 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 10:13:32 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 10:13:32 INFO  Main:89 - Testing Excel integration...
2025-09-29 10:13:33 INFO  Main:93 - Found 17 learners in database
2025-09-29 10:13:33 INFO  Main:98 - Excel file exists: true
2025-09-29 10:13:33 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 10:13:33 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 10:13:33 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 10:13:33 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 10:13:33 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 10:13:33 INFO  log:170 - Logging initialized @53495ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 10:13:35 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 10:13:35 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 10:13:35 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 10:13:35 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 10:13:35 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 10:13:35 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 10:13:36 INFO  AbstractConnector:333 - Started ServerConnector@eb78a40{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 10:13:36 INFO  Server:415 - Started @55827ms
2025-09-29 10:13:36 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 10:13:36 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 10:13:36 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 10:13:36 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 10:13:36 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 10:13:36 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 10:13:36 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 10:13:37 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 10:13:37 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 10:13:37 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 10:13:38 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 10:13:38 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 10:13:38 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 10:13:38 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 10:13:38 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 10:13:38 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 10:13:39 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 10:13:39 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:13:39 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 10:13:40 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 10:13:53 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 10:13:53 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 10:13:53 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 10:13:53 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:13:53 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 10:13:54 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 10:13:54 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 10:14:04 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-09-29 10:14:04 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 0, term: 0
2025-09-29 10:14:05 WARN  LearnerAttendanceDetailController:204 - Invalid year, using current year: 2025
2025-09-29 10:14:05 WARN  LearnerAttendanceDetailController:209 - Invalid term, using term 1: 1
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 1
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-01-01
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 1
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-04-30
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-01-01 to 2025-04-30
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Unknown
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 2025, term: 3
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 3
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-09-01
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 3
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-12-31
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-09-01 to 2025-12-31
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 10:14:05 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Job Guyo
2025-09-29 10:14:05 ERROR LearnerAttendanceDetailController:450 - Error loading attendance data: Learner not found with admission number: adm0013
java.lang.Exception: Learner not found with admission number: adm0013
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.getLearnerIdFromAdmissionNumber(LearnerAttendanceDetailController.java:529) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.loadAttendanceSessions(LearnerAttendanceDetailController.java:482) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.lambda$loadAttendanceData$10(LearnerAttendanceDetailController.java:436) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 10:14:25 INFO  LearnersTabController:147 - Viewing attendance for learner: Ken Wamaria
2025-09-29 10:14:25 INFO  LearnersTabController:661 - Opening attendance view for learner: Ken Wamaria
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 0, term: 0
2025-09-29 10:14:26 WARN  LearnerAttendanceDetailController:204 - Invalid year, using current year: 2025
2025-09-29 10:14:26 WARN  LearnerAttendanceDetailController:209 - Invalid term, using term 1: 1
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 1
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-01-01
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 1
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-04-30
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-01-01 to 2025-04-30
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Unknown
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Ken Wamaria, club: Piano, year: 2025, term: 3
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 2025, term: 3
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 3
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-09-01
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 3
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-12-31
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-09-01 to 2025-12-31
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 10:14:26 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Ken Wamaria
2025-09-29 10:14:26 ERROR LearnerAttendanceDetailController:450 - Error loading attendance data: Learner not found with admission number: adm0014
java.lang.Exception: Learner not found with admission number: adm0014
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.getLearnerIdFromAdmissionNumber(LearnerAttendanceDetailController.java:529) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.loadAttendanceSessions(LearnerAttendanceDetailController.java:482) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.lambda$loadAttendanceData$10(LearnerAttendanceDetailController.java:436) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 10:15:48 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 10:15:48 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 10:41:20 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 10:41:34 INFO  Main:138 - Application UI launched successfully
2025-09-29 10:42:29 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 10:42:58 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@703a8803
2025-09-29 10:42:58 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 10:43:03 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 10:43:03 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 10:43:03 INFO  Main:89 - Testing Excel integration...
2025-09-29 10:43:05 INFO  Main:93 - Found 17 learners in database
2025-09-29 10:43:05 INFO  Main:98 - Excel file exists: true
2025-09-29 10:43:05 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 10:43:05 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 10:43:05 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 10:43:05 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 10:43:05 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 10:43:06 INFO  log:170 - Logging initialized @136120ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 10:43:08 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 10:43:08 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 10:43:08 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 10:43:09 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 10:43:09 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 10:43:09 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 10:43:10 INFO  AbstractConnector:333 - Started ServerConnector@6be1adf1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 10:43:10 INFO  Server:415 - Started @140383ms
2025-09-29 10:43:10 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 10:43:11 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 10:43:11 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 10:43:11 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 10:43:11 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 10:43:11 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 10:43:12 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 10:43:13 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 10:43:14 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 10:43:14 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 10:43:16 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 10:43:16 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 10:43:16 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 10:43:16 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 10:43:16 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 10:43:16 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 10:43:17 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 10:43:17 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:43:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 10:43:18 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 10:44:49 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 10:44:49 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 10:44:49 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 10:44:49 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:44:49 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 10:44:49 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 10:44:49 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 10:45:00 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-09-29 10:45:00 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 0, term: 0
2025-09-29 10:45:01 WARN  LearnerAttendanceDetailController:204 - Invalid year, using current year: 2025
2025-09-29 10:45:01 WARN  LearnerAttendanceDetailController:209 - Invalid term, using term 1: 1
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 1
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-01-01
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 1
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-04-30
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-01-01 to 2025-04-30
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Unknown
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 2025, term: 3
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 3
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-09-01
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 3
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-12-31
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-09-01 to 2025-12-31
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 10:45:01 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Job Guyo
2025-09-29 10:45:01 ERROR LearnerAttendanceDetailController:450 - Error loading attendance data: Learner not found with admission number: adm0013
java.lang.Exception: Learner not found with admission number: adm0013
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.getLearnerIdFromAdmissionNumber(LearnerAttendanceDetailController.java:529) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.loadAttendanceSessions(LearnerAttendanceDetailController.java:482) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.lambda$loadAttendanceData$10(LearnerAttendanceDetailController.java:436) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-09-29 10:48:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:48:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 10:53:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:53:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 10:58:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 10:58:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:03:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:03:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:08:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:08:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:13:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:13:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:18:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:18:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:23:18 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:23:18 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:29:27 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 11:29:31 INFO  Main:138 - Application UI launched successfully
2025-09-29 11:30:32 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 11:30:37 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@27e04a5d
2025-09-29 11:30:37 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 11:30:39 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 11:30:39 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:30:39 INFO  Main:89 - Testing Excel integration...
2025-09-29 11:30:40 INFO  Main:93 - Found 17 learners in database
2025-09-29 11:30:40 INFO  Main:98 - Excel file exists: true
2025-09-29 11:30:40 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 11:30:40 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 11:30:40 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 11:30:40 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 11:30:40 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 11:30:41 INFO  log:170 - Logging initialized @88932ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 11:30:42 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 11:30:42 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 11:30:42 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 11:30:42 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 11:30:42 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 11:30:42 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 11:30:42 INFO  AbstractConnector:333 - Started ServerConnector@4a3ccea7{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 11:30:42 INFO  Server:415 - Started @90590ms
2025-09-29 11:30:42 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 11:30:44 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 11:30:44 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 11:30:44 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 11:30:44 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 11:30:44 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 11:30:44 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 11:30:44 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 11:30:45 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 11:30:45 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 11:30:45 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:30:45 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 11:30:45 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 11:30:45 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 11:30:47 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 11:30:47 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:30:48 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 11:30:48 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:30:48 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:30:48 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 11:32:20 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 11:32:20 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 11:32:20 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:32:20 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:32:20 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:32:20 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 11:32:20 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 11:32:33 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-09-29 11:32:33 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 0, term: 0
2025-09-29 11:32:33 WARN  LearnerAttendanceDetailController:204 - Invalid year, using current year: 2025
2025-09-29 11:32:33 WARN  LearnerAttendanceDetailController:209 - Invalid term, using term 1: 1
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 1
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-01-01
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 1
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-04-30
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-01-01 to 2025-04-30
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Unknown
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:199 - Setting up date pickers for year: 2025, term: 3
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:305 - Calculating term start date for year: 2025, term: 3
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:336 - Calculated term start date: 2025-09-01
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:263 - Calculating term end date for year: 2025, term: 3
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:293 - Calculated term end date: 2025-12-31
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:216 - Term date range: 2025-09-01 to 2025-12-31
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:240 - Filtering attendance data
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:421 - Loading attendance data for learner: Job Guyo
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:482 - Loading attendance sessions for learner: adm0013, club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 11:32:33 INFO  LearnerAttendanceDetailController:552 - Looking up learner ID for admission number: adm0013
2025-09-29 11:32:33 ERROR LearnerAttendanceDetailController:490 - Failed to get learner ID: No school context available
2025-09-29 11:32:33 ERROR LearnerAttendanceDetailController:469 - Error loading attendance data for admission number adm0013: Cannot load attendance: No school context available
java.lang.Exception: Cannot load attendance: No school context available
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.loadAttendanceSessions(LearnerAttendanceDetailController.java:491) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.lambda$loadAttendanceData$10(LearnerAttendanceDetailController.java:457) ~[classes/:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.Exception: No school context available
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.getLearnerIdFromAdmissionNumber(LearnerAttendanceDetailController.java:558) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LearnerAttendanceDetailController.loadAttendanceSessions(LearnerAttendanceDetailController.java:488) ~[classes/:?]
	... 2 more
2025-09-29 11:35:48 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:35:48 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:38:06 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 11:38:06 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-09-29 11:38:37 INFO  Main:112 - Environment variables loaded successfully
2025-09-29 11:38:39 INFO  Main:138 - Application UI launched successfully
2025-09-29 11:39:14 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-09-29 11:39:18 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@26304df6
2025-09-29 11:39:18 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-09-29 11:39:20 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-09-29 11:39:20 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:39:20 INFO  Main:89 - Testing Excel integration...
2025-09-29 11:39:20 INFO  Main:93 - Found 17 learners in database
2025-09-29 11:39:20 INFO  Main:98 - Excel file exists: true
2025-09-29 11:39:20 INFO  Main:101 - Excel file size: 9335 bytes
2025-09-29 11:39:20 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-09-29 11:39:20 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-09-29 11:39:20 INFO  WebhookService:60 - Webhook API authentication enabled
2025-09-29 11:39:20 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-09-29 11:39:21 INFO  log:170 - Logging initialized @49874ms to org.eclipse.jetty.util.log.Slf4jLog
2025-09-29 11:39:22 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-09-29 11:39:22 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-09-29 11:39:22 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-09-29 11:39:23 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-09-29 11:39:23 INFO  session:339 - No SessionScavenger set, using defaults
2025-09-29 11:39:23 INFO  session:132 - node0 Scavenging every 600000ms
2025-09-29 11:39:23 INFO  AbstractConnector:333 - Started ServerConnector@358dcec7{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-09-29 11:39:23 INFO  Server:415 - Started @51901ms
2025-09-29 11:39:23 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-09-29 11:39:24 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-09-29 11:39:24 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-09-29 11:39:24 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-09-29 11:39:24 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-09-29 11:39:24 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-09-29 11:39:24 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-09-29 11:39:25 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-09-29 11:39:25 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-09-29 11:39:25 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:39:25 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-09-29 11:39:25 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-09-29 11:39:25 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:39:25 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-09-29 11:39:25 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:39:25 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-09-29 11:39:26 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-09-29 11:39:26 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-09-29 11:39:26 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-09-29 11:39:26 INFO  Main:264 - Webhook registered successfully with school server
2025-09-29 11:39:33 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-09-29 11:39:33 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-09-29 11:39:33 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:39:33 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-09-29 11:39:33 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:39:34 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 11:39:34 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-09-29 11:39:42 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-09-29 11:39:42 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:205 - Setting up date pickers for year: 0, term: 0
2025-09-29 11:39:42 WARN  LearnerAttendanceDetailController:210 - Invalid year, using current year: 2025
2025-09-29 11:39:42 WARN  LearnerAttendanceDetailController:215 - Invalid term, using term 1: 1
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:311 - Calculating term start date for year: 2025, term: 1
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:342 - Calculated term start date: 2025-01-01
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:269 - Calculating term end date for year: 2025, term: 1
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:299 - Calculated term end date: 2025-04-30
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:222 - Term date range: 2025-01-01 to 2025-04-30
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:427 - Loading attendance data for learner: Unknown
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-09-29 11:39:42 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:205 - Setting up date pickers for year: 2025, term: 3
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:311 - Calculating term start date for year: 2025, term: 3
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:342 - Calculated term start date: 2025-09-01
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:269 - Calculating term end date for year: 2025, term: 3
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:299 - Calculated term end date: 2025-12-31
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:222 - Term date range: 2025-09-01 to 2025-12-31
2025-09-29 11:39:43 INFO  LearnerAttendanceDetailController:246 - Filtering attendance data
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:246 - Filtering attendance data
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:427 - Loading attendance data for learner: Job Guyo
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:447 - Captured session context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, Admission: adm0013
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:535 - Setting tenant context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:541 - ✅ Set app.current_school_id = 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:549 - ✅ Set app.current_user_id = 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:485 - Loading attendance sessions for learner: adm0013, club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:555 - Looking up learner ID for admission number: adm0013 in school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:569 - Found learner ID: 12febd6a-695d-4890-a3b9-a4bed866696d for admission number: adm0013
2025-09-29 11:39:44 INFO  LearnerAttendanceDetailController:530 - Loaded 1 attendance sessions for learner Job Guyo
2025-09-29 11:40:43 INFO  LearnerAttendanceDetailController:991 - Closing learner attendance view
2025-09-29 11:40:46 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-09-29 11:40:46 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:205 - Setting up date pickers for year: 0, term: 0
2025-09-29 11:40:46 WARN  LearnerAttendanceDetailController:210 - Invalid year, using current year: 2025
2025-09-29 11:40:46 WARN  LearnerAttendanceDetailController:215 - Invalid term, using term 1: 1
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:311 - Calculating term start date for year: 2025, term: 1
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:342 - Calculated term start date: 2025-01-01
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:269 - Calculating term end date for year: 2025, term: 1
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:299 - Calculated term end date: 2025-04-30
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:222 - Term date range: 2025-01-01 to 2025-04-30
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:427 - Loading attendance data for learner: Unknown
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:205 - Setting up date pickers for year: 2025, term: 3
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:311 - Calculating term start date for year: 2025, term: 3
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:342 - Calculated term start date: 2025-09-01
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:269 - Calculating term end date for year: 2025, term: 3
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:299 - Calculated term end date: 2025-12-31
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:222 - Term date range: 2025-09-01 to 2025-12-31
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:246 - Filtering attendance data
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:246 - Filtering attendance data
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:427 - Loading attendance data for learner: Job Guyo
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:447 - Captured session context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, Admission: adm0013
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:535 - Setting tenant context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:541 - ✅ Set app.current_school_id = 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:549 - ✅ Set app.current_user_id = 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:485 - Loading attendance sessions for learner: adm0013, club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:555 - Looking up learner ID for admission number: adm0013 in school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:569 - Found learner ID: 12febd6a-695d-4890-a3b9-a4bed866696d for admission number: adm0013
2025-09-29 11:40:46 INFO  LearnerAttendanceDetailController:530 - Loaded 1 attendance sessions for learner Job Guyo
2025-09-29 11:43:40 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-09-29 11:43:40 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-01 04:08:51 INFO  Main:112 - Environment variables loaded successfully
2025-10-01 04:08:57 INFO  Main:138 - Application UI launched successfully
2025-10-01 04:09:17 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-01 04:09:23 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@5ac98a8e
2025-10-01 04:09:23 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-01 04:09:25 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-10-01 04:09:25 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:09:25 INFO  Main:89 - Testing Excel integration...
2025-10-01 04:09:25 INFO  Main:93 - Found 17 learners in database
2025-10-01 04:09:25 INFO  Main:98 - Excel file exists: true
2025-10-01 04:09:25 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-01 04:09:25 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-01 04:09:25 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-01 04:09:25 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-01 04:09:25 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-01 04:09:26 INFO  log:170 - Logging initialized @43124ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-01 04:09:30 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-01 04:09:30 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-01 04:09:30 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-01 04:09:31 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-01 04:09:31 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-01 04:09:31 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-01 04:09:32 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-01 04:09:32 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-01 04:09:32 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-01 04:09:32 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-01 04:09:32 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-01 04:09:32 INFO  AbstractConnector:333 - Started ServerConnector@17c12f50{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-01 04:09:32 INFO  Server:415 - Started @48739ms
2025-10-01 04:09:32 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-01 04:09:32 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-10-01 04:09:33 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-01 04:09:33 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-01 04:09:33 INFO  Main:264 - Webhook registered successfully with school server
2025-10-01 04:09:33 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-10-01 04:09:33 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-01 04:09:33 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:09:33 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-10-01 04:09:34 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-10-01 04:09:34 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:09:34 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-10-01 04:09:34 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:09:35 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:09:35 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-10-01 04:10:10 INFO  AttendanceTabController:201 - No export configuration found, using defaults
2025-10-01 04:10:10 INFO  AttendanceTabController:188 - AttendanceTabController initialized successfully
2025-10-01 04:10:12 INFO  AttendanceTabController:418 - Loaded 1 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-10-01 04:10:12 INFO  AttendanceTabController:484 - Loaded 0 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-10-01 04:10:12 INFO  AttendanceTabController:418 - Loaded 2 sessions for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-10-01 04:10:12 INFO  AttendanceTabController:484 - Loaded 2 attendance records for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd (page 0)
2025-10-01 04:10:26 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-10-01 04:10:26 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-10-01 04:10:26 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:10:26 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:10:26 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:10:27 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-10-01 04:10:27 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-10-01 04:10:43 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-10-01 04:10:43 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:101 - Initializing LearnerAttendanceDetailController
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:205 - Setting up date pickers for year: 0, term: 0
2025-10-01 04:10:44 WARN  LearnerAttendanceDetailController:210 - Invalid year, using current year: 2025
2025-10-01 04:10:44 WARN  LearnerAttendanceDetailController:215 - Invalid term, using term 1: 1
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:311 - Calculating term start date for year: 2025, term: 1
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:342 - Calculated term start date: 2025-01-01
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:269 - Calculating term end date for year: 2025, term: 1
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:299 - Calculated term end date: 2025-04-30
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:222 - Term date range: 2025-01-01 to 2025-04-30
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:427 - Loading attendance data for learner: Unknown
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:109 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-10-01 04:10:44 INFO  LearnerAttendanceDetailController:128 - Validated data - Year: 2025, Term: 3
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:205 - Setting up date pickers for year: 2025, term: 3
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:311 - Calculating term start date for year: 2025, term: 3
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:342 - Calculated term start date: 2025-09-01
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:269 - Calculating term end date for year: 2025, term: 3
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:299 - Calculated term end date: 2025-12-31
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:222 - Term date range: 2025-09-01 to 2025-12-31
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:246 - Filtering attendance data
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:246 - Filtering attendance data
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:427 - Loading attendance data for learner: Job Guyo
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:447 - Captured session context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, Admission: adm0013
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:535 - Setting tenant context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:541 - ✅ Set app.current_school_id = 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:549 - ✅ Set app.current_user_id = 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:485 - Loading attendance sessions for learner: adm0013, club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:555 - Looking up learner ID for admission number: adm0013 in school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:569 - Found learner ID: 12febd6a-695d-4890-a3b9-a4bed866696d for admission number: adm0013
2025-10-01 04:10:47 INFO  LearnerAttendanceDetailController:530 - Loaded 1 attendance sessions for learner Job Guyo
2025-10-01 04:12:09 INFO  LearnerAttendanceDetailController:991 - Closing learner attendance view
2025-10-01 04:14:35 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:14:35 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:19:36 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:19:36 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:24:35 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:24:35 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:29:35 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:29:35 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:30:01 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-01 04:30:01 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-01 04:30:56 INFO  Main:112 - Environment variables loaded successfully
2025-10-01 04:30:58 INFO  Main:138 - Application UI launched successfully
2025-10-01 04:35:50 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-01 04:35:57 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1835218c
2025-10-01 04:35:57 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-01 04:35:58 INFO  SessionManager:61 - Session created for username=pam userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=teacher
2025-10-01 04:35:59 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:35:59 INFO  Main:89 - Testing Excel integration...
2025-10-01 04:35:59 INFO  Main:93 - Found 17 learners in database
2025-10-01 04:35:59 INFO  Main:98 - Excel file exists: true
2025-10-01 04:35:59 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-01 04:35:59 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-01 04:35:59 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-01 04:35:59 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-01 04:35:59 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-01 04:36:00 INFO  log:170 - Logging initialized @313592ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-01 04:36:02 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-01 04:36:02 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-01 04:36:02 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-01 04:36:03 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-01 04:36:03 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-01 04:36:03 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-01 04:36:03 INFO  AbstractConnector:333 - Started ServerConnector@68df167c{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-01 04:36:03 INFO  Server:415 - Started @316768ms
2025-10-01 04:36:03 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-01 04:36:04 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-01 04:36:04 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-01 04:36:04 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-01 04:36:04 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-01 04:36:04 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-01 04:36:04 INFO  SessionManager:250 - Excel import attempted by user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: false
2025-10-01 04:36:05 INFO  ExcelSchoolServer:142 - ❌ User not authorized to import Excel - failing silently
2025-10-01 04:36:05 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-01 04:36:05 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:36:05 INFO  LoginController:208 - User 'pam' logged in successfully (userId=5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=teacher)
2025-10-01 04:36:05 INFO  TeacherDashboardController:57 - Initializing TeacherDashboardController
2025-10-01 04:36:05 INFO  TeacherDashboardController:257 - Loading teacher assignment for user: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:36:05 INFO  TeacherDashboardController:278 - FOUND CLUB: Piano (ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd)
2025-10-01 04:36:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:36:05 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:36:05 INFO  TeacherDashboardController:174 - TeacherDashboardController subscribed to enrollment events
2025-10-01 04:36:06 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-01 04:36:06 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-01 04:36:06 INFO  Main:264 - Webhook registered successfully with school server
2025-10-01 04:36:16 INFO  LearnersTabController:96 - Initializing LearnersTabController
2025-10-01 04:36:16 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 0, term: 0
2025-10-01 04:36:16 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:36:16 INFO  LearnersTabController:229 - Loading learners data for club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:36:16 INFO  LearnersTabController:240 - Current school ID: 9d47203f-4e54-47ac-a560-eeb277794e76, Current user ID: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:36:17 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-10-01 04:36:17 INFO  LearnersTabController:349 - Loaded 2 learners (2 active) for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd
2025-10-01 04:36:29 INFO  LearnersTabController:147 - Viewing attendance for learner: Job Guyo
2025-10-01 04:36:29 INFO  LearnersTabController:661 - Opening attendance view for learner: Job Guyo
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:103 - Initializing LearnerAttendanceDetailController
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:214 - Setting up date pickers for year: 0, term: 0
2025-10-01 04:36:31 WARN  LearnerAttendanceDetailController:219 - Invalid year, using current year: 2025
2025-10-01 04:36:31 WARN  LearnerAttendanceDetailController:224 - Invalid term, using term 1: 1
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:320 - Calculating term start date for year: 2025, term: 1
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:351 - Calculated term start date: 2025-01-01
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:278 - Calculating term end date for year: 2025, term: 1
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:308 - Calculated term end date: 2025-04-30
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:231 - Term date range: 2025-01-01 to 2025-04-30
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:117 - Setting learner data: Job Guyo, club: Piano, year: 2025, term: 3
2025-10-01 04:36:31 INFO  LearnerAttendanceDetailController:136 - Validated data - Year: 2025, Term: 3
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:214 - Setting up date pickers for year: 2025, term: 3
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:320 - Calculating term start date for year: 2025, term: 3
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:351 - Calculated term start date: 2025-09-01
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:278 - Calculating term end date for year: 2025, term: 3
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:308 - Calculated term end date: 2025-12-31
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:231 - Term date range: 2025-09-01 to 2025-12-31
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:255 - Filtering attendance data
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:255 - Filtering attendance data
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:436 - Loading attendance data for learner: Job Guyo
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:462 - Captured session context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, Admission: adm0013
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:546 - Setting tenant context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:552 - ✅ Set app.current_school_id = 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:560 - ✅ Set app.current_user_id = 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:496 - Loading attendance sessions for learner: adm0013, club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:566 - Looking up learner ID for admission number: adm0013 in school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:584 - ✅ Found learner ID: 12febd6a-695d-4890-a3b9-a4bed866696d for admission number: adm0013
2025-10-01 04:36:32 INFO  LearnerAttendanceDetailController:541 - Loaded 1 attendance sessions for learner Job Guyo
2025-10-01 04:37:39 INFO  LearnerAttendanceDetailController:769 - Exporting 1 attendance records to CSV for learner: Job Guyo
2025-10-01 04:37:39 INFO  LearnerAttendanceDetailController:845 - Attendance CSV export completed successfully: C:\Users\user\Downloads\attendance_Job_Guyo_20251001.csv
2025-10-01 04:40:27 INFO  LearnersTabController:147 - Viewing attendance for learner: Ken Wamaria
2025-10-01 04:40:27 INFO  LearnersTabController:661 - Opening attendance view for learner: Ken Wamaria
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:103 - Initializing LearnerAttendanceDetailController
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:214 - Setting up date pickers for year: 0, term: 0
2025-10-01 04:40:28 WARN  LearnerAttendanceDetailController:219 - Invalid year, using current year: 2025
2025-10-01 04:40:28 WARN  LearnerAttendanceDetailController:224 - Invalid term, using term 1: 1
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:320 - Calculating term start date for year: 2025, term: 1
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:351 - Calculated term start date: 2025-01-01
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:278 - Calculating term end date for year: 2025, term: 1
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:308 - Calculated term end date: 2025-04-30
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:231 - Term date range: 2025-01-01 to 2025-04-30
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:117 - Setting learner data: Ken Wamaria, club: Piano, year: 2025, term: 3
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:136 - Validated data - Year: 2025, Term: 3
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:214 - Setting up date pickers for year: 2025, term: 3
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:320 - Calculating term start date for year: 2025, term: 3
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:351 - Calculated term start date: 2025-09-01
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:278 - Calculating term end date for year: 2025, term: 3
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:308 - Calculated term end date: 2025-12-31
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:231 - Term date range: 2025-09-01 to 2025-12-31
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:255 - Filtering attendance data
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:255 - Filtering attendance data
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:436 - Loading attendance data for learner: Ken Wamaria
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:462 - Captured session context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0, Admission: adm0014
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:546 - Setting tenant context - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:552 - ✅ Set app.current_school_id = 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:560 - ✅ Set app.current_user_id = 5858b2a0-a8b6-40f6-9e14-ef50ba3071f0
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:496 - Loading attendance sessions for learner: adm0014, club: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:566 - Looking up learner ID for admission number: adm0014 in school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:584 - ✅ Found learner ID: 824699cb-2a44-42d8-99d6-642fd60bb56b for admission number: adm0014
2025-10-01 04:40:28 INFO  LearnerAttendanceDetailController:541 - Loaded 1 attendance sessions for learner Ken Wamaria
2025-10-01 04:40:35 INFO  LearnerAttendanceDetailController:1009 - Closing learner attendance view
2025-10-01 04:40:35 INFO  LearnerAttendanceDetailController:1022 - LearnerAttendanceDetailController reset
2025-10-01 04:40:38 INFO  LearnersTabController:132 - Initiating data export
2025-10-01 04:40:51 INFO  LearnersTabController:530 - Exporting 2 learners to PDF: C:\Users\user\Downloads\learners_Piano_2025_term3.pdf
2025-10-01 04:40:54 INFO  LearnersTabController:541 - PDF export completed successfully
2025-10-01 04:41:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:41:05 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:46:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:46:05 INFO  TeacherDashboardController:338 - Found 2 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:46:09 INFO  SessionManager:119 - Session closed
2025-10-01 04:46:09 INFO  TeacherDashboardController:604 - Teacher logout
2025-10-01 04:46:30 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-01 04:46:30 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-01 04:46:30 INFO  Main:89 - Testing Excel integration...
2025-10-01 04:46:30 INFO  Main:93 - Found 17 learners in database
2025-10-01 04:46:30 INFO  Main:98 - Excel file exists: true
2025-10-01 04:46:30 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-01 04:46:30 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-01 04:46:30 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-01 04:46:30 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-01 04:46:30 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-01 04:46:30 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-01 04:46:30 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-01 04:46:30 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-01 04:46:30 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-01 04:46:30 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-01 04:46:30 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-01 04:46:30 ERROR WebhookService:77 - Failed to start webhook service on port 8080
java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-01 04:46:30 ERROR Main:208 - Webhook service failed to start
java.lang.RuntimeException: Could not start webhook listener
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:78) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.lambda$startWebhookService$5(Main.java:205) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
Caused by: java.lang.IllegalStateException: This must be done before route mapping has begun
	at spark.Service.throwBeforeRouteMappingException(Service.java:504) ~[spark-core-2.9.4.jar:?]
	at spark.Service.port(Service.java:169) ~[spark-core-2.9.4.jar:?]
	at spark.Spark.port(Spark.java:1014) ~[spark-core-2.9.4.jar:?]
	at com.cms.clubmanagementsystem.service.WebhookService.configureServer(WebhookService.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.WebhookService.start(WebhookService.java:72) ~[classes/:?]
	... 6 more
2025-10-01 04:46:30 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-01 04:46:30 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-01 04:46:30 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-01 04:46:30 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-01 04:46:35 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-01 04:46:35 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-01 04:46:35 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-01 04:46:35 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-01 04:46:35 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-01 04:46:35 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-01 04:46:35 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-01 04:46:35 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-01 04:46:35 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-01 04:46:35 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:46:35 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:202) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-01 04:46:35 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-01 04:46:35 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-01 04:46:35 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-01 04:46:35 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-01 04:46:35 INFO  LearnerService:680 - Found 12 grades for school
2025-10-01 04:46:36 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-01 04:46:36 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-01 04:46:36 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-01 04:46:36 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-01 04:46:36 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-01 04:46:36 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:46:36 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-01 04:46:36 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-01 04:46:36 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-01 04:46:36 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-01 04:46:36 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:48:33 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-01 04:48:33 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:50:32 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-01 04:50:32 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 04:51:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:51:05 INFO  TeacherDashboardController:338 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 04:56:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 04:56:05 INFO  TeacherDashboardController:338 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 05:01:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 05:01:05 INFO  TeacherDashboardController:338 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 05:06:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 05:06:06 INFO  TeacherDashboardController:338 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 05:11:05 INFO  TeacherDashboardController:302 - Starting loadClubStatistics for club ID: 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year: 2025, term: 3
2025-10-01 05:11:05 INFO  TeacherDashboardController:338 - Found 0 total active learners for club 31f651e3-f41b-4890-b0eb-a9eee7125dcd, year 2025, term 3
2025-10-01 05:12:04 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-01 05:12:06 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-01 05:13:09 INFO  Main:112 - Environment variables loaded successfully
2025-10-01 05:13:11 INFO  Main:138 - Application UI launched successfully
2025-10-01 05:14:19 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-01 05:14:22 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@38ee41cf
2025-10-01 05:14:22 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-01 05:14:23 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-01 05:14:23 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-01 05:14:23 INFO  Main:89 - Testing Excel integration...
2025-10-01 05:14:23 INFO  Main:93 - Found 17 learners in database
2025-10-01 05:14:23 INFO  Main:98 - Excel file exists: true
2025-10-01 05:14:23 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-01 05:14:23 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-01 05:14:23 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-01 05:14:23 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-01 05:14:23 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-01 05:14:24 INFO  log:170 - Logging initialized @86227ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-01 05:14:25 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-01 05:14:25 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-01 05:14:25 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-01 05:14:25 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-01 05:14:25 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-01 05:14:25 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-01 05:14:26 INFO  AbstractConnector:333 - Started ServerConnector@29e39b52{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-01 05:14:26 INFO  Server:415 - Started @88147ms
2025-10-01 05:14:26 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-01 05:14:26 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-01 05:14:26 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:14:26 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-01 05:14:26 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-01 05:14:26 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-01 05:14:26 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-01 05:14:32 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:14:32 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:14:32 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-01 05:14:32 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:14:32 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-01 05:14:33 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-01 05:14:33 INFO  Main:264 - Webhook registered successfully with school server
2025-10-01 05:14:38 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-01 05:14:39 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-01 05:14:39 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-01 05:14:39 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-01 05:14:39 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-01 05:14:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-01 05:14:39 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-01 05:14:39 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-01 05:14:39 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-01 05:14:39 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 05:14:39 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-01 05:14:39 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-01 05:14:39 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-01 05:14:39 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-01 05:14:39 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-01 05:14:40 INFO  LearnerService:680 - Found 12 grades for school
2025-10-01 05:14:40 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-01 05:14:40 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-01 05:14:40 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-01 05:14:40 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-01 05:14:40 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-01 05:14:40 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 05:14:40 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-01 05:14:40 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-01 05:14:40 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-01 05:14:41 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-01 05:14:41 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 05:22:24 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-01 05:22:25 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-01 05:23:33 INFO  Main:112 - Environment variables loaded successfully
2025-10-01 05:23:37 INFO  Main:138 - Application UI launched successfully
2025-10-01 05:24:05 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-01 05:24:08 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@60538c74
2025-10-01 05:24:08 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-01 05:24:09 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-01 05:24:09 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-01 05:24:09 INFO  Main:89 - Testing Excel integration...
2025-10-01 05:24:10 INFO  Main:93 - Found 17 learners in database
2025-10-01 05:24:10 INFO  Main:98 - Excel file exists: true
2025-10-01 05:24:10 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-01 05:24:10 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-01 05:24:10 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-01 05:24:10 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-01 05:24:10 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-01 05:24:11 INFO  log:170 - Logging initialized @57413ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-01 05:24:11 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-01 05:24:11 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-01 05:24:11 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-01 05:24:12 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-01 05:24:12 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-01 05:24:12 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-01 05:24:12 INFO  AbstractConnector:333 - Started ServerConnector@7f65f23b{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-01 05:24:12 INFO  Server:415 - Started @58759ms
2025-10-01 05:24:12 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-01 05:24:12 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-01 05:24:12 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:24:12 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-01 05:24:12 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-01 05:24:12 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-01 05:24:12 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-01 05:24:13 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:24:13 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:24:13 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-01 05:24:13 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-01 05:24:13 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-01 05:24:13 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-01 05:24:13 INFO  Main:264 - Webhook registered successfully with school server
2025-10-01 05:24:15 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-01 05:24:15 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-01 05:24:16 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-01 05:24:16 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-01 05:24:16 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-01 05:24:16 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-01 05:24:16 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-01 05:24:16 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-01 05:24:16 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-01 05:24:16 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 05:24:16 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-01 05:24:16 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-01 05:24:16 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-01 05:24:16 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-01 05:24:16 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-01 05:24:16 INFO  LearnerService:680 - Found 12 grades for school
2025-10-01 05:24:16 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-01 05:24:16 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-01 05:24:16 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-01 05:24:16 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-01 05:24:16 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-01 05:24:16 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 05:24:16 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-01 05:24:16 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-01 05:24:16 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-01 05:24:16 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-01 05:24:16 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-01 05:27:46 INFO  Main:414 - Application shutdown initiated
2025-10-01 05:27:46 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-01 05:27:46 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-01 05:27:46 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-01 05:27:46 INFO  AbstractConnector:383 - Stopped ServerConnector@7f65f23b{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-01 05:27:46 INFO  session:149 - node0 Stopped scavenging
2025-10-01 05:27:46 INFO  EmbeddedJettyServer:180 - done
2025-10-01 05:27:46 INFO  WebhookService:389 - Webhook service stopped
2025-10-01 05:27:46 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-01 05:27:46 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-01 05:27:46 INFO  Main:405 - Excel School Server stopped
2025-10-01 05:27:46 INFO  SessionManager:119 - Session closed
2025-10-01 05:27:46 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-01 05:27:46 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-01 05:27:46 INFO  Main:429 - Application stopped successfully
2025-10-02 04:44:10 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 04:44:18 INFO  Main:138 - Application UI launched successfully
2025-10-02 04:44:37 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 04:44:43 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@57822b11
2025-10-02 04:44:43 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 04:44:44 INFO  LoginController:163 - Invalid password attempt for username=mw1
2025-10-02 04:44:49 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 04:44:49 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 04:44:49 INFO  Main:89 - Testing Excel integration...
2025-10-02 04:44:49 INFO  Main:93 - Found 17 learners in database
2025-10-02 04:44:49 INFO  Main:98 - Excel file exists: true
2025-10-02 04:44:49 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 04:44:49 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 04:44:50 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 04:44:50 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 04:44:50 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 04:44:50 INFO  log:170 - Logging initialized @60858ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 04:44:51 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 04:44:51 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 04:44:51 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 04:44:51 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 04:44:51 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 04:44:51 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 04:44:52 INFO  AbstractConnector:333 - Started ServerConnector@3cd3cca7{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 04:44:52 INFO  Server:415 - Started @62468ms
2025-10-02 04:44:52 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 04:44:52 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 04:44:52 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 04:44:52 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 04:44:52 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 04:44:52 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 04:44:52 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 04:44:53 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 04:44:53 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 04:44:53 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 04:44:53 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 04:44:53 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 04:44:53 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 04:44:53 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 04:44:56 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 04:44:56 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 04:44:56 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 04:44:56 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 04:44:56 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 04:44:56 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 04:44:56 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 04:44:56 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 04:44:56 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 04:44:56 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 04:44:57 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 04:44:57 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 04:44:57 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 04:44:57 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 04:44:57 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 04:44:57 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 04:44:57 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 04:44:57 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 04:44:57 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 04:44:57 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 04:44:57 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 04:44:57 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 04:44:57 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 04:44:57 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 04:44:57 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 04:44:57 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 04:44:57 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 04:46:42 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 04:46:42 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 04:57:25 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 04:57:26 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:02:48 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:02:52 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:03:05 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:03:10 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@168e5716
2025-10-02 05:03:10 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:03:11 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:03:11 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:03:11 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:03:11 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:03:11 INFO  Main:98 - Excel file exists: true
2025-10-02 05:03:11 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:03:11 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:03:11 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:03:11 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:03:11 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:03:12 INFO  log:170 - Logging initialized @33853ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:03:12 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:03:12 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:03:12 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:03:12 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:03:12 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:03:12 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 05:03:12 INFO  AbstractConnector:333 - Started ServerConnector@429827c2{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:03:12 INFO  Server:415 - Started @34639ms
2025-10-02 05:03:12 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:03:15 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:03:15 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:03:15 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:03:15 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:03:15 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:03:15 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:03:16 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:03:16 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:03:16 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:03:16 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:03:16 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:03:16 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:03:16 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:03:19 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:03:19 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:03:19 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:03:19 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:03:19 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:03:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:03:19 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:03:19 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:03:19 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:03:19 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:03:19 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:03:19 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:03:19 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:03:19 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:03:20 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:03:20 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:03:20 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:03:20 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:03:20 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:03:20 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:03:20 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:03:20 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:03:20 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:03:20 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:03:20 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:03:20 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:03:20 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:07:23 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:07:23 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:07:48 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:07:50 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:08:05 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:08:06 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1b2b9dc7
2025-10-02 05:08:06 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:08:06 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:08:06 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:08:06 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:08:07 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:08:07 INFO  Main:98 - Excel file exists: true
2025-10-02 05:08:07 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:08:07 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:08:07 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:08:07 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:08:07 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:08:07 INFO  log:170 - Logging initialized @25138ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:08:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:08:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:08:07 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:08:07 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:08:07 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:08:07 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 05:08:07 INFO  AbstractConnector:333 - Started ServerConnector@29075538{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:08:07 INFO  Server:415 - Started @25438ms
2025-10-02 05:08:07 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:08:07 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:08:07 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:08:07 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:08:07 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:08:07 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:08:07 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:08:07 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:08:07 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:08:07 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:08:07 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:08:08 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:08:08 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:08:08 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:08:09 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:08:09 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:08:09 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:08:09 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:08:09 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:08:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:08:09 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:08:09 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:08:09 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:08:09 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:08:09 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:08:09 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:08:09 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:08:09 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:08:09 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:08:09 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:08:09 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:08:09 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:08:09 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:08:09 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:08:09 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:08:09 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:08:09 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:08:09 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:08:09 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:08:09 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:08:09 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:17:35 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:17:35 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:18:04 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:18:06 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:18:36 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:18:39 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1b6fe092
2025-10-02 05:18:39 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:18:40 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:18:40 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:18:40 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:18:41 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:18:41 INFO  Main:98 - Excel file exists: true
2025-10-02 05:18:41 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:18:41 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:18:41 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:18:41 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:18:41 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:18:41 INFO  log:170 - Logging initialized @44470ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:18:42 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:18:42 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:18:42 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:18:43 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:18:43 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:18:43 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 05:18:43 INFO  AbstractConnector:333 - Started ServerConnector@636fb647{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:18:43 INFO  Server:415 - Started @45954ms
2025-10-02 05:18:43 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:18:43 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:18:43 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:18:43 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:18:43 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:18:43 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:18:43 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:18:44 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:18:44 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:18:44 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:18:44 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:18:44 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:18:45 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:18:45 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:18:47 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:18:47 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:18:47 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:18:47 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:18:47 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:18:47 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:18:47 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:18:47 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:18:47 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:18:47 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:18:47 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:18:47 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:18:47 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:18:47 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:18:47 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:18:48 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:18:48 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:18:48 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:18:48 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:18:48 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:18:48 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:18:48 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:18:48 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:18:48 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:18:48 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:18:48 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:18:48 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:20:58 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:20:58 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:21:36 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:21:39 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:21:51 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:21:52 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@44a94cd5
2025-10-02 05:21:52 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:21:52 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:21:52 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:21:52 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:21:53 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:21:53 INFO  Main:98 - Excel file exists: true
2025-10-02 05:21:53 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:21:53 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:21:53 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:21:53 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:21:53 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:21:53 INFO  log:170 - Logging initialized @26810ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:21:53 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:21:53 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:21:53 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:21:53 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:21:53 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:21:53 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 05:21:53 INFO  AbstractConnector:333 - Started ServerConnector@28e0e3bd{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:21:53 INFO  Server:415 - Started @27066ms
2025-10-02 05:21:53 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:21:53 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:21:53 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:21:53 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:21:53 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:21:53 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:21:53 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:21:53 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:21:53 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:21:53 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:21:53 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:21:54 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:21:54 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:21:54 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:21:55 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:21:55 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:21:55 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:21:55 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:21:55 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:21:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:21:55 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:21:55 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:21:55 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:21:55 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:21:55 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:21:55 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:21:55 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:21:55 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:21:55 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:21:55 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:21:55 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:21:55 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:21:55 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:21:55 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:21:55 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:21:55 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:21:55 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:21:55 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:21:55 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:21:55 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:21:55 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:26:43 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:26:43 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:28:57 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:28:58 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:34:51 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:34:52 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:35:10 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:35:11 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@19568dc
2025-10-02 05:35:11 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:35:11 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:35:11 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:35:11 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:35:11 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:35:11 INFO  Main:98 - Excel file exists: true
2025-10-02 05:35:11 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:35:11 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:35:11 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:35:11 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:35:11 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:35:12 INFO  log:170 - Logging initialized @26332ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:35:12 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:35:12 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:35:12 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:35:12 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:35:12 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:35:12 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 05:35:12 INFO  AbstractConnector:333 - Started ServerConnector@3503684c{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:35:12 INFO  Server:415 - Started @26610ms
2025-10-02 05:35:12 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:35:12 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:35:12 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:35:12 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:35:12 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:35:12 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:35:12 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:35:12 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:35:12 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:35:12 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:35:12 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:35:13 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:35:13 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:35:13 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:35:15 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:35:15 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:35:15 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:35:15 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:35:15 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:35:15 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:35:15 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:35:15 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:35:15 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:35:15 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:35:15 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:35:15 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:35:15 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:35:15 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:35:15 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:35:15 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:35:15 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:35:15 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:35:15 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:35:15 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:35:15 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:35:15 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:35:15 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:35:15 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:35:15 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:35:15 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:35:15 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:43:21 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:43:21 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:43:44 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:43:45 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:45:01 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:45:02 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3bf1a9a3
2025-10-02 05:45:02 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:45:03 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:45:03 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:45:03 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:45:03 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:45:03 INFO  Main:98 - Excel file exists: true
2025-10-02 05:45:03 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:45:03 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:45:03 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:45:03 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:45:03 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:45:03 INFO  log:170 - Logging initialized @83000ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:45:03 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:45:03 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:45:03 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:45:03 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:45:03 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:45:03 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 05:45:03 INFO  AbstractConnector:333 - Started ServerConnector@7f1a21e1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:45:03 INFO  Server:415 - Started @83245ms
2025-10-02 05:45:03 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:45:03 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:45:03 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:45:03 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:45:03 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:45:03 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:45:03 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:45:03 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:45:03 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:45:03 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:45:03 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:45:04 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:45:04 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:45:04 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:45:05 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:45:05 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:45:05 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:45:05 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:45:05 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:45:05 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:45:05 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:45:05 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:45:05 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:45:05 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:45:05 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:45:05 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:45:05 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:45:05 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:45:05 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:45:05 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:45:05 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:45:05 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:45:05 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:45:05 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:45:05 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:45:05 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:45:05 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:45:05 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:45:05 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:45:06 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:45:06 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:49:30 INFO  Main:414 - Application shutdown initiated
2025-10-02 05:49:30 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:49:30 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-02 05:49:30 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-02 05:49:33 INFO  AbstractConnector:383 - Stopped ServerConnector@7f1a21e1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:49:33 INFO  session:149 - node0 Stopped scavenging
2025-10-02 05:49:33 INFO  EmbeddedJettyServer:180 - done
2025-10-02 05:49:33 INFO  WebhookService:389 - Webhook service stopped
2025-10-02 05:49:33 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-02 05:49:33 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-02 05:49:33 INFO  Main:405 - Excel School Server stopped
2025-10-02 05:49:33 INFO  SessionManager:119 - Session closed
2025-10-02 05:49:34 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:49:34 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:49:34 INFO  Main:429 - Application stopped successfully
2025-10-02 05:50:28 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:50:32 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:50:48 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 05:51:08 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7dc59306
2025-10-02 05:51:08 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 05:51:17 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 05:51:17 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 05:51:17 INFO  Main:89 - Testing Excel integration...
2025-10-02 05:51:18 INFO  Main:93 - Found 17 learners in database
2025-10-02 05:51:18 INFO  Main:98 - Excel file exists: true
2025-10-02 05:51:18 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 05:51:18 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 05:51:19 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 05:51:19 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 05:51:19 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 05:51:19 INFO  log:170 - Logging initialized @80294ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 05:51:19 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 05:51:19 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 05:51:19 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 05:51:20 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 05:51:20 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 05:51:20 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 05:51:21 INFO  AbstractConnector:333 - Started ServerConnector@6d8fe663{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 05:51:21 INFO  Server:415 - Started @81788ms
2025-10-02 05:51:21 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 05:51:24 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 05:51:24 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:51:24 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 05:51:24 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 05:51:24 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 05:51:24 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 05:51:25 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 05:51:25 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 05:51:25 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 05:51:26 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:51:26 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:51:26 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 05:51:26 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 05:51:36 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 05:51:36 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 05:51:37 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 05:51:37 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 05:51:37 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 05:51:37 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 05:51:37 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 05:51:37 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 05:51:37 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 05:51:37 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:51:39 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 05:51:39 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 05:51:39 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 05:51:39 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 05:51:39 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 05:51:40 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 05:51:43 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 05:51:43 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 05:51:43 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 05:51:43 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 05:51:43 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 05:51:43 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:51:43 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 05:51:43 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 05:51:43 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 05:51:44 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 05:51:44 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 05:59:05 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 05:59:05 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 05:59:41 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 05:59:45 INFO  Main:138 - Application UI launched successfully
2025-10-02 05:59:58 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:00:03 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@5bbccda6
2025-10-02 06:00:03 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:00:04 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:00:04 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:00:04 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:00:04 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:00:04 INFO  Main:98 - Excel file exists: true
2025-10-02 06:00:04 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:00:04 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:00:04 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:00:04 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:00:04 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:00:05 INFO  log:170 - Logging initialized @35520ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:00:05 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:00:05 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:00:06 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:00:06 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:00:06 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:00:06 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 06:00:06 INFO  AbstractConnector:333 - Started ServerConnector@25dea2bc{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:00:06 INFO  Server:415 - Started @36542ms
2025-10-02 06:00:06 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:00:06 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:00:06 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:00:06 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:00:06 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:00:06 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:00:06 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:00:07 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:00:07 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:00:07 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:00:07 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:00:07 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:00:07 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:00:07 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:00:09 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:00:09 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:00:09 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:00:09 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:00:09 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:00:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:00:09 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:00:09 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:00:09 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:00:09 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:00:10 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:00:10 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:00:10 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:00:10 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:00:10 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:00:10 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:00:10 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:00:10 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:00:10 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:00:10 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:00:10 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:00:10 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:00:10 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:00:10 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:00:10 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:00:10 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:00:10 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:05:07 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:05:07 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:05:22 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:05:24 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:05:36 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:05:36 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3c41f3a6
2025-10-02 06:05:36 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:05:37 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:05:37 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:05:37 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:05:37 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:05:37 INFO  Main:98 - Excel file exists: true
2025-10-02 06:05:37 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:05:37 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:05:37 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:05:37 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:05:37 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:05:37 INFO  log:170 - Logging initialized @21393ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:05:37 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:05:37 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:05:37 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:05:38 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:05:38 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:05:38 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 06:05:38 INFO  AbstractConnector:333 - Started ServerConnector@3a2072f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:05:38 INFO  Server:415 - Started @21953ms
2025-10-02 06:05:38 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:05:38 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:05:38 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:05:38 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:05:38 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:05:38 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:05:38 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:05:38 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:05:39 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:05:39 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:05:39 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:05:39 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:05:39 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:05:39 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:05:40 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:05:40 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:05:40 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:05:40 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:05:40 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:05:40 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:05:40 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:05:40 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:05:40 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:05:40 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:05:40 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:05:41 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:05:41 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:05:41 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:05:41 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:05:41 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:05:41 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:05:41 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:05:41 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:05:41 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:05:41 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:05:41 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:05:41 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:05:41 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:05:41 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:05:41 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:05:41 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:07:21 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:07:21 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:07:34 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:07:35 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:07:48 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:07:48 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@74ce46e4
2025-10-02 06:07:48 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:07:49 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:07:49 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:07:49 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:07:49 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:07:49 INFO  Main:98 - Excel file exists: true
2025-10-02 06:07:49 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:07:49 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:07:49 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:07:49 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:07:49 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:07:49 INFO  log:170 - Logging initialized @21013ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:07:49 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:07:49 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:07:49 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:07:49 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:07:49 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:07:49 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 06:07:49 INFO  AbstractConnector:333 - Started ServerConnector@7779ffc2{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:07:49 INFO  Server:415 - Started @21314ms
2025-10-02 06:07:49 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:07:50 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:07:50 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:07:50 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:07:50 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:07:50 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:07:50 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:07:50 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:07:50 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:07:50 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:07:50 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:07:50 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:07:50 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:07:50 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:07:51 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:07:51 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:07:51 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:07:51 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:07:51 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:07:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:07:51 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:07:51 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:07:51 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:07:51 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:07:51 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:07:51 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:07:51 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:07:51 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:07:51 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:07:51 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:07:51 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:07:51 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:07:51 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:07:51 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:07:51 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:07:51 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:07:51 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:07:51 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:07:51 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:07:52 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:07:52 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:12:52 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:12:52 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:13:20 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:13:22 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:13:35 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:13:57 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@d6d73cc
2025-10-02 06:13:57 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:14:01 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:14:01 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:14:01 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:14:02 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:14:02 INFO  Main:98 - Excel file exists: true
2025-10-02 06:14:02 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:14:02 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:14:04 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:14:04 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:14:04 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:14:05 INFO  log:170 - Logging initialized @53821ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:14:09 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:14:09 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:14:09 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:14:10 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:14:10 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:14:10 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 06:14:12 INFO  AbstractConnector:333 - Started ServerConnector@6be1adf1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:14:12 INFO  Server:415 - Started @60252ms
2025-10-02 06:14:12 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:14:13 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:14:13 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:14:13 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:14:13 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:14:13 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:14:18 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:14:19 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:14:19 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:14:22 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:14:23 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:14:24 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:14:24 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:14:24 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:14:43 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:14:43 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:14:44 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:14:44 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:14:44 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:14:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:14:44 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:14:44 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:14:44 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:14:44 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:14:44 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:14:44 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:14:44 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:14:44 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:14:44 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:14:44 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:14:45 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:14:45 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:14:45 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:14:45 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:14:45 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:14:45 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:14:45 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:14:45 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:14:45 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:14:46 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:14:46 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:16:07 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:16:07 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:16:40 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:16:44 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:18:27 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:18:28 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@19568dc
2025-10-02 06:18:28 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:18:28 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:18:28 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:18:29 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:18:29 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:18:29 INFO  Main:98 - Excel file exists: true
2025-10-02 06:18:29 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:18:29 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:18:29 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:18:29 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:18:29 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:18:29 INFO  log:170 - Logging initialized @120407ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:18:29 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:18:29 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:18:29 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:18:29 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:18:29 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:18:29 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 06:18:29 INFO  AbstractConnector:333 - Started ServerConnector@2cbebc02{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:18:29 INFO  Server:415 - Started @120638ms
2025-10-02 06:18:29 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:18:29 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:18:29 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:18:29 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:18:29 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:18:29 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:18:29 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:18:30 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:18:30 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:18:30 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:18:30 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:18:30 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:18:30 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:18:30 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:18:31 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:18:31 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:18:31 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:18:31 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:18:31 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:18:31 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:18:31 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:18:31 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:18:31 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:18:31 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:18:31 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:18:31 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:18:31 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:18:31 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:18:31 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:18:31 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:18:31 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:18:31 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:18:31 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:18:31 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:18:31 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:18:31 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:18:31 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:18:31 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:18:31 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:18:31 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:18:31 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:23:34 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:23:34 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:24:15 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:24:23 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:24:37 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:24:48 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@298b742d
2025-10-02 06:24:48 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:24:49 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:24:50 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:24:50 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:24:50 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:24:50 INFO  Main:98 - Excel file exists: true
2025-10-02 06:24:50 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:24:50 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:24:51 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:24:51 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:24:51 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:24:52 INFO  log:170 - Logging initialized @68619ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:24:53 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:24:53 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:24:54 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:24:54 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:24:54 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:24:54 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 06:24:55 INFO  AbstractConnector:333 - Started ServerConnector@d4f86df{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:24:55 INFO  Server:415 - Started @71770ms
2025-10-02 06:24:55 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:24:56 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:24:56 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:24:56 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:24:56 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:24:56 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:24:56 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:24:57 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:24:57 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:24:57 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:24:57 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:24:58 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:24:58 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:24:58 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:25:02 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:25:02 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:25:02 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:25:02 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:25:03 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:25:03 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:25:03 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:25:03 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:25:03 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:25:03 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:25:03 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:25:03 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:25:03 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:25:03 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:25:03 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:25:03 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:25:03 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:25:03 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:25:03 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:25:03 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:25:03 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:25:03 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:25:03 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:25:03 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:25:03 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:25:03 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:25:03 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:31:49 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:31:49 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:32:03 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:32:05 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:33:03 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:33:04 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@87df339
2025-10-02 06:33:04 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:33:04 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:33:04 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:33:04 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:33:05 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:33:05 INFO  Main:98 - Excel file exists: true
2025-10-02 06:33:05 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:33:05 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:33:05 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:33:05 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:33:05 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:33:05 INFO  log:170 - Logging initialized @68452ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:33:05 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:33:05 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:33:05 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:33:05 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:33:05 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:33:05 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 06:33:05 INFO  AbstractConnector:333 - Started ServerConnector@a15cbc2{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:33:05 INFO  Server:415 - Started @68702ms
2025-10-02 06:33:05 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:33:05 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:33:05 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:33:05 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:33:05 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:33:05 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:33:05 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:33:05 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:33:05 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:33:05 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:33:05 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:33:05 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:33:06 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:33:06 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:33:11 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:33:11 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:33:11 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:33:11 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:33:11 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:33:11 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:33:11 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:33:11 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:33:11 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:33:11 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:33:11 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:33:11 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:33:11 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:33:11 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:33:11 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:33:11 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:33:11 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:33:11 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:33:11 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:33:11 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:33:11 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:33:11 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:33:11 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:33:11 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:33:11 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:33:11 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:33:11 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:34:44 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:34:44 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:35:09 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:35:12 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:38:41 INFO  Main:414 - Application shutdown initiated
2025-10-02 06:38:41 INFO  Main:429 - Application stopped successfully
2025-10-02 06:45:05 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:45:08 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:45:45 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:45:47 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@48009a00
2025-10-02 06:45:47 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:45:47 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:45:47 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:45:48 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:45:49 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:45:49 INFO  Main:98 - Excel file exists: true
2025-10-02 06:45:49 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:45:49 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:45:49 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:45:49 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:45:49 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:45:49 INFO  log:170 - Logging initialized @49054ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:45:50 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:45:50 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:45:50 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:45:50 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:45:50 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:45:50 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 06:45:51 INFO  AbstractConnector:333 - Started ServerConnector@43a56895{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:45:51 INFO  Server:415 - Started @50249ms
2025-10-02 06:45:51 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:45:51 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:45:51 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:45:51 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:45:51 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:45:51 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:45:51 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:45:51 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:45:51 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:45:51 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:45:51 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:45:52 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:45:52 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:45:52 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:45:55 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:45:55 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:45:55 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:45:55 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:45:55 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:45:55 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:45:55 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:45:55 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:45:55 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:45:55 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:45:55 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:45:55 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:45:55 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:45:55 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:45:55 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:45:55 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:45:56 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:45:56 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:45:56 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:45:56 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:45:56 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:45:56 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:45:56 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:45:56 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:45:56 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:45:56 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:45:56 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:47:27 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:47:27 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:47:42 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:47:45 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:48:04 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:48:06 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4a508e71
2025-10-02 06:48:06 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:48:06 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:48:06 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:48:07 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:48:07 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:48:07 INFO  Main:98 - Excel file exists: true
2025-10-02 06:48:07 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:48:07 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:48:07 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:48:07 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:48:07 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:48:07 INFO  log:170 - Logging initialized @30436ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:48:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:48:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:48:07 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:48:07 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:48:07 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:48:07 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 06:48:07 INFO  AbstractConnector:333 - Started ServerConnector@3ec5bc8b{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:48:07 INFO  Server:415 - Started @30758ms
2025-10-02 06:48:07 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:48:08 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:48:08 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:48:08 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:48:08 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:48:08 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:48:08 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:48:08 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:48:08 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:48:08 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:48:08 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:48:08 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:48:08 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:48:08 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:48:09 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:48:09 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:48:09 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:48:09 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:48:09 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:48:09 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:48:09 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:48:09 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:48:09 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:48:09 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:48:09 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:48:09 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:48:09 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:48:09 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:48:09 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:48:09 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:48:09 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:48:09 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:48:09 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:48:09 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:48:09 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:48:09 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:48:09 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:48:09 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:48:10 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:48:10 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:48:10 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:57:22 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 06:57:22 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 06:57:56 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 06:58:00 INFO  Main:138 - Application UI launched successfully
2025-10-02 06:58:16 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 06:58:19 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@60538c74
2025-10-02 06:58:19 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 06:58:20 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 06:58:20 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 06:58:20 INFO  Main:89 - Testing Excel integration...
2025-10-02 06:58:20 INFO  Main:93 - Found 17 learners in database
2025-10-02 06:58:20 INFO  Main:98 - Excel file exists: true
2025-10-02 06:58:20 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 06:58:20 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 06:58:21 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 06:58:21 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 06:58:21 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 06:58:21 INFO  log:170 - Logging initialized @31406ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 06:58:22 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 06:58:22 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 06:58:22 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 06:58:22 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 06:58:22 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 06:58:22 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 06:58:23 INFO  AbstractConnector:333 - Started ServerConnector@5e93a542{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 06:58:23 INFO  Server:415 - Started @32631ms
2025-10-02 06:58:23 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 06:58:23 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 06:58:23 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:58:23 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 06:58:23 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 06:58:23 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 06:58:23 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 06:58:23 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:58:23 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:58:23 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 06:58:23 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 06:58:23 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 06:58:24 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 06:58:24 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 06:58:26 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 06:58:26 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 06:58:26 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 06:58:26 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 06:58:26 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 06:58:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 06:58:26 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 06:58:26 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 06:58:26 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 06:58:26 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:58:26 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 06:58:26 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 06:58:26 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 06:58:26 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 06:58:26 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 06:58:26 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 06:58:27 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 06:58:27 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 06:58:27 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 06:58:27 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 06:58:27 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 06:58:27 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 06:58:27 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 06:58:27 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 06:58:27 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 06:58:27 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 06:58:27 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:10:23 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 07:10:23 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 07:11:58 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 07:12:02 INFO  Main:138 - Application UI launched successfully
2025-10-02 07:12:30 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 07:12:33 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3a622f04
2025-10-02 07:12:33 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 07:12:34 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 07:12:34 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 07:12:34 INFO  Main:89 - Testing Excel integration...
2025-10-02 07:12:34 INFO  Main:93 - Found 17 learners in database
2025-10-02 07:12:34 INFO  Main:98 - Excel file exists: true
2025-10-02 07:12:34 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 07:12:34 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 07:12:34 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 07:12:34 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 07:12:34 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 07:12:35 INFO  log:170 - Logging initialized @54218ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 07:12:35 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 07:12:35 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 07:12:35 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 07:12:35 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 07:12:35 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 07:12:35 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 07:12:35 INFO  AbstractConnector:333 - Started ServerConnector@37f0529c{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 07:12:35 INFO  Server:415 - Started @54894ms
2025-10-02 07:12:35 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 07:12:36 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 07:12:36 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:12:36 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 07:12:36 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 07:12:36 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 07:12:36 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 07:12:36 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:12:36 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:12:36 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 07:12:36 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:12:36 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 07:12:37 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 07:12:37 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 07:12:41 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 07:12:41 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 07:12:41 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 07:12:41 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 07:12:41 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 07:12:41 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 07:12:41 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 07:12:41 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 07:12:41 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 07:12:41 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:12:42 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 07:12:42 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 07:12:42 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 07:12:42 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 07:12:42 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 07:12:42 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 07:12:42 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 07:12:42 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 07:12:42 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 07:12:42 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 07:12:42 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 07:12:42 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:12:42 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 07:12:42 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 07:12:42 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 07:12:42 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 07:12:42 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:12:46 INFO  AttendanceSummaryController:215 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 07:18:40 INFO  Main:414 - Application shutdown initiated
2025-10-02 07:18:40 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 07:18:40 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-02 07:18:40 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-02 07:18:41 INFO  AbstractConnector:383 - Stopped ServerConnector@37f0529c{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 07:18:41 INFO  session:149 - node0 Stopped scavenging
2025-10-02 07:18:41 INFO  EmbeddedJettyServer:180 - done
2025-10-02 07:18:41 INFO  WebhookService:389 - Webhook service stopped
2025-10-02 07:18:41 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-02 07:18:41 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-02 07:18:41 INFO  Main:405 - Excel School Server stopped
2025-10-02 07:18:41 INFO  SessionManager:119 - Session closed
2025-10-02 07:18:41 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 07:18:41 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 07:18:41 INFO  Main:429 - Application stopped successfully
2025-10-02 07:30:14 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 07:30:18 INFO  Main:138 - Application UI launched successfully
2025-10-02 07:30:42 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 07:31:12 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@60538c74
2025-10-02 07:31:12 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 07:31:16 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 07:31:17 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 07:31:17 INFO  Main:89 - Testing Excel integration...
2025-10-02 07:31:18 INFO  Main:93 - Found 17 learners in database
2025-10-02 07:31:18 INFO  Main:98 - Excel file exists: true
2025-10-02 07:31:18 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 07:31:18 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 07:31:18 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 07:31:18 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 07:31:18 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 07:31:20 INFO  log:170 - Logging initialized @75793ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 07:31:23 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 07:31:23 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 07:31:23 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 07:31:24 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 07:31:24 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 07:31:24 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 07:31:25 INFO  AbstractConnector:333 - Started ServerConnector@69349cf2{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 07:31:25 INFO  Server:415 - Started @81434ms
2025-10-02 07:31:25 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 07:31:26 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 07:31:26 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:31:26 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 07:31:26 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 07:31:26 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 07:31:26 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 07:31:27 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:31:28 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:31:28 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 07:31:28 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:31:28 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 07:31:29 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 07:31:29 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 07:31:50 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 07:31:50 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 07:31:50 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 07:31:50 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 07:31:50 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 07:31:50 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 07:31:50 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 07:31:50 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 07:31:50 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 07:31:50 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:31:52 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 07:31:52 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 07:31:52 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 07:31:52 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 07:31:52 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 07:31:52 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 07:31:54 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 07:31:54 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 07:31:54 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 07:31:54 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 07:31:54 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 07:31:54 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:31:54 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 07:31:54 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 07:31:54 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 07:31:56 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 07:31:56 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:32:16 INFO  AttendanceSummaryController:246 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 07:42:25 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 07:42:28 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 07:42:56 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 07:43:00 INFO  Main:138 - Application UI launched successfully
2025-10-02 07:43:41 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 07:43:41 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7f3d3e84
2025-10-02 07:43:41 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 07:43:42 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 07:43:42 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 07:43:42 INFO  Main:89 - Testing Excel integration...
2025-10-02 07:43:42 INFO  Main:93 - Found 17 learners in database
2025-10-02 07:43:42 INFO  Main:98 - Excel file exists: true
2025-10-02 07:43:42 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 07:43:42 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 07:43:42 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 07:43:42 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 07:43:42 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 07:43:42 INFO  log:170 - Logging initialized @52448ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 07:43:42 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 07:43:42 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 07:43:42 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 07:43:43 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 07:43:43 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 07:43:43 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 07:43:43 INFO  AbstractConnector:333 - Started ServerConnector@5ce239c6{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 07:43:43 INFO  Server:415 - Started @52689ms
2025-10-02 07:43:43 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 07:43:43 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 07:43:43 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:43:43 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 07:43:43 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 07:43:43 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 07:43:43 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 07:43:43 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:43:43 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:43:43 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 07:43:43 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:43:43 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 07:43:43 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 07:43:43 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 07:43:44 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 07:43:44 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 07:43:44 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 07:43:44 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 07:43:44 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 07:43:44 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 07:43:44 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 07:43:44 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 07:43:44 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 07:43:44 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:43:44 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 07:43:44 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 07:43:44 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 07:43:44 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 07:43:45 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 07:43:45 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 07:43:45 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 07:43:45 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 07:43:45 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 07:43:45 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 07:43:45 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 07:43:45 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:43:45 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 07:43:45 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 07:43:45 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 07:43:45 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 07:43:45 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:43:51 ERROR AttendanceSummaryController:267 - Unexpected error loading attendance data
java.lang.NullPointerException: Cannot invoke "javafx.scene.control.TableView.setItems(javafx.collections.ObservableList)" because "this.frozenTable" is null
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.processDailyResultSet(AttendanceSummaryController.java:349) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.loadDailyAttendance(AttendanceSummaryController.java:316) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.loadAttendanceData(AttendanceSummaryController.java:251) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.initialize(AttendanceSummaryController.java:68) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.CoordinatorDashboardController.loadModule(CoordinatorDashboardController.java:237) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.CoordinatorDashboardController.showAttendanceSummary(CoordinatorDashboardController.java:184) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 07:44:00 ERROR AttendanceSummaryController:267 - Unexpected error loading attendance data
java.lang.NullPointerException: Cannot invoke "javafx.scene.control.TableView.setItems(javafx.collections.ObservableList)" because "this.frozenTable" is null
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.processDailyResultSet(AttendanceSummaryController.java:349) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.loadDailyAttendance(AttendanceSummaryController.java:316) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.loadAttendanceData(AttendanceSummaryController.java:251) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.initialize(AttendanceSummaryController.java:68) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.CoordinatorDashboardController.loadModule(CoordinatorDashboardController.java:237) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.CoordinatorDashboardController.showAttendanceSummary(CoordinatorDashboardController.java:184) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 07:52:41 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 07:52:43 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 07:54:21 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 07:54:25 INFO  Main:138 - Application UI launched successfully
2025-10-02 07:54:43 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 07:54:49 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@3a622f04
2025-10-02 07:54:49 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 07:54:51 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 07:54:51 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 07:54:51 INFO  Main:89 - Testing Excel integration...
2025-10-02 07:54:51 INFO  Main:93 - Found 17 learners in database
2025-10-02 07:54:51 INFO  Main:98 - Excel file exists: true
2025-10-02 07:54:51 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 07:54:51 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 07:54:52 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 07:54:52 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 07:54:52 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 07:54:52 INFO  log:170 - Logging initialized @46426ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 07:54:53 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 07:54:53 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 07:54:53 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 07:54:53 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 07:54:53 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 07:54:53 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 07:54:54 INFO  AbstractConnector:333 - Started ServerConnector@4407d49e{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 07:54:54 INFO  Server:415 - Started @47868ms
2025-10-02 07:54:54 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 07:54:55 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 07:54:55 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:54:55 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 07:54:55 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 07:54:55 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 07:54:55 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 07:54:55 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 07:54:56 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 07:54:56 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 07:54:56 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:54:56 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:54:56 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 07:54:56 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 07:55:02 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 07:55:02 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 07:55:02 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 07:55:02 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 07:55:02 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 07:55:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 07:55:02 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 07:55:02 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 07:55:02 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 07:55:02 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:55:02 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 07:55:02 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 07:55:02 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 07:55:02 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 07:55:02 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 07:55:02 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 07:55:02 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 07:55:02 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 07:55:02 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 07:55:02 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 07:55:02 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 07:55:02 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:55:02 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 07:55:02 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 07:55:03 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 07:55:03 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 07:55:03 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 07:55:22 INFO  AttendanceSummaryController:215 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 07:55:59 INFO  AttendanceSummaryController:215 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 08:24:13 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 08:24:18 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 08:27:55 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 08:28:02 INFO  Main:138 - Application UI launched successfully
2025-10-02 08:29:00 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 08:29:09 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@78ad7cea
2025-10-02 08:29:09 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 08:29:11 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 08:29:11 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 08:29:11 INFO  Main:89 - Testing Excel integration...
2025-10-02 08:29:12 INFO  Main:93 - Found 17 learners in database
2025-10-02 08:29:12 INFO  Main:98 - Excel file exists: true
2025-10-02 08:29:12 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 08:29:12 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 08:29:13 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 08:29:13 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 08:29:13 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 08:29:16 INFO  log:170 - Logging initialized @96010ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 08:29:18 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 08:29:18 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 08:29:18 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 08:29:19 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 08:29:19 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 08:29:19 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 08:29:20 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 08:29:20 INFO  AbstractConnector:333 - Started ServerConnector@68df167c{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 08:29:20 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:29:20 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 08:29:20 INFO  Server:415 - Started @100285ms
2025-10-02 08:29:20 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 08:29:20 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 08:29:20 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 08:29:20 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 08:29:21 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:29:21 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:29:21 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 08:29:21 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:29:21 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 08:29:22 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 08:29:22 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 08:29:26 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 08:29:26 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 08:29:26 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 08:29:26 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 08:29:26 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 08:29:26 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 08:29:26 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 08:29:26 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 08:29:26 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 08:29:26 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 08:29:27 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 08:29:27 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 08:29:27 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 08:29:27 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 08:29:27 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 08:29:27 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 08:29:27 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 08:29:27 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 08:29:27 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 08:29:27 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 08:29:27 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 08:29:27 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 08:29:27 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 08:29:27 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 08:29:27 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 08:29:28 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 08:29:28 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 08:29:53 WARN  AttendanceSummaryController:95 - Scroll container or frozen table not available for vertical sync
2025-10-02 08:29:53 INFO  AttendanceSummaryController:329 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 08:36:54 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 08:36:54 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 08:46:28 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 08:46:34 INFO  Main:138 - Application UI launched successfully
2025-10-02 08:46:49 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 08:47:23 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@20a8862
2025-10-02 08:47:23 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 08:47:28 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 08:47:28 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 08:47:29 INFO  Main:89 - Testing Excel integration...
2025-10-02 08:47:29 INFO  Main:93 - Found 17 learners in database
2025-10-02 08:47:29 INFO  Main:98 - Excel file exists: true
2025-10-02 08:47:29 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 08:47:29 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 08:47:30 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 08:47:30 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 08:47:30 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 08:47:32 INFO  log:170 - Logging initialized @82069ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 08:47:36 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 08:47:36 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 08:47:36 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 08:47:37 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 08:47:37 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 08:47:37 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 08:47:39 INFO  AbstractConnector:333 - Started ServerConnector@7eb93e85{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 08:47:39 INFO  Server:415 - Started @88959ms
2025-10-02 08:47:39 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 08:47:40 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 08:47:40 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:47:40 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 08:47:40 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 08:47:40 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 08:47:40 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 08:47:42 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:47:42 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:47:42 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 08:47:42 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:47:43 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 08:47:43 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 08:47:43 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 08:47:51 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 08:47:51 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 08:47:51 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 08:47:51 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 08:47:51 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 08:47:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 08:47:51 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 08:47:51 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 08:47:51 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 08:47:51 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 08:47:52 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 08:47:52 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 08:47:52 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 08:47:52 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 08:47:52 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 08:47:52 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 08:47:53 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 08:47:53 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 08:47:53 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 08:47:53 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 08:47:53 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 08:47:53 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 08:47:53 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 08:47:53 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 08:47:53 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 08:47:53 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 08:47:53 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 08:48:11 WARN  AttendanceSummaryController:80 - Dual table components not found - using single table mode
2025-10-02 08:48:12 INFO  AttendanceSummaryController:418 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 08:58:35 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 08:58:36 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 08:59:31 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 08:59:31 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 08:59:35 INFO  Main:138 - Application UI launched successfully
2025-10-02 08:59:35 INFO  Main:138 - Application UI launched successfully
2025-10-02 08:59:50 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 08:59:53 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@168e5716
2025-10-02 08:59:53 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 08:59:54 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 08:59:54 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 08:59:55 INFO  Main:89 - Testing Excel integration...
2025-10-02 08:59:55 INFO  Main:93 - Found 17 learners in database
2025-10-02 08:59:55 INFO  Main:98 - Excel file exists: true
2025-10-02 08:59:55 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 08:59:55 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 08:59:55 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 08:59:55 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 08:59:55 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 08:59:56 INFO  log:170 - Logging initialized @30916ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 08:59:57 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 08:59:57 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 08:59:58 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 08:59:58 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 08:59:58 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 08:59:58 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 08:59:58 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 08:59:58 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:59:58 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 08:59:58 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 08:59:58 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 08:59:58 INFO  AbstractConnector:333 - Started ServerConnector@39a2dc61{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 08:59:58 INFO  Server:415 - Started @32528ms
2025-10-02 08:59:58 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 08:59:58 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 08:59:59 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:59:59 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:59:59 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 08:59:59 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 08:59:59 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 08:59:59 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 08:59:59 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 09:00:02 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 09:00:02 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 09:00:02 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 09:00:02 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 09:00:02 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 09:00:02 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 09:00:02 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 09:00:02 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 09:00:02 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 09:00:02 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:00:02 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 09:00:03 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 09:00:03 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 09:00:03 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 09:00:03 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 09:00:03 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 09:00:03 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 09:00:03 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 09:00:03 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 09:00:03 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 09:00:03 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 09:00:03 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:00:03 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 09:00:03 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 09:00:03 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 09:00:04 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 09:00:04 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:00:11 INFO  Main:414 - Application shutdown initiated
2025-10-02 09:00:11 INFO  Main:429 - Application stopped successfully
2025-10-02 09:00:16 INFO  AttendanceSummaryController:211 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 09:06:02 INFO  AttendanceSummaryController:211 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 09:07:00 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 09:07:02 INFO  Main:138 - Application UI launched successfully
2025-10-02 09:07:45 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 09:07:45 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1cbeb6b3
2025-10-02 09:07:45 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 09:07:46 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 09:07:46 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 09:07:46 INFO  Main:89 - Testing Excel integration...
2025-10-02 09:07:46 INFO  Main:93 - Found 17 learners in database
2025-10-02 09:07:46 INFO  Main:98 - Excel file exists: true
2025-10-02 09:07:46 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 09:07:46 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 09:07:46 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 09:07:46 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 09:07:46 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 09:07:46 INFO  log:170 - Logging initialized @54551ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 09:07:46 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 09:07:46 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 09:07:46 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 09:07:46 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 09:07:46 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 09:07:46 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 09:07:46 INFO  AbstractConnector:333 - Started ServerConnector@5bc1f031{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 09:07:46 INFO  Server:415 - Started @54782ms
2025-10-02 09:07:46 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 09:07:47 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 09:07:47 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:07:47 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 09:07:47 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 09:07:47 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 09:07:47 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 09:07:47 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:07:47 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:07:47 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 09:07:47 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:07:47 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 09:07:47 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 09:07:47 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 09:07:48 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 09:07:48 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 09:07:48 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 09:07:48 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 09:07:48 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 09:07:48 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 09:07:48 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 09:07:48 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 09:07:48 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 09:07:48 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:07:48 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 09:07:48 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 09:07:48 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 09:07:48 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 09:07:48 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 09:07:48 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 09:07:48 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 09:07:48 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 09:07:48 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 09:07:48 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 09:07:48 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 09:07:48 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:07:48 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 09:07:48 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 09:07:48 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 09:07:49 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 09:07:49 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:07:53 ERROR AttendanceSummaryController:71 - Error initializing AttendanceSummaryController
java.lang.NullPointerException: Cannot invoke "javafx.scene.Node.setStyle(String)" because the return value of "javafx.scene.control.TableView.lookup(String)" is null
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.setupTableStyling(AttendanceSummaryController.java:116) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.AttendanceSummaryController.initialize(AttendanceSummaryController.java:67) ~[classes/:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.cms.clubmanagementsystem.controller.CoordinatorDashboardController.loadModule(CoordinatorDashboardController.java:237) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.CoordinatorDashboardController.showAttendanceSummary(CoordinatorDashboardController.java:184) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 09:08:43 INFO  Main:414 - Application shutdown initiated
2025-10-02 09:08:43 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 09:08:43 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-02 09:08:43 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-02 09:08:43 INFO  AbstractConnector:383 - Stopped ServerConnector@5bc1f031{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 09:08:43 INFO  session:149 - node0 Stopped scavenging
2025-10-02 09:08:43 INFO  EmbeddedJettyServer:180 - done
2025-10-02 09:08:43 INFO  WebhookService:389 - Webhook service stopped
2025-10-02 09:08:43 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-02 09:08:43 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-02 09:08:43 INFO  Main:405 - Excel School Server stopped
2025-10-02 09:08:43 INFO  SessionManager:119 - Session closed
2025-10-02 09:08:43 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 09:08:43 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 09:08:43 INFO  Main:429 - Application stopped successfully
2025-10-02 09:12:49 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 09:12:51 INFO  Main:138 - Application UI launched successfully
2025-10-02 09:13:03 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 09:13:13 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@7f3d3e84
2025-10-02 09:13:13 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 09:13:14 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 09:13:14 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 09:13:14 INFO  Main:89 - Testing Excel integration...
2025-10-02 09:13:14 INFO  Main:93 - Found 17 learners in database
2025-10-02 09:13:14 INFO  Main:98 - Excel file exists: true
2025-10-02 09:13:14 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 09:13:14 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 09:13:14 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 09:13:14 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 09:13:14 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 09:13:15 INFO  log:170 - Logging initialized @34079ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 09:13:15 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 09:13:15 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 09:13:15 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 09:13:15 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 09:13:15 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 09:13:15 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 09:13:15 INFO  AbstractConnector:333 - Started ServerConnector@6370eee{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 09:13:15 INFO  Server:415 - Started @34949ms
2025-10-02 09:13:15 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 09:13:16 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 09:13:16 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:13:16 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 09:13:16 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 09:13:16 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 09:13:16 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 09:13:16 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:13:16 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:13:16 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 09:13:16 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 09:13:16 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 09:13:17 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 09:13:17 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 09:13:19 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 09:13:19 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 09:13:19 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 09:13:19 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 09:13:19 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 09:13:19 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 09:13:19 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 09:13:19 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 09:13:19 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 09:13:19 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:13:19 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 09:13:19 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 09:13:19 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 09:13:19 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 09:13:19 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 09:13:19 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 09:13:19 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 09:13:19 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 09:13:19 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 09:13:19 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 09:13:19 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 09:13:19 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:13:19 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 09:13:19 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 09:13:19 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 09:13:20 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 09:13:20 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 09:13:26 INFO  AttendanceSummaryController:274 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 09:14:15 INFO  AttendanceSummaryController:274 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 09:14:35 INFO  Main:414 - Application shutdown initiated
2025-10-02 09:14:35 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 09:14:35 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-02 09:14:35 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-02 09:14:35 INFO  AbstractConnector:383 - Stopped ServerConnector@6370eee{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 09:14:35 INFO  session:149 - node0 Stopped scavenging
2025-10-02 09:14:35 INFO  EmbeddedJettyServer:180 - done
2025-10-02 09:14:35 INFO  WebhookService:389 - Webhook service stopped
2025-10-02 09:14:35 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-02 09:14:35 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-02 09:14:35 INFO  Main:405 - Excel School Server stopped
2025-10-02 09:14:35 INFO  SessionManager:119 - Session closed
2025-10-02 09:14:35 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 09:14:35 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 09:14:35 INFO  Main:429 - Application stopped successfully
2025-10-02 22:53:08 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 22:53:11 INFO  Main:138 - Application UI launched successfully
2025-10-02 22:53:29 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 22:53:32 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@540e99fc
2025-10-02 22:53:32 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 22:53:33 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 22:53:33 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 22:53:33 INFO  Main:89 - Testing Excel integration...
2025-10-02 22:53:33 INFO  Main:93 - Found 17 learners in database
2025-10-02 22:53:33 INFO  Main:98 - Excel file exists: true
2025-10-02 22:53:33 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 22:53:33 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 22:53:33 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 22:53:33 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 22:53:33 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 22:53:34 INFO  log:170 - Logging initialized @41406ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 22:53:34 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 22:53:34 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 22:53:34 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 22:53:34 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 22:53:34 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 22:53:34 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 22:53:35 INFO  AbstractConnector:333 - Started ServerConnector@14835e45{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 22:53:35 INFO  Server:415 - Started @42294ms
2025-10-02 22:53:35 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 22:53:35 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 22:53:35 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 22:53:35 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 22:53:35 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 22:53:35 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 22:53:35 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 22:53:36 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 22:53:36 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 22:53:36 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 22:53:36 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 22:53:36 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 22:53:36 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 22:53:36 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 22:53:38 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 22:53:38 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 22:53:39 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 22:53:39 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 22:53:39 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 22:53:39 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 22:53:39 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 22:53:39 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 22:53:39 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 22:53:39 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 22:53:39 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 22:53:39 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 22:53:39 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 22:53:39 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 22:53:39 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 22:53:39 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 22:53:39 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 22:53:39 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 22:53:39 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 22:53:39 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 22:53:39 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 22:53:39 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 22:53:39 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 22:53:39 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 22:53:39 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 22:53:40 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 22:53:40 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 22:55:39 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 22:55:39 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 22:55:52 INFO  AttendanceSummaryController:274 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 23:04:52 INFO  Main:414 - Application shutdown initiated
2025-10-02 23:04:54 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 23:04:54 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-02 23:04:54 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-02 23:04:54 INFO  AbstractConnector:383 - Stopped ServerConnector@14835e45{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 23:04:54 INFO  session:149 - node0 Stopped scavenging
2025-10-02 23:04:54 INFO  EmbeddedJettyServer:180 - done
2025-10-02 23:04:54 INFO  WebhookService:389 - Webhook service stopped
2025-10-02 23:04:54 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-02 23:04:54 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-02 23:04:54 INFO  Main:405 - Excel School Server stopped
2025-10-02 23:04:54 INFO  SessionManager:119 - Session closed
2025-10-02 23:04:54 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 23:04:54 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 23:04:54 INFO  Main:429 - Application stopped successfully
2025-10-02 23:05:33 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 23:05:35 INFO  Main:138 - Application UI launched successfully
2025-10-02 23:05:53 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 23:05:56 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@4641a831
2025-10-02 23:05:56 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 23:05:57 INFO  LoginController:163 - Invalid password attempt for username=mw1
2025-10-02 23:06:04 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 23:06:04 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 23:06:04 INFO  Main:89 - Testing Excel integration...
2025-10-02 23:06:04 INFO  Main:93 - Found 17 learners in database
2025-10-02 23:06:04 INFO  Main:98 - Excel file exists: true
2025-10-02 23:06:04 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 23:06:04 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 23:06:04 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 23:06:04 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 23:06:04 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 23:06:04 INFO  log:170 - Logging initialized @39346ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 23:06:05 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 23:06:05 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 23:06:05 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 23:06:05 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 23:06:05 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 23:06:05 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 23:06:05 INFO  AbstractConnector:333 - Started ServerConnector@913ff68{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 23:06:05 INFO  Server:415 - Started @39904ms
2025-10-02 23:06:05 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 23:06:05 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 23:06:05 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:06:05 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 23:06:05 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 23:06:05 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 23:06:05 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 23:06:05 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:06:05 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:06:05 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 23:06:05 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:06:06 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 23:06:06 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 23:06:06 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 23:06:08 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 23:06:08 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 23:06:08 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 23:06:08 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 23:06:08 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 23:06:08 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 23:06:08 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 23:06:08 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 23:06:08 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 23:06:08 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:06:08 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 23:06:08 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 23:06:08 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 23:06:08 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 23:06:08 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 23:06:08 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 23:06:09 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 23:06:09 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 23:06:09 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 23:06:09 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 23:06:09 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 23:06:09 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:06:09 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 23:06:09 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 23:06:09 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 23:06:09 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 23:06:09 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:08:20 INFO  AttendanceSummaryController:274 - Loaded attendance data for Daily period: 11 clubs, 0 sessions, 3 learners, {:.1f}% attendance
2025-10-02 23:19:54 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 23:19:54 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 23:21:42 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 23:21:45 INFO  Main:138 - Application UI launched successfully
2025-10-02 23:22:04 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 23:22:09 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@57822b11
2025-10-02 23:22:09 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 23:22:10 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 23:22:10 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 23:22:10 INFO  Main:89 - Testing Excel integration...
2025-10-02 23:22:10 INFO  Main:93 - Found 17 learners in database
2025-10-02 23:22:10 INFO  Main:98 - Excel file exists: true
2025-10-02 23:22:10 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 23:22:10 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 23:22:10 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 23:22:10 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 23:22:10 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 23:22:11 INFO  log:170 - Logging initialized @42056ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 23:22:12 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 23:22:12 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 23:22:12 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 23:22:12 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 23:22:12 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 23:22:12 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 23:22:13 INFO  AbstractConnector:333 - Started ServerConnector@17c12f50{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 23:22:13 INFO  Server:415 - Started @43733ms
2025-10-02 23:22:13 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 23:22:13 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 23:22:13 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:22:13 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 23:22:13 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 23:22:13 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 23:22:13 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 23:22:14 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:22:14 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:22:14 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 23:22:14 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:22:14 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 23:22:14 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 23:22:14 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 23:22:18 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 23:22:18 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 23:22:18 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 23:22:18 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 23:22:18 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 23:22:18 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 23:22:18 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 23:22:18 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 23:22:18 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 23:22:18 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:22:18 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 23:22:18 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 23:22:18 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 23:22:18 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 23:22:18 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 23:22:19 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 23:22:19 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 23:22:19 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 23:22:19 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 23:22:19 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 23:22:19 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 23:22:19 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:22:19 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 23:22:19 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 23:22:19 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 23:22:20 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 23:22:20 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:29:26 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 23:29:26 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 23:33:34 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 23:33:36 INFO  Main:138 - Application UI launched successfully
2025-10-02 23:33:52 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 23:33:54 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@589c2bda
2025-10-02 23:33:54 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 23:33:55 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 23:33:55 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 23:33:55 INFO  Main:89 - Testing Excel integration...
2025-10-02 23:33:56 INFO  Main:93 - Found 17 learners in database
2025-10-02 23:33:56 INFO  Main:98 - Excel file exists: true
2025-10-02 23:33:56 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 23:33:56 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 23:33:56 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 23:33:56 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 23:33:56 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 23:33:56 INFO  log:170 - Logging initialized @27246ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 23:33:57 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 23:33:57 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 23:33:57 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 23:33:57 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 23:33:57 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 23:33:57 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-02 23:33:57 INFO  AbstractConnector:333 - Started ServerConnector@2f2c1d94{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 23:33:57 INFO  Server:415 - Started @28416ms
2025-10-02 23:33:57 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 23:33:58 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 23:33:58 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:33:58 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 23:33:58 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 23:33:58 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 23:33:58 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 23:33:58 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:33:58 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:33:58 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 23:33:58 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:33:58 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 23:33:59 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 23:33:59 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 23:34:01 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 23:34:01 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 23:34:01 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 23:34:01 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 23:34:01 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 23:34:01 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 23:34:01 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 23:34:01 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 23:34:01 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 23:34:01 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:34:01 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 23:34:01 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 23:34:01 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 23:34:01 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 23:34:01 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 23:34:01 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 23:34:01 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 23:34:01 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 23:34:01 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 23:34:01 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 23:34:01 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 23:34:01 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:34:01 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 23:34:01 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 23:34:02 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 23:34:02 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 23:34:02 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:36:37 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 23:36:37 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-02 23:37:17 INFO  Main:112 - Environment variables loaded successfully
2025-10-02 23:37:19 INFO  Main:138 - Application UI launched successfully
2025-10-02 23:37:47 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-02 23:37:48 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@1175601b
2025-10-02 23:37:48 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-02 23:37:48 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-02 23:37:48 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-02 23:37:48 INFO  Main:89 - Testing Excel integration...
2025-10-02 23:37:49 INFO  Main:93 - Found 17 learners in database
2025-10-02 23:37:49 INFO  Main:98 - Excel file exists: true
2025-10-02 23:37:49 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-02 23:37:49 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-02 23:37:49 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-02 23:37:49 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-02 23:37:49 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-02 23:37:49 INFO  log:170 - Logging initialized @43337ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-02 23:37:49 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-02 23:37:49 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-02 23:37:49 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-02 23:37:49 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-02 23:37:49 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-02 23:37:49 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-02 23:37:49 INFO  AbstractConnector:333 - Started ServerConnector@4b17d2da{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-02 23:37:49 INFO  Server:415 - Started @43570ms
2025-10-02 23:37:49 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-02 23:37:49 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-02 23:37:49 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:37:49 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-02 23:37:49 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-02 23:37:49 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-02 23:37:49 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-02 23:37:49 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:37:49 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:37:49 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-02 23:37:49 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-02 23:37:49 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-02 23:37:50 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-02 23:37:50 INFO  Main:264 - Webhook registered successfully with school server
2025-10-02 23:37:51 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-02 23:37:51 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-02 23:37:51 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-02 23:37:51 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-02 23:37:51 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-02 23:37:51 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-02 23:37:51 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-02 23:37:51 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-02 23:37:51 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-02 23:37:51 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:37:51 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-02 23:37:51 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-02 23:37:51 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-02 23:37:51 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-02 23:37:51 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-02 23:37:51 INFO  LearnerService:680 - Found 12 grades for school
2025-10-02 23:37:51 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-02 23:37:51 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-02 23:37:51 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-02 23:37:51 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-02 23:37:51 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-02 23:37:51 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:37:51 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-02 23:37:51 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-02 23:37:51 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-02 23:37:51 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-02 23:37:51 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-02 23:45:48 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-02 23:45:51 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-03 00:16:27 INFO  Main:112 - Environment variables loaded successfully
2025-10-03 00:16:32 INFO  Main:138 - Application UI launched successfully
2025-10-03 00:16:59 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-03 00:17:03 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@6c814141
2025-10-03 00:17:03 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-03 00:17:05 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-03 00:17:05 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-03 00:17:05 INFO  Main:89 - Testing Excel integration...
2025-10-03 00:17:05 INFO  Main:93 - Found 17 learners in database
2025-10-03 00:17:05 INFO  Main:98 - Excel file exists: true
2025-10-03 00:17:05 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-03 00:17:05 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-03 00:17:06 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-03 00:17:06 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-03 00:17:06 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-03 00:17:06 INFO  log:170 - Logging initialized @71723ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-03 00:17:07 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-03 00:17:07 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-03 00:17:07 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-03 00:17:07 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-03 00:17:07 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-03 00:17:07 INFO  session:132 - node0 Scavenging every 600000ms
2025-10-03 00:17:08 INFO  AbstractConnector:333 - Started ServerConnector@32c91512{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-03 00:17:08 INFO  Server:415 - Started @73252ms
2025-10-03 00:17:08 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-03 00:17:08 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-03 00:17:08 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-03 00:17:08 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-03 00:17:08 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-03 00:17:08 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-03 00:17:08 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-03 00:17:09 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-03 00:17:09 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-03 00:17:09 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-03 00:17:09 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-03 00:17:09 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-03 00:17:09 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-03 00:17:09 INFO  Main:264 - Webhook registered successfully with school server
2025-10-03 00:17:11 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-03 00:17:11 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-03 00:17:12 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-03 00:17:12 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-03 00:17:12 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-03 00:17:12 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-03 00:17:12 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-03 00:17:12 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-03 00:17:12 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-03 00:17:12 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-03 00:17:12 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-03 00:17:12 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-03 00:17:12 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-03 00:17:12 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-03 00:17:12 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-03 00:17:12 INFO  LearnerService:680 - Found 12 grades for school
2025-10-03 00:17:12 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-03 00:17:12 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-03 00:17:12 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-03 00:17:12 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-03 00:17:12 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-03 00:17:12 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-03 00:17:12 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-03 00:17:12 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-03 00:17:12 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-03 00:17:13 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-03 00:17:13 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-03 01:53:36 INFO  Main:112 - Environment variables loaded successfully
2025-10-03 01:53:40 INFO  Main:138 - Application UI launched successfully
2025-10-03 02:01:37 INFO  HikariDataSource:79 - CMS-Pool - Starting...
2025-10-03 02:01:38 INFO  HikariPool:554 - CMS-Pool - Added connection org.postgresql.jdbc.PgConnection@5b53d0c4
2025-10-03 02:01:38 INFO  HikariDataSource:81 - CMS-Pool - Start completed.
2025-10-03 02:01:40 INFO  SessionManager:61 - Session created for username=mw1 userId=6748e77d-a21d-4fee-94ad-a0532bd88c68 schoolId=9d47203f-4e54-47ac-a560-eeb277794e76 schoolName=main campus role=club_coordinator
2025-10-03 02:01:40 INFO  LoginController:190 - Tenant context verified - School: 9d47203f-4e54-47ac-a560-eeb277794e76, User: 6748e77d-a21d-4fee-94ad-a0532bd88c68
2025-10-03 02:01:40 INFO  Main:89 - Testing Excel integration...
2025-10-03 02:01:40 INFO  Main:93 - Found 17 learners in database
2025-10-03 02:01:40 INFO  Main:98 - Excel file exists: true
2025-10-03 02:01:40 INFO  Main:101 - Excel file size: 9335 bytes
2025-10-03 02:01:40 INFO  Main:179 - Started periodic cleanup scheduler for expired transient data
2025-10-03 02:01:40 INFO  WebhookService:56 - Webhook HMAC validation enabled
2025-10-03 02:01:40 INFO  WebhookService:60 - Webhook API authentication enabled
2025-10-03 02:01:40 INFO  Main:212 - Webhook listener service initializing on port 8080
2025-10-03 02:01:41 INFO  log:170 - Logging initialized @500645ms to org.eclipse.jetty.util.log.Slf4jLog
2025-10-03 02:01:42 INFO  EmbeddedJettyServer:147 - == Spark has ignited ...
2025-10-03 02:01:42 INFO  EmbeddedJettyServer:151 - >> Listening on 0.0.0.0:8080
2025-10-03 02:01:42 INFO  Server:375 - jetty-9.4.48.v20220622; built: 2022-06-21T20:42:25.880Z; git: 6b67c5719d1f4371b33655ff2d047d24e171e49a; jvm 21.0.7+8-LTS-245
2025-10-03 02:01:42 INFO  session:334 - DefaultSessionIdManager workerName=node0
2025-10-03 02:01:42 INFO  session:339 - No SessionScavenger set, using defaults
2025-10-03 02:01:42 INFO  session:132 - node0 Scavenging every 660000ms
2025-10-03 02:01:42 INFO  AbstractConnector:333 - Started ServerConnector@726246b6{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-03 02:01:42 INFO  Server:415 - Started @502074ms
2025-10-03 02:01:42 INFO  WebhookService:75 - Webhook service started successfully on port 8080 - Authentication: true
2025-10-03 02:01:42 INFO  ExcelSchoolServer:125 - Excel School Server initialized:
2025-10-03 02:01:42 INFO  ExcelSchoolServer:126 -   File: C:\Users\user\Desktop\learners.xlsx
2025-10-03 02:01:42 INFO  ExcelSchoolServer:127 -   Webhook URL: http://localhost:8080/webhook
2025-10-03 02:01:42 INFO  ExcelSchoolServer:128 -   HMAC Signature: ENABLED
2025-10-03 02:01:42 INFO  ExcelSchoolServer:129 -   Lock retry settings: 5 attempts with 3000ms delay
2025-10-03 02:01:42 INFO  SessionManager:250 - Excel import attempted by user: 6748e77d-a21d-4fee-94ad-a0532bd88c68, school: 9d47203f-4e54-47ac-a560-eeb277794e76, authorized: true
2025-10-03 02:01:43 INFO  ExcelSchoolServer:147 - Starting Excel School Server monitor for file: C:\Users\user\Desktop\learners.xlsx
2025-10-03 02:01:43 INFO  ExcelSchoolServer:190 - 🔄 Attempting to load Excel data from: C:\Users\user\Desktop\learners.xlsx
2025-10-03 02:01:43 INFO  ExcelSchoolServer:212 - File changed detected, reading Excel data...
2025-10-03 02:01:43 INFO  ExcelSchoolServer:257 - 📖 Reading Excel file: C:\Users\user\Desktop\learners.xlsx
2025-10-03 02:01:43 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-03 02:01:44 INFO  WebhookService:320 - Successfully registered webhook with school server
2025-10-03 02:01:44 INFO  Main:264 - Webhook registered successfully with school server
2025-10-03 02:01:46 INFO  ExcelSchoolServer:271 - 📊 Excel file has 18 rows
2025-10-03 02:01:46 INFO  ExcelSchoolServer:282 - 📋 Headers: admission_number, full_name, grade_name, date_joined_school, gender
2025-10-03 02:01:46 INFO  ExcelSchoolServer:327 - ✅ Parsed 17 valid records from 17 rows (0 duplicates skipped)
2025-10-03 02:01:46 INFO  ExcelSchoolServer:219 - Read 17 learners from Excel file
2025-10-03 02:01:46 INFO  ExcelSchoolServer:500 - Validating 17 new learner records...
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm001
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm002
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm003
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm004
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm005
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm006
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0010
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0011
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0012
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0013
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0020
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm007
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0014
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0023
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0022
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0021
2025-10-03 02:01:46 INFO  ExcelSchoolServer:526 - NEW student detected: adm0025
2025-10-03 02:01:46 INFO  ExcelSchoolServer:551 - Change detection: 17 new, 0 updated, 0 removed, 0 duplicates, 0 invalid skipped
2025-10-03 02:01:46 INFO  ExcelSchoolServer:556 - Processing 17 changes in database
2025-10-03 02:01:46 INFO  ExcelSchoolServer:599 - Attempting to process 17 records in database
2025-10-03 02:01:46 INFO  LearnerService:228 - Cleaning up duplicate records in database for school: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-03 02:01:48 ERROR LearnerService:250 - Error cleaning up database duplicates
org.postgresql.util.PSQLException: ERROR: function max(uuid) does not exist
  Hint: No function matches the given name and argument types. You might need to add explicit type casts.
  Position: 59
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:?]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:?]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.1.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.1.0.jar:?]
	at com.cms.clubmanagementsystem.service.LearnerService.cleanupDuplicates(LearnerService.java:246) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.cleanupDatabaseDuplicates(ExcelSchoolServer.java:585) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.processChangesInDatabase(ExcelSchoolServer.java:604) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.detectChanges(ExcelSchoolServer.java:557) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelData(ExcelSchoolServer.java:224) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.loadExcelDataWithRetryOnLock(ExcelSchoolServer.java:241) ~[classes/:?]
	at com.cms.clubmanagementsystem.service.ExcelSchoolServer.start(ExcelSchoolServer.java:151) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.startExcelSchoolServer(Main.java:249) ~[classes/:?]
	at com.cms.clubmanagementsystem.Main.onSchoolLogin(Main.java:83) ~[classes/:?]
	at com.cms.clubmanagementsystem.controller.LoginController.handleLogin(LoginController.java:197) ~[classes/:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72) ~[javafx-base-21.0.2-win.jar:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1853) ~[javafx-fxml-21.0.2-win.jar:?]
	at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726) ~[javafx-fxml-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Node.fireEvent(Node.java:8875) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.control.Button.fire(Button.java:203) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:207) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274) ~[javafx-controls-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[javafx-base-21.0.2-win.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[javafx-base-21.0.2-win.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3984) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene.processMouseEvent(Scene.java:1890) ~[javafx-graphics-21.0.2-win.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.security.AccessController.doPrivileged(AccessController.java:400) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:551) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[javafx-graphics-21.0.2-win.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185) ~[javafx-graphics-21.0.2-win.jar:?]
	at java.lang.Thread.run(Thread.java:1583) [?:?]
2025-10-03 02:01:48 INFO  ExcelSchoolServer:586 - Removed 0 duplicate records from database
2025-10-03 02:01:48 INFO  ExcelSchoolServer:608 - Raw date strings from Excel:
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm001: '2020-02-02'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm002: '2023-04-08'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm003: '2030-04-05'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm004: '1990-06-06'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm005: '2025-06-09'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm006: '2023-09-09'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0010: '2018-08-16'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0011: '2019-12-03'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0012: '2014-12-30'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0013: '2025-09-15'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0020: '2021-01-01'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm007: '2022-11-02'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0014: '2020-12-01'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0023: '2012-02-02'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0022: '2019-11-23'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0021: '2009-01-01'
2025-10-03 02:01:48 INFO  ExcelSchoolServer:610 -   adm0025: '2008-02-02'
2025-10-03 02:01:48 INFO  LearnerService:659 - School validation: OK - School: main campus
2025-10-03 02:01:49 INFO  LearnerService:680 - Found 12 grades for school
2025-10-03 02:01:50 INFO  LearnerService:587 - Import results: 17 total, 17 successful, 0 failed
2025-10-03 02:01:50 INFO  ExcelSchoolServer:623 - ✅ Successfully processed 17 changes in database
2025-10-03 02:01:50 INFO  ExcelSchoolServer:228 - Successfully processed 17 learners from Excel
2025-10-03 02:01:50 INFO  ExcelSchoolServer:159 - Excel School Server started successfully
2025-10-03 02:01:50 INFO  Main:250 - Excel School Server started for file: C:/Users/user/Desktop/learners.xlsx
2025-10-03 02:01:50 INFO  Main:85 - Services started for school ID: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-03 02:01:50 INFO  LoginController:208 - User 'mw1' logged in successfully (userId=6748e77d-a21d-4fee-94ad-a0532bd88c68, schoolId=9d47203f-4e54-47ac-a560-eeb277794e76, role=club_coordinator)
2025-10-03 02:01:50 WARN  LoginController:306 - Unknown role 'club_coordinator', redirecting to coordinator dashboard
2025-10-03 02:01:50 INFO  ExcelSchoolServer:702 - Watching directory for Excel file changes: C:\Users\user\Desktop
2025-10-03 02:01:51 INFO  OverviewController:52 - === OVERVIEW CONTROLLER INITIALIZATION ===
2025-10-03 02:01:51 INFO  OverviewController:60 - ✅ School ID found: 9d47203f-4e54-47ac-a560-eeb277794e76
2025-10-03 02:15:12 INFO  Main:414 - Application shutdown initiated
2025-10-03 02:15:12 WARN  WebhookService:115 - Unauthorized webhook attempt - missing API key from IP: 127.0.0.1, User-Agent: Java-http-client/21.0.7
2025-10-03 02:15:12 INFO  WebhookService:349 - Successfully unregistered webhook from school server
2025-10-03 02:15:12 INFO  EmbeddedJettyServer:171 - >>> Spark shutting down ...
2025-10-03 02:15:12 INFO  AbstractConnector:383 - Stopped ServerConnector@726246b6{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2025-10-03 02:15:12 INFO  session:149 - node0 Stopped scavenging
2025-10-03 02:15:12 INFO  EmbeddedJettyServer:180 - done
2025-10-03 02:15:12 INFO  WebhookService:389 - Webhook service stopped
2025-10-03 02:15:12 INFO  Main:347 - Shutting down cleanup scheduler...
2025-10-03 02:15:12 INFO  ExcelSchoolServer:178 - Excel School Server stopped gracefully
2025-10-03 02:15:12 INFO  Main:405 - Excel School Server stopped
2025-10-03 02:15:12 INFO  SessionManager:119 - Session closed
2025-10-03 02:15:13 INFO  HikariDataSource:349 - CMS-Pool - Shutdown initiated...
2025-10-03 02:15:13 INFO  HikariDataSource:351 - CMS-Pool - Shutdown completed.
2025-10-03 02:15:13 INFO  Main:429 - Application stopped successfully
